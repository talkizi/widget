(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('/*! tailwindcss v4.1.10 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:oklch(93.6% .032 17.717);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-900:oklch(39.6% .141 25.723);--color-yellow-500:oklch(79.5% .184 86.047);--color-yellow-600:oklch(68.1% .162 75.834);--color-yellow-700:oklch(55.4% .135 66.442);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-50:oklch(96.2% .018 272.314);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-sm:24rem;--container-md:28rem;--container-xl:36rem;--container-2xl:42rem;--container-3xl:48rem;--container-4xl:56rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-extrabold:800;--tracking-tight:-.025em;--leading-tight:1.25;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--blur-sm:8px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.top-2{top:calc(var(--spacing)*2)}.right-0{right:calc(var(--spacing)*0)}.right-2{right:calc(var(--spacing)*2)}.right-6{right:calc(var(--spacing)*6)}.right-20{right:calc(var(--spacing)*20)}.bottom-3{bottom:calc(var(--spacing)*3)}.bottom-6{bottom:calc(var(--spacing)*6)}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.m-4{margin:calc(var(--spacing)*4)}.mx-auto{margin-inline:auto}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-8{margin-top:calc(var(--spacing)*8)}.mr-2{margin-right:calc(var(--spacing)*2)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.mb-10{margin-bottom:calc(var(--spacing)*10)}.mb-12{margin-bottom:calc(var(--spacing)*12)}.mb-16{margin-bottom:calc(var(--spacing)*16)}.ml-1{margin-left:calc(var(--spacing)*1)}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.size-6{width:calc(var(--spacing)*6);height:calc(var(--spacing)*6)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.h-16{height:calc(var(--spacing)*16)}.h-\\[10rem\\]{height:10rem}.h-auto{height:auto}.h-full{height:100%}.h-screen{height:100vh}.max-h-\\[300px\\]{max-height:300px}.max-h-full{max-height:100%}.min-h-\\[60px\\]{min-height:60px}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-14{width:calc(var(--spacing)*14)}.w-24{width:calc(var(--spacing)*24)}.w-\\[10rem\\]{width:10rem}.w-\\[48\\%\\]{width:48%}.w-\\[260px\\]{width:260px}.w-auto{width:auto}.w-full{width:100%}.w-screen{width:100vw}.max-w-1{max-width:calc(var(--spacing)*1)}.max-w-1\\/4{max-width:25%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-3xl{max-width:var(--container-3xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-full{max-width:100%}.max-w-md{max-width:var(--container-md)}.max-w-sm{max-width:var(--container-sm)}.max-w-xl{max-width:var(--container-xl)}.flex-1{flex:1}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-6{--tw-translate-x:calc(var(--spacing)*6);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-95{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-zoom-in{cursor:zoom-in}.cursor-zoom-out{cursor:zoom-out}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-row{flex-direction:row}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.gap-1{gap:calc(var(--spacing)*1)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-8>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*8)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-l-xl{border-top-left-radius:var(--radius-xl);border-bottom-left-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-blue-700{border-color:var(--color-blue-700)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-indigo-500{border-color:var(--color-indigo-500)}.border-indigo-600{border-color:var(--color-indigo-600)}.border-red-500{border-color:var(--color-red-500)}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.border-white\\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-black\\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\\/60{background-color:#0009}@supports (color:color-mix(in lab,red,red)){.bg-black\\/60{background-color:color-mix(in oklab,var(--color-black)60%,transparent)}}.bg-black\\/90{background-color:#000000e6}@supports (color:color-mix(in lab,red,red)){.bg-black\\/90{background-color:color-mix(in oklab,var(--color-black)90%,transparent)}}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-50{background-color:var(--color-indigo-50)}.bg-indigo-100{background-color:var(--color-indigo-100)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-white{background-color:var(--color-white)}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-yellow-600{background-color:var(--color-yellow-600)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-indigo-600{--tw-gradient-from:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-700{--tw-gradient-from:var(--color-indigo-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-700{--tw-gradient-to:var(--color-purple-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.object-cover{object-fit:cover}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-10{padding:calc(var(--spacing)*10)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-10{padding-block:calc(var(--spacing)*10)}.py-16{padding-block:calc(var(--spacing)*16)}.py-24{padding-block:calc(var(--spacing)*24)}.pr-32{padding-right:calc(var(--spacing)*32)}.pl-6{padding-left:calc(var(--spacing)*6)}.text-center{text-align:center}.text-left{text-align:left}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-extrabold{--tw-font-weight:var(--font-weight-extrabold);font-weight:var(--font-weight-extrabold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.text-blue-600{color:var(--color-blue-600)}.text-gray-200{color:var(--color-gray-200)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-indigo-600{color:var(--color-indigo-600)}.text-indigo-700{color:var(--color-indigo-700)}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-white{color:var(--color-white)}.text-yellow-700{color:var(--color-yellow-700)}.underline{text-decoration-line:underline}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-indigo-400{--tw-ring-color:var(--color-indigo-400)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-\\[1500ms\\]{--tw-duration:1.5s;transition-duration:1.5s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.group-hover\\:text-inherit:is(:where(.group):hover *){color:inherit}.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-300:hover{background-color:var(--color-gray-300)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:bg-indigo-100:hover{background-color:var(--color-indigo-100)}.hover\\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\\:bg-red-100:hover{background-color:var(--color-red-100)}.hover\\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\\:bg-yellow-600:hover{background-color:var(--color-yellow-600)}.hover\\:bg-yellow-700:hover{background-color:var(--color-yellow-700)}.hover\\:text-indigo-500:hover{color:var(--color-indigo-500)}.hover\\:text-indigo-600:hover{color:var(--color-indigo-600)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\:border-indigo-500:focus{border-color:var(--color-indigo-500)}.focus\\:ring-indigo-500:focus{--tw-ring-color:var(--color-indigo-500)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-60:disabled{opacity:.6}@media (min-width:40rem){.sm\\:mb-0{margin-bottom:calc(var(--spacing)*0)}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-auto{width:auto}.sm\\:flex-row{flex-direction:row}.sm\\:flex-nowrap{flex-wrap:nowrap}.sm\\:justify-end{justify-content:flex-end}.sm\\:gap-3{gap:calc(var(--spacing)*3)}.sm\\:gap-4{gap:calc(var(--spacing)*4)}.sm\\:px-8{padding-inline:calc(var(--spacing)*8)}.sm\\:text-left{text-align:left}}@media (min-width:48rem){.md\\:block{display:block}.md\\:hidden{display:none}.md\\:w-64{width:calc(var(--spacing)*64)}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:p-0{padding:calc(var(--spacing)*0)}.md\\:p-8{padding:calc(var(--spacing)*8)}.md\\:text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.md\\:text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}}@media (min-width:64rem){.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (prefers-color-scheme:dark){.dark\\:border-gray-600{border-color:var(--color-gray-600)}.dark\\:border-gray-700{border-color:var(--color-gray-700)}.dark\\:bg-gray-800{background-color:var(--color-gray-800)}.dark\\:bg-gray-900{background-color:var(--color-gray-900)}.dark\\:text-gray-200{color:var(--color-gray-200)}.dark\\:text-gray-400{color:var(--color-gray-400)}.dark\\:text-white{color:var(--color-white)}@media (hover:hover){.dark\\:hover\\:bg-gray-700:hover{background-color:var(--color-gray-700)}.dark\\:hover\\:bg-red-900:hover{background-color:var(--color-red-900)}}}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}')),document.head.appendChild(t)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
var bo=_e=>{throw TypeError(_e)};var Ge=(_e,Re,St)=>Re.has(_e)?bo("Cannot add the same private member more than once"):Re instanceof WeakSet?Re.add(_e):Re.set(_e,St);/*! Talkizi Widget v6.3.5 – 2025-08-02T03:54:53.574Z */(function(){"use strict";var tn,nn,rn,sn;function _e(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}const Re=!1,St=(n,e)=>n===e,Gr=Symbol("solid-track"),We={equals:St};let on=un;const ge=1,Ke=2,an={owned:null,cleanups:null,context:null,owner:null};var A=null;let kt=null,Wr=null,$=null,G=null,le=null,Je=0;function Ye(n,e){const t=$,r=A,i=n.length===0,s=e===void 0?r:e,o=i?an:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?n:()=>n(()=>oe(()=>Ie(o)));A=o,$=null;try{return De(a,!0)}finally{$=t,A=r}}function L(n,e){e=e?Object.assign({},We,e):We;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},r=i=>(typeof i=="function"&&(i=i(t.value)),ln(t,i));return[cn.bind(t),r]}function te(n,e,t){const r=xt(n,e,!1,ge);Le(r)}function Qe(n,e,t){on=ei;const r=xt(n,e,!1,ge);r.user=!0,le?le.push(r):Le(r)}function ve(n,e,t){t=t?Object.assign({},We,t):We;const r=xt(n,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,Le(r),cn.bind(r)}function oe(n){if($===null)return n();const e=$;$=null;try{return n()}finally{$=e}}function Kr(n){Qe(()=>oe(n))}function Tt(n){return A===null||(A.cleanups===null?A.cleanups=[n]:A.cleanups.push(n)),n}function Jr(n,e){const t=Symbol("context");return{id:t,Provider:ni(t),defaultValue:n}}function Yr(n){let e;return A&&A.context&&(e=A.context[n.id])!==void 0?e:n.defaultValue}function Qr(n){const e=ve(n),t=ve(()=>Rt(e()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function cn(){if(this.sources&&this.state)if(this.state===ge)Le(this);else{const n=G;G=null,De(()=>Ze(this),!1),G=n}if($){const n=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(n)):($.sources=[this],$.sourceSlots=[n]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function ln(n,e,t){let r=n.value;return(!n.comparator||!n.comparator(r,e))&&(n.value=e,n.observers&&n.observers.length&&De(()=>{for(let i=0;i<n.observers.length;i+=1){const s=n.observers[i],o=kt&&kt.running;o&&kt.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?G.push(s):le.push(s),s.observers&&dn(s)),o||(s.state=ge)}if(G.length>1e6)throw G=[],new Error},!1)),e}function Le(n){if(!n.fn)return;Ie(n);const e=Je;Xr(n,n.value,e)}function Xr(n,e,t){let r;const i=A,s=$;$=A=n;try{r=n.fn(e)}catch(o){return n.pure&&(n.state=ge,n.owned&&n.owned.forEach(Ie),n.owned=null),n.updatedAt=t+1,fn(o)}finally{$=s,A=i}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?ln(n,r):n.value=r,n.updatedAt=t)}function xt(n,e,t,r=ge,i){const s={fn:n,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:A,context:A?A.context:null,pure:t};return A===null||A!==an&&(A.owned?A.owned.push(s):A.owned=[s]),s}function Xe(n){if(n.state===0)return;if(n.state===Ke)return Ze(n);if(n.suspense&&oe(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Je);)n.state&&e.push(n);for(let t=e.length-1;t>=0;t--)if(n=e[t],n.state===ge)Le(n);else if(n.state===Ke){const r=G;G=null,De(()=>Ze(n,e[0]),!1),G=r}}function De(n,e){if(G)return n();let t=!1;e||(G=[]),le?t=!0:le=[],Je++;try{const r=n();return Zr(t),r}catch(r){t||(le=null),G=null,fn(r)}}function Zr(n){if(G&&(un(G),G=null),n)return;const e=le;le=null,e.length&&De(()=>on(e),!1)}function un(n){for(let e=0;e<n.length;e++)Xe(n[e])}function ei(n){let e,t=0;for(e=0;e<n.length;e++){const r=n[e];r.user?n[t++]=r:Xe(r)}for(e=0;e<t;e++)Xe(n[e])}function Ze(n,e){n.state=0;for(let t=0;t<n.sources.length;t+=1){const r=n.sources[t];if(r.sources){const i=r.state;i===ge?r!==e&&(!r.updatedAt||r.updatedAt<Je)&&Xe(r):i===Ke&&Ze(r,e)}}}function dn(n){for(let e=0;e<n.observers.length;e+=1){const t=n.observers[e];t.state||(t.state=Ke,t.pure?G.push(t):le.push(t),t.observers&&dn(t))}}function Ie(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),r=n.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();r<i.length&&(s.sourceSlots[o]=r,i[r]=s,t.observerSlots[r]=o)}}if(n.tOwned){for(e=n.tOwned.length-1;e>=0;e--)Ie(n.tOwned[e]);delete n.tOwned}if(n.owned){for(e=n.owned.length-1;e>=0;e--)Ie(n.owned[e]);n.owned=null}if(n.cleanups){for(e=n.cleanups.length-1;e>=0;e--)n.cleanups[e]();n.cleanups=null}n.state=0}function ti(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function fn(n,e=A){throw ti(n)}function Rt(n){if(typeof n=="function"&&!n.length)return Rt(n());if(Array.isArray(n)){const e=[];for(let t=0;t<n.length;t++){const r=Rt(n[t]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return n}function ni(n,e){return function(r){let i;return te(()=>i=oe(()=>(A.context={...A.context,[n]:r.value},Qr(()=>r.children))),void 0),i}}const ri=Symbol("fallback");function hn(n){for(let e=0;e<n.length;e++)n[e]()}function ii(n,e,t={}){let r=[],i=[],s=[],o=0,a=e.length>1?[]:null;return Tt(()=>hn(s)),()=>{let c=n()||[],l=c.length,d,u;return c[Gr],oe(()=>{let g,x,m,Q,X,V,H,E,ne;if(l===0)o!==0&&(hn(s),s=[],r=[],i=[],o=0,a&&(a=[])),t.fallback&&(r=[ri],i[0]=Ye(N=>(s[0]=N,t.fallback())),o=1);else if(o===0){for(i=new Array(l),u=0;u<l;u++)r[u]=c[u],i[u]=Ye(f);o=l}else{for(m=new Array(l),Q=new Array(l),a&&(X=new Array(l)),V=0,H=Math.min(o,l);V<H&&r[V]===c[V];V++);for(H=o-1,E=l-1;H>=V&&E>=V&&r[H]===c[E];H--,E--)m[E]=i[H],Q[E]=s[H],a&&(X[E]=a[H]);for(g=new Map,x=new Array(E+1),u=E;u>=V;u--)ne=c[u],d=g.get(ne),x[u]=d===void 0?-1:d,g.set(ne,u);for(d=V;d<=H;d++)ne=r[d],u=g.get(ne),u!==void 0&&u!==-1?(m[u]=i[d],Q[u]=s[d],a&&(X[u]=a[d]),u=x[u],g.set(ne,u)):s[d]();for(u=V;u<l;u++)u in m?(i[u]=m[u],s[u]=Q[u],a&&(a[u]=X[u],a[u](u))):i[u]=Ye(f);i=i.slice(0,o=l),r=c.slice(0)}return i});function f(g){if(s[u]=g,a){const[x,m]=L(u);return a[u]=m,e(c[u],x)}return e(c[u])}}}function M(n,e){return oe(()=>n(e||{}))}const si=n=>`Stale read from <${n}>.`;function et(n){const e="fallback"in n&&{fallback:()=>n.fallback};return ve(ii(()=>n.each,n.children,e||void 0))}function $e(n){const e=n.keyed,t=ve(()=>n.when,void 0,void 0),r=e?t:ve(t,void 0,{equals:(i,s)=>!i==!s});return ve(()=>{const i=r();if(i){const s=n.children;return typeof s=="function"&&s.length>0?oe(()=>s(e?i:()=>{if(!oe(r))throw si("Show");return t()})):s}return n.fallback},void 0,void 0)}const Z=n=>ve(()=>n());function oi(n,e,t){let r=t.length,i=e.length,s=r,o=0,a=0,c=e[i-1].nextSibling,l=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const d=s<r?a?t[a-1].nextSibling:t[s-a]:c;for(;a<s;)n.insertBefore(t[a++],d)}else if(s===a)for(;o<i;)(!l||!l.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const d=e[--i].nextSibling;n.insertBefore(t[a++],e[o++].nextSibling),n.insertBefore(t[--s],d),e[i]=t[s]}else{if(!l){l=new Map;let u=a;for(;u<s;)l.set(t[u],u++)}const d=l.get(e[o]);if(d!=null)if(a<d&&d<s){let u=o,f=1,g;for(;++u<i&&u<s&&!((g=l.get(e[u]))==null||g!==d+f);)f++;if(f>d-a){const x=e[o];for(;a<d;)n.insertBefore(t[a++],x)}else n.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const pn="_$DX_DELEGATE";function mn(n,e,t,r={}){let i;return Ye(s=>{i=s,e===document?n():b(e,n(),e.firstChild?null:void 0,t)},r.owner),()=>{i(),e.textContent=""}}function R(n,e,t,r){let i;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=n,t?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},o=e?()=>oe(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return o.cloneNode=o,o}function Ee(n,e=window.document){const t=e[pn]||(e[pn]=new Set);for(let r=0,i=n.length;r<i;r++){const s=n[r];t.has(s)||(t.add(s),e.addEventListener(s,ci))}}function ai(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function ue(n,e){e==null?n.removeAttribute("class"):n.className=e}function ie(n,e,t,r){Array.isArray(t)?(n[`$$${e}`]=t[0],n[`$$${e}Data`]=t[1]):n[`$$${e}`]=t}function Me(n,e,t){return oe(()=>n(e,t))}function b(n,e,t,r){if(t!==void 0&&!r&&(r=[]),typeof e!="function")return tt(n,e,r,t);te(i=>tt(n,e(),i,t),r)}function ci(n){let e=n.target;const t=`$$${n.type}`,r=n.target,i=n.currentTarget,s=c=>Object.defineProperty(n,"target",{configurable:!0,value:c}),o=()=>{const c=e[t];if(c&&!e.disabled){const l=e[`${t}Data`];if(l!==void 0?c.call(e,l,n):c.call(e,n),n.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(n.target)&&s(e.host),!0},a=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),n.composedPath){const c=n.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(e=c[l],!!o());l++){if(e._$host){e=e._$host,a();break}if(e.parentNode===i)break}}else a();s(r)}function tt(n,e,t,r,i){for(;typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=r!==void 0;if(n=o&&t[0]&&t[0].parentNode||n,s==="string"||s==="number"){if(s==="number"&&(e=e.toString(),e===t))return t;if(o){let a=t[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),t=Pe(n,t,r,a)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||s==="boolean")t=Pe(n,t,r);else{if(s==="function")return te(()=>{let a=e();for(;typeof a=="function";)a=a();t=tt(n,a,t,r)}),()=>t;if(Array.isArray(e)){const a=[],c=t&&Array.isArray(t);if(Et(a,e,t,i))return te(()=>t=tt(n,a,t,r,!0)),()=>t;if(a.length===0){if(t=Pe(n,t,r),o)return t}else c?t.length===0?gn(n,a,r):oi(n,t,a):(t&&Pe(n),gn(n,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=Pe(n,t,r,e);Pe(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function Et(n,e,t,r){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],c=t&&t[n.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)n.push(a);else if(Array.isArray(a))i=Et(n,a,c)||i;else if(l==="function")if(r){for(;typeof a=="function";)a=a();i=Et(n,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else n.push(a),i=!0;else{const d=String(a);c&&c.nodeType===3&&c.data===d?n.push(c):n.push(document.createTextNode(d))}}return i}function gn(n,e,t=null){for(let r=0,i=e.length;r<i;r++)n.insertBefore(e[r],t)}function Pe(n,e,t,r){if(t===void 0)return n.textContent="";const i=r||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const c=a.parentNode===n;!s&&!o?c?n.replaceChild(i,a):n.insertBefore(i,t):c&&a.remove()}else s=!0}}else n.insertBefore(i,t);return[i]}var li=R('<button><div class="flex flex-col"><span class="text-sm font-semibold"></span><span class="text-xs text-gray-500 dark:text-gray-400 group-hover:text-inherit"></span></div><div class="flex items-center gap-1 text-xs"><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"></path></svg><span>');function ui(n){return(()=>{var e=li(),t=e.firstChild,r=t.firstChild,i=r.nextSibling,s=t.nextSibling,o=s.firstChild,a=o.nextSibling;return ie(e,"click",n.onJoin),b(r,()=>n.room.name),b(i,()=>n.room.description),b(a,()=>n.count),te(()=>ue(e,`${n.fullScreen?"w-[10rem] h-[10rem]":"w-full"} text-left p-4 rounded-xl border transition-shadow shadow-sm flex items-center justify-between group ${n.joinedRoomId===n.room._id?"bg-blue-600 text-white border-blue-700 shadow-md":"bg-white dark:bg-gray-800 text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-200 dark:border-gray-600"}`)),e})()}Ee(["click"]);const yn=Jr();function di(n){const e=["fr","en"],t=localStorage.getItem("lang"),r=()=>{const a=navigator.language.slice(0,2);return e.includes(a)?a:"en"},[i,s]=L(t||r()),o=a=>{s(a),localStorage.setItem("lang",a)};return M(yn.Provider,{value:{lang:i,setLang:o},get children(){return n.children}})}function _n(){const n=Yr(yn);if(!n)throw new Error("useLang must be used within a LangProvider");return n}const vn={fr:{heroTitle:"Ajoutez un salon vocal interactif en un script.",heroSubtitle:"Talkizi transforme instantanément votre site en espace vocal vivant, sans effort.",cta:"Essayez Talkizi gratuitement",why:"Pourquoi Talkizi ?",whyPoints:[{title:"Ultra-léger",desc:"Seulement 10kb, rapide et sans impact.",icon:"⚡️"},{title:"Installation instantanée",desc:"Copiez, collez, parlez.",icon:"🚀"},{title:"Personnalisable",desc:"Adaptez-le à votre marque.",icon:"🎨"},{title:"Boostez l’engagement",desc:"Créez des communautés actives.",icon:"💬"}],love:"Ce qu'ils vont adorer",snippetTitle:"Ajoutez Talkizi en 1 ligne",pricingTitle:"Tarifs",plans:[{title:"Gratuit",price:"0 € /mois",desc:"1 salon vocal, audio uniquement, jusqu’à 4 participants."},{title:"Starter",price:"5 € /mois",desc:"1 salon vocal, audio + vidéo + écran, jusqu’à 10 participants."},{title:"Pro",price:"19 € /mois HT",desc:"3 salons, audio + vidéo + écran, jusqu’à 10 participants, statistiques simples."},{title:"Business",price:"49 € /mois HT",desc:"10 salons privés, accès par token, 20 participants, stats avancées, webhooks, personnalisation."},{title:"Entreprise",price:"Sur devis",desc:"Salons illimités, intégration avancée, hébergement dédié, support prioritaire."}],faqTitle:"FAQ",faq:[{q:"Talkizi impacte-t-il les performances ?",a:"Non, il est ultra-léger et optimisé pour un chargement rapide."},{q:"Puis-je personnaliser le widget ?",a:"Oui, la personnalisation est disponible dès le plan Pro."},{q:"Ai-je besoin d’un compte ?",a:"Non, vous pouvez l’intégrer et l’essayer immédiatement, sans création de compte."}],finalCta:"Prêt à parler ? Essayez gratuitement !",legal:{title:"Mentions légales",editor:"Éditeur du site",editorDetails:"Le site Talkizi est édité par :",talkiziInfo:"Talkizi",siret:"SIRET : 83747616700031",email:"Email : contact@talkizi.com",hosting:"Hébergement",hostDetails:"Le site est hébergé par :",hetznerAddress:"Industriestr. 25 91710 Gunzenhausen, Germany",ovhAddress:"2 rue Kellermann – 59100 Roubaix – France",ip:"Propriété intellectuelle",ipText:"Tous les éléments du site Talkizi, y compris les textes, images, graphismes, logo, icônes, sons, logiciels, sont protégés par les lois en vigueur sur la propriété intellectuelle...",liability:"Responsabilité",liabilityText:"Talkizi s’efforce de fournir sur le site des informations aussi précises que possible...",contact:"Contact",contactText:"Pour toute question ou signalement, vous pouvez nous contacter à :"},terms:{title:"Conditions Générales d'Utilisation",sections:[{title:"1. Objet",content:"Les présentes Conditions Générales d'Utilisation (CGU) ont pour objet de définir les modalités et conditions dans lesquelles Talkizi met à disposition son service de salons vocaux et vidéo via un widget embarqué sur des sites tiers."},{title:"2. Acceptation",content:"En intégrant ou en utilisant le widget Talkizi, vous acceptez sans réserve les présentes CGU. Celles-ci peuvent être modifiées à tout moment par Talkizi ; il vous appartient de les consulter régulièrement."},{title:"3. Description du service",content:"Talkizi permet d’ajouter un salon vocal ou vidéo à un site web via un simple script. Les utilisateurs peuvent rejoindre un salon, échanger en temps réel par la voix, la vidéo ou le partage d’écran selon le plan choisi.",important:"Important : les flux audio, vidéo et écran transitent exclusivement en peer-to-peer via WebRTC et ne passent pas par les serveurs de Talkizi. Aucun enregistrement ni traitement des flux n’est effectué."},{title:"4. Engagements de l'utilisateur",content:"L'utilisateur s’engage à ne pas utiliser le service à des fins illicites, diffamatoires, ou portant atteinte aux droits d’autrui. Il est seul responsable des contenus échangés."},{title:"5. Responsabilité",content:"Talkizi fournit un service technique d’intermédiation de communication, sans surveillance ni contrôle du contenu échangé. Talkizi décline toute responsabilité en cas de litige entre utilisateurs ou en cas d’usage frauduleux."},{title:"6. Propriété",content:"Le code du widget, les interfaces et l’infrastructure sont la propriété exclusive de Talkizi. Toute reproduction, modification ou réutilisation sans autorisation est interdite."},{title:"7. Données personnelles",content:"Talkizi ne collecte aucune donnée personnelle via les salons vocaux/vidéo. Seules des données techniques nécessaires au fonctionnement du service (comme l’adresse IP pour établir une connexion WebRTC) sont temporairement utilisées sans stockage persistant."},{title:"8. Droit applicable",content:"Les présentes CGU sont soumises au droit français. Tout litige relatif à leur interprétation ou exécution sera de la compétence exclusive des tribunaux français."},{title:"9. Contact",content:"Pour toute question relative aux CGU, vous pouvez contacter :",email:"contact@talkizi.com"}]},privacy:{title:"Politique de confidentialité",sections:[{title:"1. Introduction",content:"Talkizi s'engage à protéger votre vie privée. Cette politique de confidentialité décrit la manière dont nous collectons, utilisons et protégeons vos informations personnelles lorsque vous utilisez notre site et notre widget vocal."},{title:"2. Données collectées",content:"Nous collectons uniquement les données strictement nécessaires au bon fonctionnement du service. Aucune donnée personnelle n’est requise pour accéder ou utiliser le widget Talkizi."},{title:"3. Utilisation des données",content:"Les éventuelles données collectées (logs techniques, adresse IP, préférences de langue) sont utilisées exclusivement pour :",list:["Assurer la sécurité et la stabilité du service","Améliorer l’expérience utilisateur","Analyser l’utilisation du site de façon anonyme"]},{title:"4. Partage des données",content:"Aucune donnée n’est vendue ou partagée à des tiers à des fins commerciales. Les données peuvent être transmises uniquement en cas d’obligation légale ou judiciaire."},{title:"5. Cookies",content:"Le site Talkizi utilise uniquement des cookies fonctionnels nécessaires au bon fonctionnement du service. Aucun cookie publicitaire ou de tracking tiers n’est utilisé."},{title:"6. Flux vocaux et vidéo",content:"Tous les flux vocaux et vidéo utilisés par Talkizi sont chiffrés et transmis en peer-to-peer via WebRTC. Ils ne transitent à aucun moment par les serveurs de Talkizi, garantissant une confidentialité maximale des échanges."},{title:"7. Vos droits",content:"Conformément au RGPD, vous disposez d’un droit d’accès, de rectification, de suppression et de portabilité de vos données. Pour toute demande, contactez-nous à :",email:"contact@talkizi.com"},{title:"8. Contact",content:"Pour toute question concernant cette politique de confidentialité, vous pouvez nous contacter à l'adresse suivante :",email:"contact@talkizi.com"}]},footer:{rights:"Tous droits réservés.",legal:"Mentions légales",terms:"Conditions",privacy:"Confidentialité"},header:{join:"Rejoindre",dashboard:"Mon espace"},config:{apiKey:"Clé API",show:"Afficher",hide:"Masquer",copy:"Copier",copied:"Copié !",rooms:"Rooms",roomName:"Nom de la room",description:"Description",addRoom:"+ Ajouter une room",remove:"Supprimer",urlsAllowed:"URLs autorisées",urlInvalid:"URL invalide",addUrl:"+ Ajouter une URL",plan:"Plan",free:"Gratuit",pro:"Pro",enterprise:"Entreprise",saveConfig:"💾 Sauvegarder",savedSuccess:"Configuration sauvegardée avec succès !",savedError:"Erreur lors de la sauvegarde",saveDisabledNoChange:"Aucune modification à sauvegarder",invalidUrls:"Une ou plusieurs URLs sont invalides",roomTrad:{options:{video:"Vidéo",screenShare:"Partage d'écran"}}},login:{subtitle:"Connexion sécurisée pour accéder à Talkizi.",google:"Se connecter avec Google",redirecting:"Redirection...",footer:"© 2025 Talkizi. Tous droits réservés."},docs:{title:"Documentation du widget Talkizi",intro:"Intégrez Talkizi en quelques secondes dans votre site HTML, React, Vue ou SolidJS.",advancedTitle:"Options avancées",advancedText:"Vous pouvez personnaliser le comportement du widget avec des attributs HTML.",keyDesc:"Clé publique de votre projet (obtenue sur le dashboard Talkizi).",positionDesc:"Position du widget sur la page (ex: bottom-right, bottom-left).",colorDesc:"Couleur principale du widget (ex: #6C63FF).",apiTitle:"API JavaScript",apiIntro:"Le widget expose une API JS globale pour interagir avec lui :",faqTitle:"FAQ",faq:[{q:"Est-ce que le widget fonctionne sur mobile ?",a:"Oui, il est responsive et optimisé mobile."},{q:"Puis-je changer la langue du widget ?",a:"Oui, via une option dans le dashboard ou `setOptions()`."}],supportTitle:"Besoin d'aide ?",supportText:"Notre équipe vous répond dans les 24h ouvrées."},errors:{cardMissing:"Carte non trouvée ou pas accessible.",NO_PLAN_SPECIFIED:"Aucun plan spécifié.",UNKNOWN_PLAN:"Plan inconnu.",TOO_MANY_ROOMS:"Nombre de salons dépassé pour ce plan.",VIDEO_NOT_ALLOWED:"La vidéo n’est pas autorisée dans ce plan.",SCREENSHARE_NOT_ALLOWED:"Le partage d’écran n’est pas autorisé dans ce plan.",WEBHOOKS_NOT_ALLOWED:"Les webhooks ne sont pas disponibles dans ce plan.",PRIVATE_ACCESS_NOT_ALLOWED:"L’accès privé par token n’est pas autorisé dans ce plan.",CUSTOM_BRANDING_NOT_ALLOWED:"La personnalisation visuelle n’est pas disponible dans ce plan.",DEDICATED_HOSTING_NOT_ALLOWED:"L’hébergement dédié n’est pas inclus dans ce plan.",PRIORITY_SUPPORT_NOT_ALLOWED:"Le support prioritaire n’est pas inclus dans ce plan.",STATS_NOT_ALLOWED:"Ce plan ne permet pas l’option de statistiques sélectionnée."},planChange:{title:"💳 Vous avez changé de plan.",newPlan:"Nouveau plan",price:"Prix",chargeNotice:"💰 Le renouvellement sera facturé à l’issue de votre abonnement en cours.",priceExclVAT:"{{price}} /mois HT",priceInclVAT:"{{price}} /mois",priceOnRequest:"Sur devis"},payment:{title:"Paiement",cardAlreadyAdded:"Une carte est déjà enregistrée.",cardLabel:"Carte",expirationLabel:"Expiration",statusLabel:"Statut",addedOnLabel:"Ajoutée le",updateCardButton:"Mettre à jour ma carte",explanation1:"Pour activer ton compte (même pour la version gratuite), tu dois ajouter une carte bancaire. Aucune somme ne sera débitée pour l'offre gratuite. Cela permet uniquement de vérifier ton identité et d'éviter les abus.",explanation2:"L'ajout de ta carte prend moins d'une minute via notre partenaire sécurisé Stripe. Tu pourras ensuite gérer tes abonnements ou passer à une offre payante quand tu le souhaites.",addCardButton:"Ajouter ma carte maintenant",errorCreatingSession:"Une erreur est survenue, merci de réessayer."},dashboard:{loading:"Chargement en cours...",menu:"Menu",closeMenu:"Fermer le menu",sidebarTitle:"Mon espace",config:"Config",documentation:"Documentation",payment:"Paiement",account:"Mon compte",nameLabel:"Nom",emailLabel:"Email",idLabel:"ID",logout:"Se déconnecter"},modal:{openButton:"Salons vocaux",title:"Salons",currentRoom:"Salon actuel :",noRoom:"Aucun",selectRoom:"Sélectionne un salon.",connected:"Connecté ✅",notConnected:"Non connecté",leave:"Quitter",join:"Rejoindre vocal",defaultRoom:"Salon"},roomActions:{micOn:"Micro on",micOff:"Micro off",camOn:"Caméra on",camOff:"Caméra off",screenOn:"Écran on",screenOff:"Écran off",leave:"Quitter"}},en:{heroTitle:"Add an interactive voice room with one script.",heroSubtitle:"Talkizi instantly turns your site into a vibrant voice space — effortlessly.",cta:"Try Talkizi for free",why:"Why Talkizi?",whyPoints:[{title:"Ultra-lightweight",desc:"Only 10kb, fast and seamless.",icon:"⚡️"},{title:"Instant setup",desc:"Copy, paste, talk.",icon:"🚀"},{title:"Customizable",desc:"Match your brand.",icon:"🎨"},{title:"Boost engagement",desc:"Build active communities.",icon:"💬"}],love:"What they’ll love",snippetTitle:"Add Talkizi in 1 line",pricingTitle:"Pricing",plans:[{title:"Free",price:"€0 /month",desc:"1 voice room, audio only, up to 4 participants."},{title:"Starter",price:"€5 /month",desc:"1 room, audio + video + screen, up to 10 participants."},{title:"Pro",price:"€19 /month excl. VAT",desc:"3 rooms, audio + video + screen, up to 10 participants, basic stats."},{title:"Business",price:"€49 /month excl. VAT",desc:"10 private rooms, token access, 20 participants, advanced stats, webhooks, branding."},{title:"Enterprise",price:"Custom pricing",desc:"Unlimited rooms, advanced integration, dedicated hosting, priority support."}],faqTitle:"FAQ",faq:[{q:"Does Talkizi impact performance?",a:"No, it’s ultra-light and optimized for fast loading."},{q:"Can I customize the widget?",a:"Yes, customization is available starting from the Pro plan."},{q:"Do I need an account?",a:"No, you can integrate and try it instantly without creating an account."}],finalCta:"Ready to talk? Try it free!",legal:{title:"Legal notice",editor:"Site publisher",editorDetails:"The Talkizi website is published by:",talkiziInfo:"Talkizi",siret:"SIRET: 83747616700031",email:"Email: contact@talkizi.com",hosting:"Hosting",hostDetails:"The website is hosted by:",hetznerAddress:"Industriestr. 25 91710 Gunzenhausen, Germany",ovhAddress:"2 rue Kellermann – 59100 Roubaix – France",ip:"Intellectual property",ipText:"All elements of the Talkizi website, including texts, images, graphics, logos, icons, sounds, and software, are protected by applicable intellectual property laws...",liability:"Liability",liabilityText:"Talkizi strives to provide the most accurate information possible on its website...",contact:"Contact",contactText:"For any questions or reports, you can contact us at:"},terms:{title:"Terms of Use",sections:[{title:"1. Purpose",content:"These Terms of Use define the terms and conditions under which Talkizi provides its voice and video room service via an embedded widget on third-party websites."},{title:"2. Acceptance",content:"By embedding or using the Talkizi widget, you unreservedly accept these Terms of Use. They may be changed at any time by Talkizi; it is your responsibility to consult them regularly."},{title:"3. Service Description",content:"Talkizi allows you to add a voice or video room to a website using a simple script. Users can join a room and communicate in real time via voice, video, or screen sharing depending on the plan.",important:"Important: Audio, video, and screen streams are transmitted exclusively peer-to-peer via WebRTC and never pass through Talkizi’s servers. No recording or processing is done."},{title:"4. User Obligations",content:"The user agrees not to use the service for illegal, defamatory purposes or in violation of others' rights. They are solely responsible for the content exchanged."},{title:"5. Liability",content:"Talkizi provides a technical communication service with no monitoring or control over the content exchanged. Talkizi accepts no responsibility in the event of disputes or fraudulent use."},{title:"6. Ownership",content:"The widget code, interfaces, and infrastructure are the exclusive property of Talkizi. Any reproduction, modification, or reuse without permission is prohibited."},{title:"7. Personal Data",content:"Talkizi does not collect any personal data via its voice/video rooms. Only technical data necessary for the service (e.g. IP addresses to establish WebRTC connections) is temporarily used without persistent storage."},{title:"8. Governing Law",content:"These Terms are governed by French law. Any disputes relating to their interpretation or execution fall under the exclusive jurisdiction of French courts."},{title:"9. Contact",content:"For any questions related to these Terms of Use, contact:",email:"contact@talkizi.com"}]},privacy:{title:"Privacy Policy",sections:[{title:"1. Introduction",content:"Talkizi is committed to protecting your privacy. This privacy policy describes how we collect, use, and protect your personal information when using our website and voice widget."},{title:"2. Data Collected",content:"We only collect data strictly necessary for the proper operation of the service. No personal data is required to access or use the Talkizi widget."},{title:"3. Use of Data",content:"Collected data (technical logs, IP address, language preferences) is used exclusively for:",list:["Ensuring service security and stability","Improving user experience","Analyzing site usage anonymously"]},{title:"4. Data Sharing",content:"No data is sold or shared with third parties for commercial purposes. Data may only be transmitted when legally or judicially required."},{title:"5. Cookies",content:"The Talkizi website only uses functional cookies necessary for proper service operation. No advertising or third-party tracking cookies are used."},{title:"6. Voice and Video Streams",content:"All voice and video streams used by Talkizi are encrypted and transmitted peer-to-peer via WebRTC. They never pass through Talkizi servers, ensuring maximum confidentiality."},{title:"7. Your Rights",content:"In accordance with GDPR, you have the right to access, rectify, delete, and transfer your data. For any request, contact us at:",email:"contact@talkizi.com"},{title:"8. Contact",content:"For any questions regarding this privacy policy, you can contact us at:",email:"contact@talkizi.com"}]},footer:{rights:"All rights reserved.",legal:"Legal notice",terms:"Terms",privacy:"Privacy"},header:{join:"Join",dashboard:"My dashboard"},config:{apiKey:"API Key",show:"Show",hide:"Hide",copy:"Copy",copied:"Copied!",rooms:"Rooms",roomName:"Room name",description:"Description",addRoom:"+ Add a room",remove:"Remove",urlsAllowed:"Allowed URLs",urlInvalid:"Invalid URL",addUrl:"+ Add a URL",plan:"Plan",free:"Free",pro:"Pro",enterprise:"Enterprise",saveConfig:"💾 Save",savedSuccess:"Configuration saved successfully!",savedError:"Failed to save configuration.",saveDisabledNoChange:"No changes to save",invalidUrls:"One or more URLs are invalid",roomTrad:{options:{video:"Video",screenShare:"Screen Share"}}},login:{subtitle:"Secure login to access Talkizi.",google:"Sign in with Google",redirecting:"Redirecting...",footer:"© 2025 Talkizi. All rights reserved."},docs:{title:"Talkizi Widget Documentation",intro:"Integrate Talkizi in seconds into your HTML, React, Vue or SolidJS website.",advancedTitle:"Advanced Options",advancedText:"You can customize the widget's behavior using HTML attributes.",keyDesc:"Your project’s public key (available in the Talkizi dashboard).",positionDesc:"Widget position on the page (e.g., bottom-right, bottom-left).",colorDesc:"Primary color of the widget (e.g., #6C63FF).",apiTitle:"JavaScript API",apiIntro:"The widget exposes a global JavaScript API you can interact with:",faqTitle:"FAQ",faq:[{q:"Does the widget work on mobile?",a:"Yes, it is fully responsive and mobile-optimized."},{q:"Can I change the widget's language?",a:"Yes, via an option in the dashboard or using `setOptions()`."}],supportTitle:"Need help?",supportText:"Our team will get back to you within 24 business hours."},errors:{cardMissing:"Card not found or invalid",NO_PLAN_SPECIFIED:"No plan specified.",UNKNOWN_PLAN:"Unknown plan.",TOO_MANY_ROOMS:"Too many rooms for this plan.",VIDEO_NOT_ALLOWED:"Video is not allowed with this plan.",SCREENSHARE_NOT_ALLOWED:"Screen sharing is not allowed with this plan.",WEBHOOKS_NOT_ALLOWED:"Webhooks are not allowed with this plan.",PRIVATE_ACCESS_NOT_ALLOWED:"Private token access is not allowed with this plan.",CUSTOM_BRANDING_NOT_ALLOWED:"Custom branding is not allowed with this plan.",DEDICATED_HOSTING_NOT_ALLOWED:"Dedicated hosting is not available with this plan.",PRIORITY_SUPPORT_NOT_ALLOWED:"Priority support is not included in this plan.",STATS_NOT_ALLOWED:"This plan does not allow the selected statistics option."},planChange:{title:"💳 You changed your plan.",newPlan:"New plan",price:"Price",chargeNotice:"💰 You won’t be charged until your current subscription ends.",priceExclVAT:"{{price}} /month (excluding VAT)",priceInclVAT:"{{price}} /month",priceOnRequest:"On request"},payment:{title:"Payment",cardAlreadyAdded:"A card is already on file.",cardLabel:"Card",expirationLabel:"Expiration",statusLabel:"Status",addedOnLabel:"Added on",updateCardButton:"Update my card",explanation1:"To activate your account (even for the free plan), you must add a credit card. No charges will be made for the free offer. This is solely to verify your identity and prevent abuse.",explanation2:"Adding your card takes less than a minute via our secure partner Stripe. You'll then be able to manage your subscriptions or upgrade at any time.",addCardButton:"Add my card now",errorCreatingSession:"An error occurred, please try again."},dashboard:{loading:"Loading...",menu:"Menu",closeMenu:"Close menu",sidebarTitle:"My dashboard",config:"Settings",documentation:"Documentation",payment:"Payment",account:"My account",nameLabel:"Name",emailLabel:"Email",idLabel:"ID",logout:"Log out"},modal:{openButton:"Voice rooms",title:"Rooms",currentRoom:"Current room:",noRoom:"None",selectRoom:"Select a room.",connected:"Connected ✅",notConnected:"Not connected",leave:"Leave",join:"Join voice",defaultRoom:"Room"},roomActions:{micOn:"Mic on",micOff:"Mic off",camOn:"Camera on",camOff:"Camera off",screenOn:"Screen on",screenOff:"Screen off",leave:"Leave"}}};var fi=R('<button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor></svg><span>'),bn=R("<button><span>"),hi=R('<button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 16l4-4m0 0l-4-4m4 4H7"></path></svg><span>'),pi=R('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5v14l12-7L9 5z"></svg>',!1,!0,!1),mi=R('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 5l14 14M15 10v4m0 0H9m6 0V6m0 0h6"></svg>',!1,!0,!1),gi=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 0 1-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 0 0-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409">'),yi=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z">'),_i=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M3 3v18h18V3H3zm9 4v10M7 12h10">'),vi=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M3 3v18h18V3H3z">');function bi(n){const{lang:e}=_n(),t=()=>vn[e()];return[(()=>{var r=fi(),i=r.firstChild,s=i.nextSibling;return ie(r,"click",n.onToggleMute),b(i,(()=>{var o=Z(()=>!!n.isMuted);return()=>o()?pi():mi()})()),b(s,(()=>{var o=Z(()=>!!n.isMuted);return()=>o()?t().roomActions.micOff:t().roomActions.micOn})()),te(()=>ue(r,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})(),(()=>{var r=bn(),i=r.firstChild;return ie(r,"click",n.onToggleVideoEnabled),b(r,(()=>{var s=Z(()=>!!n.isVideoEnabled);return()=>s()?gi():yi()})(),i),b(i,(()=>{var s=Z(()=>!!n.isVideoEnabled);return()=>s()?t().roomActions.camOff:t().roomActions.camOn})()),te(()=>ue(r,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})(),(()=>{var r=bn(),i=r.firstChild;return ie(r,"click",n.onToggleScreenShare),b(r,(()=>{var s=Z(()=>!!n.isScreenSharing);return()=>s()?_i():vi()})(),i),b(i,(()=>{var s=Z(()=>!!n.isScreenSharing);return()=>s()?t().roomActions.screenOff:t().roomActions.screenOn})()),te(()=>ue(r,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})(),(()=>{var r=hi(),i=r.firstChild,s=i.nextSibling;return ie(r,"click",n.onLeave),b(s,()=>t().roomActions.leave),te(()=>ue(r,`inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})()]}Ee(["click"]);const ae=Object.create(null);ae.open="0",ae.close="1",ae.ping="2",ae.pong="3",ae.message="4",ae.upgrade="5",ae.noop="6";const nt=Object.create(null);Object.keys(ae).forEach(n=>{nt[ae[n]]=n});const Pt={type:"error",data:"parser error"},Cn=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Sn=typeof ArrayBuffer=="function",kn=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,wt=({type:n,data:e},t,r)=>Cn&&e instanceof Blob?t?r(e):Tn(e,r):Sn&&(e instanceof ArrayBuffer||kn(e))?t?r(e):Tn(new Blob([e]),r):r(ae[n]+(e||"")),Tn=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function xn(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let At;function Ci(n,e){if(Cn&&n.data instanceof Blob)return n.data.arrayBuffer().then(xn).then(e);if(Sn&&(n.data instanceof ArrayBuffer||kn(n.data)))return e(xn(n.data));wt(n,!1,t=>{At||(At=new TextEncoder),e(At.encode(t))})}const Rn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Be=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Rn.length;n++)Be[Rn.charCodeAt(n)]=n;const Si=n=>{let e=n.length*.75,t=n.length,r,i=0,s,o,a,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),d=new Uint8Array(l);for(r=0;r<t;r+=4)s=Be[n.charCodeAt(r)],o=Be[n.charCodeAt(r+1)],a=Be[n.charCodeAt(r+2)],c=Be[n.charCodeAt(r+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|a>>2,d[i++]=(a&3)<<6|c&63;return l},ki=typeof ArrayBuffer=="function",Ot=(n,e)=>{if(typeof n!="string")return{type:"message",data:En(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Ti(n.substring(1),e)}:nt[t]?n.length>1?{type:nt[t],data:n.substring(1)}:{type:nt[t]}:Pt},Ti=(n,e)=>{if(ki){const t=Si(n);return En(t,e)}else return{base64:!0,data:n}},En=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Pn="",xi=(n,e)=>{const t=n.length,r=new Array(t);let i=0;n.forEach((s,o)=>{wt(s,!1,a=>{r[o]=a,++i===t&&e(r.join(Pn))})})},Ri=(n,e)=>{const t=n.split(Pn),r=[];for(let i=0;i<t.length;i++){const s=Ot(t[i],e);if(r.push(s),s.type==="error")break}return r};function Ei(){return new TransformStream({transform(n,e){Ci(n,t=>{const r=t.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Lt;function rt(n){return n.reduce((e,t)=>e+t.length,0)}function it(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)t[i]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function Pi(n,e){Lt||(Lt=new TextDecoder);const t=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(r===0){if(rt(t)<1)break;const c=it(t,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(rt(t)<2)break;const c=it(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(rt(t)<8)break;const c=it(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),d=l.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(Pt);break}i=d*Math.pow(2,32)+l.getUint32(4),r=3}else{if(rt(t)<i)break;const c=it(t,i);a.enqueue(Ot(s?c:Lt.decode(c),e)),r=0}if(i===0||i>n){a.enqueue(Pt);break}}}})}const wn=4;function B(n){if(n)return wi(n)}function wi(n){for(var e in B.prototype)n[e]=B.prototype[e];return n}B.prototype.on=B.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this},B.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this},B.prototype.off=B.prototype.removeListener=B.prototype.removeAllListeners=B.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,i=0;i<t.length;i++)if(r=t[i],r===e||r.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this},B.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,i=t.length;r<i;++r)t[r].apply(this,e)}return this},B.prototype.emitReserved=B.prototype.emit,B.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},B.prototype.hasListeners=function(n){return!!this.listeners(n).length};const st=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),re=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ai="arraybuffer";function ko(){}function An(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const Oi=re.setTimeout,Li=re.clearTimeout;function ot(n,e){e.useNativeTimers?(n.setTimeoutFn=Oi.bind(re),n.clearTimeoutFn=Li.bind(re)):(n.setTimeoutFn=re.setTimeout.bind(re),n.clearTimeoutFn=re.clearTimeout.bind(re))}const Di=1.33;function Ii(n){return typeof n=="string"?$i(n):Math.ceil((n.byteLength||n.size)*Di)}function $i(n){let e=0,t=0;for(let r=0,i=n.length;r<i;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function On(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Mi(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Bi(n){let e={},t=n.split("&");for(let r=0,i=t.length;r<i;r++){let s=t[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Ni extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Dt extends B{constructor(e){super(),this.writable=!1,ot(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new Ni(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Ot(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Mi(e);return t.length?"?"+t:""}}class zi extends Dt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ri(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,xi(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=On()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Ln=!1;try{Ln=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ji=Ln;function Ui(){}class Fi extends zi{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class ce extends B{constructor(e,t,r){super(),this.createRequest=e,ot(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=An(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ce.requestsCount++,ce.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ui,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ce.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(ce.requestsCount=0,ce.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Dn);else if(typeof addEventListener=="function"){const n="onpagehide"in re?"pagehide":"unload";addEventListener(n,Dn,!1)}}function Dn(){for(let n in ce.requests)ce.requests.hasOwnProperty(n)&&ce.requests[n].abort()}const Vi=function(){const n=In({xdomain:!1});return n&&n.responseType!==null}();class qi extends Fi{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Vi&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ce(In,this.uri(),e)}}function In(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||ji))return new XMLHttpRequest}catch{}if(!e)try{return new re[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $n=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Hi extends Dt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=$n?{}:An(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;wt(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&st(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=On()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const It=re.WebSocket||re.MozWebSocket;class Gi extends Hi{createSocket(e,t,r){return $n?new It(e,t,r):t?new It(e,t):new It(e)}doWrite(e,t){this.ws.send(t)}}class Wi extends Dt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Pi(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=Ei();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&st(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ki={websocket:Gi,webtransport:Wi,polling:qi},Ji=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $t(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let i=Ji.exec(n||""),s={},o=14;for(;o--;)s[Yi[o]]=i[o]||"";return t!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Qi(s,s.path),s.queryKey=Xi(s,s.query),s}function Qi(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Xi(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(t[i]=s)}),t}const Mt=typeof addEventListener=="function"&&typeof removeEventListener=="function",at=[];Mt&&addEventListener("offline",()=>{at.forEach(n=>n())},!1);class ye extends B{constructor(e,t){if(super(),this.binaryType=Ai,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=$t(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=$t(t.host).host);ot(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Bi(this.opts.query)),Mt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},at.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=wn,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ye.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ye.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(t+=Ii(i)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,st(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if(typeof t=="function"&&(i=t,t=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ye.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Mt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=at.indexOf(this._offlineEventListener);r!==-1&&at.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ye.protocol=wn;class Zi extends ye{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;ye.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",u=>{if(!r)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ye.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=t.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,d(),t.close(),t=null)}const o=u=>{const f=new Error("probe error: "+u);f.transport=t.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function c(){o("socket closed")}function l(u){t&&u.name!==t.name&&s()}const d=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let es=class extends Zi{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Ki[i]).filter(i=>!!i)),super(e,r)}};function ts(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=$t(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}const ns=typeof ArrayBuffer=="function",rs=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Mn=Object.prototype.toString,is=typeof Blob=="function"||typeof Blob<"u"&&Mn.call(Blob)==="[object BlobConstructor]",ss=typeof File=="function"||typeof File<"u"&&Mn.call(File)==="[object FileConstructor]";function Bt(n){return ns&&(n instanceof ArrayBuffer||rs(n))||is&&n instanceof Blob||ss&&n instanceof File}function ct(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(ct(n[t]))return!0;return!1}if(Bt(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return ct(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&ct(n[t]))return!0;return!1}function os(n){const e=[],t=n.data,r=n;return r.data=Nt(t,e),r.attachments=e.length,{packet:r,buffers:e}}function Nt(n,e){if(!n)return n;if(Bt(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=Nt(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=Nt(n[r],e));return t}return n}function as(n,e){return n.data=zt(n.data,e),delete n.attachments,n}function zt(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=zt(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=zt(n[t],e));return n}const cs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ls=5;var k;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(k||(k={}));class us{constructor(e){this.replacer=e}encode(e){return(e.type===k.EVENT||e.type===k.ACK)&&ct(e)?this.encodeAsBinary({type:e.type===k.EVENT?k.BINARY_EVENT:k.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===k.BINARY_EVENT||e.type===k.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=os(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function Bn(n){return Object.prototype.toString.call(n)==="[object Object]"}class jt extends B{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===k.BINARY_EVENT;r||t.type===k.BINARY_ACK?(t.type=r?k.EVENT:k.ACK,this.reconstructor=new ds(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Bt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(k[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===k.BINARY_EVENT||r.type===k.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(s,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(s,t)}else r.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const s=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(jt.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case k.CONNECT:return Bn(t);case k.DISCONNECT:return t===void 0;case k.CONNECT_ERROR:return typeof t=="string"||Bn(t);case k.EVENT:case k.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&cs.indexOf(t[0])===-1);case k.ACK:case k.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ds{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=as(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const fs=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jt,Encoder:us,get PacketType(){return k},protocol:ls},Symbol.toStringTag,{value:"Module"}));function se(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const hs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Nn extends B{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[se(e,"open",this.onopen.bind(this)),se(e,"packet",this.onpacket.bind(this)),se(e,"error",this.onerror.bind(this)),se(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,s;if(hs.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:k.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,u=t.pop();this._registerAckCallback(d,u),o.id=d}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:k.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case k.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case k.EVENT:case k.BINARY_EVENT:this.onevent(e);break;case k.ACK:case k.BINARY_ACK:this.onack(e);break;case k.DISCONNECT:this.ondisconnect();break;case k.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:k.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:k.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function we(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}we.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0},we.prototype.reset=function(){this.attempts=0},we.prototype.setMin=function(n){this.ms=n},we.prototype.setMax=function(n){this.max=n},we.prototype.setJitter=function(n){this.jitter=n};class Ut extends B{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ot(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new we({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||fs;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new es(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=se(t,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=se(t,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),t.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(se(e,"ping",this.onping.bind(this)),se(e,"data",this.ondata.bind(this)),se(e,"error",this.onerror.bind(this)),se(e,"close",this.onclose.bind(this)),se(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){st(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Nn(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ne={};function lt(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=ts(n,e.path||"/socket.io"),r=t.source,i=t.id,s=t.path,o=Ne[i]&&s in Ne[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new Ut(r,e):(Ne[i]||(Ne[i]=new Ut(r,e)),c=Ne[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(lt,{Manager:Ut,Socket:Nn,io:lt,connect:lt});function ps(n){var Fr,Vr,qr,Hr;const[e,t]=L(!1),[r,i]=L(!1),[s,o]=L(null),[a,c]=L(null),[l,d]=L(null),[u,f]=L(null),[g,x]=L(new Map),[m,Q]=L(!1),[X,V]=L(!1),[H,E]=L(new Map),[ne,N]=L(new Map),[U,ee]=L(new Map),[Te,v]=L(new Map),[P,O]=L(!1),[he,pe]=L(null),z="talkizi.com",me=((Fr=window.location.hostname)!=null&&Fr.includes("local")||(Vr=window.location.hostname)!=null&&Vr.includes("192.168"))&&!(z!=null&&z.includes("talk"))?parseInt(void 0):443,xe=((qr=window.location.hostname)!=null&&qr.includes("local")||(Hr=window.location.hostname)!=null&&Hr.includes("192.168"))&&!(z!=null&&z.includes("talk"))?parseInt(void 0):443,F=lt(`https://${z}:${me}`);function go(){var S;if(!u())return;const y=(S=u())==null?void 0:S.getAudioTracks()[0];if(!y)return;const T=!r();y.enabled=!T,i(T)}function Oe(){if(!s()||m())return;Q(!0);const y=l(),T=s(),S=n.rooms.map(p=>p._id),K=S.join(",");if(document.querySelectorAll("audio").forEach(p=>{try{p.pause(),p.srcObject=null,p.remove()}catch{}}),F.emit("leave-room",{roomId:T,clientId:(y==null?void 0:y.id)??"unknown",groupRooms:S,groupId:K}),F.emit("get-all-counts",{rooms:n.rooms.map(p=>p._id),groupRooms:n.rooms.map(p=>p._id)}),Te().forEach(p=>{try{p.close()}catch{}}),v(new Map),Ct(),y)try{y.disconnect(),y.destroy()}catch{}d(null);const C=u();C&&C.getTracks().forEach(p=>p.stop()),f(null),E(new Map),pe(null),N(new Map),V(!1),o(null),c(null),Q(!1)}async function yo(y){Oe(),c(`Connexion à ${y.name}...`);const{Peer:T}=await Promise.resolve().then(()=>mo),S=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});f(S);const K=`${y._id}-${crypto.randomUUID()}`,C=new T(K,{host:z,secure:!0,port:xe,path:"/voice"});d(C),o(y._id),C.on("open",p=>{c(`Connecté à ${y.name} ✅`),F.emit("join-room",{roomId:y._id,clientId:p,groupRooms:n.rooms.map(_=>_._id),groupId:n.rooms.map(_=>_._id).join(",")}),F.emit("ask-video-states",{roomId:y._id,requesterId:p}),F.emit("get-all-counts",{rooms:n.rooms.map(_=>_._id),groupRooms:n.rooms.map(_=>_._id)}),F.emit("please-call-me",{requesterId:p})}),C.on("call",p=>{var w;const _=((w=p.metadata)==null?void 0:w.type)??"camera";_==="screen"?p.answer():p.answer(u()),v(I=>new Map(I.set(p.peer,p))),p.on("stream",I=>{_==="screen"?N(He=>new Map(He.set(p.peer,I))):E(He=>new Map(He.set(p.peer,I)));const j=new Audio;j.srcObject=I,j.autoplay=!0,j.play().catch(He=>console.warn("Impossible de jouer le son",He))}),p.on("close",()=>{_==="screen"?N(I=>{const j=new Map(I);return j.delete(p.peer),j}):E(I=>{const j=new Map(I);return j.delete(p.peer),j})})}),C.on("disconnected",()=>{m()||(c("Déconnecté"),Oe())})}async function _o(){const y=l();if(y)if(P())Ct();else try{const T=await navigator.mediaDevices.getDisplayMedia({video:!0});pe(T),O(!0);const S=T.getVideoTracks()[0];F.emit("screen-on",{roomId:s(),peerId:y.id}),y.listAllPeers(K=>{K.filter(C=>C!==y.id&&C.startsWith(`${s()}-`)).forEach(C=>{const p=y.call(C,T,{metadata:{type:"screen"}});v(_=>new Map(_.set(p.peer,p))),p.on("stream",_=>{N(w=>new Map(w.set(p.peer,_)))}),p.on("close",()=>{N(_=>{const w=new Map(_);return w.delete(p.peer),w})})})}),S.onended=()=>{Ct()}}catch(T){console.error("Erreur lors du partage d’écran :",T)}}function Ct(){const y=he();if(!y)return;const T=y.getVideoTracks()[0];T&&T.stop(),O(!1),pe(null);const S=l();S&&(F.emit("screen-off",{roomId:s(),peerId:S.id}),Te().forEach((K,C)=>{var w;const p=(w=K._localStream)==null?void 0:w.getVideoTracks();(p==null?void 0:p.some(I=>I.label.toLowerCase().includes("screen")))&&(K.close(),N(I=>{const j=new Map(I);return j.delete(C),j}),v(I=>{const j=new Map(I);return j.delete(C),j}))}))}async function vo(){const y=u();if(!y)return;let T=y.getVideoTracks()[0];const S=l();if(T)T.enabled=!T.enabled,V(T.enabled),F.emit(T.enabled?"video-on":"video-off",{roomId:s(),peerId:S==null?void 0:S.id}),T.enabled&&S&&S.listAllPeers(K=>{K.filter(C=>C!==S.id&&C.startsWith(`${s()}-`)).forEach(C=>{const p=S.call(C,y);v(_=>new Map(_.set(p.peer,p))),p.on("stream",_=>{E(w=>new Map(w.set(p.peer,_)))}),p.on("close",()=>{E(_=>{const w=new Map(_);return w.delete(p.peer),w})})})});else try{const C=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];C&&(y.addTrack(C),V(!0),F.emit("video-on",{roomId:s(),peerId:S==null?void 0:S.id}),S&&S.listAllPeers(p=>{p.filter(_=>_!==S.id&&_.startsWith(`${s()}-`)).forEach(_=>{const w=S.call(_,y,{metadata:{type:"camera"}});v(I=>new Map(I.set(w.peer,w))),w.on("stream",I=>{E(j=>new Map(j.set(w.peer,I)))}),w.on("close",()=>{E(I=>{const j=new Map(I);return j.delete(w.peer),j})})})}))}catch(K){console.error("Erreur caméra",K)}}F.on("all-participant-counts",y=>{x(new Map(Object.entries(y)))}),F.on("remote-video-off",({peerId:y})=>{ee(T=>new Map(T.set(y,!1))),E(T=>{const S=new Map(T);return S.delete(y),S})}),F.on("remote-video-on",({peerId:y})=>{console.log(`Video activée pour ${y}`),ee(T=>new Map(T.set(y,!0)))}),F.on("request-video-state",({requesterId:y})=>{var S;const T=(S=l())==null?void 0:S.id;T&&F.emit(X()?"video-on":"video-off",{roomId:s(),peerId:T})});function jr(){c("Plus de réseau ❌"),Oe()}function Ur(){c("Connexion rétablie ✅"),F.emit("get-all-counts",{rooms:n.rooms.map(y=>y._id),groupRooms:n.rooms.map(y=>y._id)})}return window.addEventListener("offline",jr),window.addEventListener("online",Ur),Tt(()=>{window.removeEventListener("offline",jr),window.removeEventListener("online",Ur)}),F.emit("subscribe-group",{groupId:n.rooms.map(y=>y._id).join(",")}),F.on("please-call-me",({requesterId:y})=>{const T=l();if(!T)return;const S=u(),K=he();if(S){const C=T.call(y,S,{metadata:{type:"camera"}});v(p=>new Map(p.set(C.peer,C))),C.on("stream",p=>{E(w=>new Map(w.set(C.peer,p)));const _=new Audio;_.srcObject=p,_.autoplay=!0,_.play().catch(w=>console.warn("Impossible de jouer le son",w))}),C.on("close",()=>{E(p=>{const _=new Map(p);return _.delete(C.peer),_})})}if(K){const C=T.call(y,K,{metadata:{type:"screen"}});v(p=>new Map(p.set(C.peer,C))),C.on("stream",p=>{N(_=>new Map(_.set(C.peer,p)))}),C.on("close",()=>{N(p=>{const _=new Map(p);return _.delete(C.peer),_})})}}),F.emit("get-all-counts",{rooms:n.rooms.map(y=>y._id),groupRooms:n.rooms.map(y=>y._id)}),{visible:e,isMuted:r,joinedRoom:s,status:a,roomParticipantCounts:g,open:()=>t(!0),close:Oe,leaveAndClose:()=>{Oe(),t(!1)},joinRoom:yo,leaveRoom:Oe,toggleMute:go,localStream:u,isVideoEnabled:X,toggleVideo:vo,remoteStreams:H,remoteVideoStates:U,toggleScreenShare:_o,remoteScreenStreams:ne,stopScreenShare:Ct,screenStream:he,isScreenSharing:P}}var ms=R('<div class="flex items-center gap-2"><button title="Plein écran"class="flex items-center gap-1 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full px-2 py-1 transition"><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 3H5a2 2 0 0 0-2 2v3m0 8v3a2 2 0 0 0 2 2h3m8-16h3a2 2 0 0 1 2 2v3m0 8v3a2 2 0 0 1-2 2h-3"></path></svg></button><button class="flex items-center gap-1 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full px-2 py-1 transition"></button><button class="flex items-center gap-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900 rounded-full px-2 py-1 transition"title=Fermer><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),gs=R('<svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4h7M4 4v7M20 20h-7M20 20v-7">'),ys=R('<svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4h7M4 4v7M20 20h-7M20 20v-7"></path> ');function zn(n){return(()=>{var e=ms(),t=e.firstChild,r=t.nextSibling,i=r.nextSibling;return ie(t,"click",n.onToogleFullScreen),ie(r,"click",n.onToggleExpand),b(r,(()=>{var s=Z(()=>!!n.isExpanded);return()=>s()?gs():ys()})()),ie(i,"click",n.onClose),te(()=>ai(r,"title",n.isExpanded?"Réduire":"Agrandir")),e})()}Ee(["click"]);var _s=R('<div class="relative cursor-zoom-in w-full max-w-1/4 max-h-[300px] rounded-md overflow-hidden"><video muted class="w-full h-auto rounded object-cover"autoplay playsinline>'),vs=R('<div class="z-10 mt-6 flex gap-2 overflow-x-auto px-4 py-2 bg-black/60 rounded-lg">'),bs=R('<div class="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center"><div class="absolute inset-0"></div><video muted class="max-w-full max-h-full z-10 rounded-lg shadow-2xl"autoplay playsinline>'),Cs=R('<video muted class="w-24 h-16 rounded object-cover border border-white/20"autoplay playsinline>'),Ss=R('<div class="w-full max-w-1/4 max-h-[300px] rounded-md bg-black flex items-center justify-center text-white">📷 Caméra désactivée');function ks(n){let e,t;const[r,i]=L(!1);Qe(()=>{if(e&&n.stream&&n.isVideoEnabled){const o=n.stream.getVideoTracks().some(a=>a.readyState==="live");e.srcObject=o?n.stream:null,e.onloadedmetadata=()=>e==null?void 0:e.play().catch(console.warn)}}),Qe(()=>{r()&&t&&n.stream&&(t.srcObject=n.stream,t.onloadedmetadata=()=>t==null?void 0:t.play().catch(console.warn))});const s=o=>{o.key==="Escape"&&i(!1)};return Qe(()=>{r()?window.addEventListener("keydown",s):window.removeEventListener("keydown",s),Tt(()=>window.removeEventListener("keydown",s))}),n.isVideoEnabled?[(()=>{var o=_s(),a=o.firstChild;return o.$$click=()=>i(!0),Me(c=>e=c,a),o})(),M($e,{get when(){return r()},get children(){var o=bs(),a=o.firstChild,c=a.nextSibling;return a.$$click=()=>i(!1),Me(l=>t=l,c),b(o,M($e,{get when(){return n.peers&&n.peers.length>0},get children(){var l=vs();return b(l,M(et,{get each(){return n.peers},children:d=>(()=>{var u=Cs();return Me(f=>{f.srcObject=d.stream,f.onloadedmetadata=()=>f.play().catch(console.warn)},u),u})()})),l}}),null),o}})]:Ss()}Ee(["click"]);var Ts=R('<a href=https://talkizi.com target=_blank rel="noopener noreferrer"><span>Powered by</span><span class="font-semibold text-indigo-600">Talkizi');function jn(n){return(()=>{var e=Ts();return te(()=>ue(e,`flex items-center justify-center gap-1 text-xs text-gray-400 hover:text-indigo-500 transition-colors ${n.class??""}`)),e})()}var xs=R('<div class="z-10 mt-6 flex gap-2 overflow-x-auto px-4 py-2 bg-black/60 rounded-lg max-w-full">'),Rs=R('<div class="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center"><div class="absolute inset-0 cursor-zoom-out"></div><video muted autoplay playsinline class="z-10 max-w-full max-h-full rounded-xl shadow-2xl">'),Es=R("<video muted autoplay playsinline>");function Ps(n){return(()=>{var e=Rs(),t=e.firstChild,r=t.nextSibling;return ie(t,"click",n.onClose),Me(i=>{i.srcObject=n.current.stream,i.onloadedmetadata=()=>i.play().catch(console.warn)},r),b(e,M($e,{get when(){return n.all.length>1},get children(){var i=xs();return b(i,M(et,{get each(){return n.all},children:s=>(()=>{var o=Es();return o.$$click=a=>{a.stopPropagation(),n.onSelect(s.id)},Me(a=>{a.srcObject=s.stream,a.onloadedmetadata=()=>a.play().catch(console.warn)},o),te(()=>ue(o,`w-24 h-16 rounded cursor-pointer border ${s.id===n.current.id?"border-white":"border-transparent"}`)),o})()})),i}}),null),e})()}Ee(["click"]);var ws=R('<button class="fixed bottom-6 right-6 z-50 bg-gradient-to-br from-indigo-600 to-purple-500 text-white px-5 py-3 rounded-full shadow-2xl hover:scale-105 transition-all duration-200 flex items-center gap-3"><span>'),As=R('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-end z-50"><div><div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><h2 class="text-lg font-semibold text-gray-800 dark:text-white"></h2></div><div class="flex-1 overflow-y-auto"><div></div><div class="flex flex-row flex-wrap gap-4 w-full justify-start p-2"></div></div><div class="border-t border-gray-200 dark:border-gray-700 p-4"><h3 class="text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1"></h3><p class="text-base font-bold text-gray-900 dark:text-white"></p><p class="text-xs text-gray-500 mt-1">'),Os=R('<div class="flex gap-2">'),Ls=R('<div class="mt-4 flex gap-2 flex-wrap justify-center">'),Ds=R('<div class="fixed bottom-6 right-6 z-50"><div class="w-[260px] bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 flex flex-col transition-all"><div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><h2 class="text-sm font-semibold text-gray-800 dark:text-white"></h2></div><div class="p-3 flex flex-col gap-2"><p class="text-xs text-gray-500"></p><div class="flex gap-2 flex-wrap">'),Is=R('<button class="bg-yellow-600 hover:bg-yellow-700 text-white px-2 py-1 rounded text-xs">'),$s=R('<button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs">'),Ms=R('<button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs">');function Bs(n){const[e,t]=L(null),[r,i]=L("expanded"),[s,o]=L(null),a=()=>r()==="fullscreen",c=()=>r()==="expanded",l=()=>r()==="minimized",{lang:d}=_n(),u=()=>vn[d()];Kr(()=>{var m;(m=n.config)!=null&&m.talkiziId&&open()});const f=()=>{if(e())e().open();else{const m=ps(n.config);t(m),m.open()}},g=()=>{i(l()?"expanded":"minimized")},x=()=>{i(m=>m==="fullscreen"?"expanded":"fullscreen")};return[M($e,{get when(){var m;return!((m=e())!=null&&m.visible())},get children(){var m=ws(),Q=m.firstChild;return m.$$click=f,b(Q,()=>u().modal.openButton),b(m,M(jn,{}),null),m}}),Z(()=>Z(()=>{var m;return!!((m=e())!=null&&m.visible()&&!l())})()&&(()=>{var m=As(),Q=m.firstChild,X=Q.firstChild,V=X.firstChild,H=X.nextSibling,E=H.firstChild,ne=E.nextSibling,N=H.nextSibling,U=N.firstChild,ee=U.nextSibling,Te=ee.nextSibling;return m.$$click=v=>{var P;v.target===v.currentTarget&&((P=e())==null||P.leaveAndClose())},b(V,()=>u().modal.title),b(X,M(zn,{onToogleFullScreen:x,get isFullScreen(){return a()},get isExpanded(){return c()},onExpand:()=>i("expanded"),onToggleExpand:g,get onClose(){return e().leaveAndClose}}),null),b(E,M(et,{get each(){return n.config.rooms},children:v=>(()=>{var P=Os();return b(P,M(ui,{get fullScreen(){return a()},room:v,get joinedRoomId(){return e().joinedRoom()},get count(){var O;return((O=e())==null?void 0:O.roomParticipantCounts().get(v._id))??0},onJoin:()=>{var O;return(O=e())==null?void 0:O.joinRoom(v)}})),P})()})),b(ne,M(et,{get each(){var v,P,O,he,pe;return[...(v=e())!=null&&v.localStream()&&((P=e())!=null&&P.isVideoEnabled())?[{id:"local",stream:(O=e())==null?void 0:O.localStream(),isVideoEnabled:!0}]:[],...(he=e())!=null&&he.screenStream()?[{id:"local-screen",stream:(pe=e())==null?void 0:pe.screenStream(),isVideoEnabled:!0}]:[],...Array.from(e().remoteStreams().entries()).map(([z,me])=>{var xe;return{id:z,stream:me,isVideoEnabled:((xe=e())==null?void 0:xe.remoteVideoStates().get(z))??!0}}),...Array.from(e().remoteScreenStreams().entries()).map(([z,me])=>({id:`${z}-screen`,stream:me,isVideoEnabled:!0}))]},children:(v,P)=>M(ks,{get stream(){return v.stream},get isVideoEnabled(){return v.isVideoEnabled},peers:[]})}),null),b(ne,M($e,{get when(){return s()},get children(){return M(Ps,{get current(){var v,P,O,he,pe;return[...(v=e())!=null&&v.localStream()&&((P=e())!=null&&P.isVideoEnabled())?[{id:"local",stream:(O=e())==null?void 0:O.localStream(),isVideoEnabled:!0}]:[],...(he=e())!=null&&he.screenStream()?[{id:"local-screen",stream:(pe=e())==null?void 0:pe.screenStream(),isVideoEnabled:!0}]:[],...Array.from(e().remoteStreams().entries()).map(([z,me])=>{var xe;return{id:z,stream:me,isVideoEnabled:((xe=e())==null?void 0:xe.remoteVideoStates().get(z))??!0}}),...Array.from(e().remoteScreenStreams().entries()).map(([z,me])=>({id:`${z}-screen`,stream:me,isVideoEnabled:!0}))].find(z=>z.id===s())},all:[],onSelect:o,onClose:()=>o(null)})}}),null),b(U,()=>u().modal.currentRoom),b(ee,()=>{var v;return((v=n.config.rooms.find(P=>{var O;return P._id===((O=e())==null?void 0:O.joinedRoom())}))==null?void 0:v.name)??u().modal.noRoom}),b(Te,()=>{var v;return((v=e())==null?void 0:v.status())??u().modal.selectRoom}),b(N,(()=>{var v=Z(()=>{var P;return!!((P=e())!=null&&P.joinedRoom())});return()=>v()&&(()=>{var P=Ls();return b(P,M(bi,{get fullScreen(){return a()},get isMuted(){return e().isMuted()},get onToggleMute(){return e().toggleMute},get onLeave(){return e().leaveRoom},get onToggleVideoEnabled(){return e().toggleVideo},get isVideoEnabled(){return e().isVideoEnabled()},get onToggleScreenShare(){return e().toggleScreenShare},get isScreenSharing(){var O;return(O=e())==null?void 0:O.isScreenSharing()}})),P})()})(),null),b(Q,M(jn,{}),null),te(v=>{var P=`h-full bg-white dark:bg-gray-900 rounded-l-xl shadow-lg flex flex-col transition-all ${a()?"w-full":"sm:w-[400px]"}`,O=`flex ${a()?"flex-row gap-4":"flex-col gap-4 "} p-4`;return P!==v.e&&ue(Q,v.e=P),O!==v.t&&ue(E,v.t=O),v},{e:void 0,t:void 0}),m})()),Z(()=>Z(()=>{var m;return!!((m=e())!=null&&m.visible()&&l())})()&&(()=>{var m=Ds(),Q=m.firstChild,X=Q.firstChild,V=X.firstChild,H=X.nextSibling,E=H.firstChild,ne=E.nextSibling;return b(V,()=>{var N;return((N=n.config.rooms[0])==null?void 0:N.name)??u().modal.defaultRoom}),b(X,M(zn,{get isFullScreen(){return a()},onToogleFullScreen:x,get isExpanded(){return c()},onExpand:()=>i("expanded"),onToggleExpand:g,get onClose(){return e().leaveAndClose}}),null),b(E,(()=>{var N=Z(()=>!!e().joinedRoom());return()=>{var U;return N()?((U=e())==null?void 0:U.status())??u().modal.connected:u().modal.notConnected}})()),b(ne,(()=>{var N=Z(()=>!!e().joinedRoom());return()=>N()?[(()=>{var ee;var U=Is();return ie(U,"click",(ee=e())==null?void 0:ee.toggleMute),b(U,()=>{var Te;return(Te=e())!=null&&Te.isMuted()?"🔇":"🎙️"}),U})(),(()=>{var ee;var U=$s();return ie(U,"click",(ee=e())==null?void 0:ee.leaveRoom),b(U,()=>u().modal.leave),U})()]:(()=>{var U=Ms();return U.$$click=()=>{var ee;return(ee=e())==null?void 0:ee.joinRoom(n.config.rooms[0])},b(U,()=>u().modal.join),U})()})()),m})())]}Ee(["click"]);const Ns="aconsole.log('Hello, world!');";async function Un(){const n=new TextEncoder,e=await window.crypto.subtle.importKey("raw",n.encode(Ns),{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n.encode("consoole.alert.?33312oooo#?"),iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function Fn(){return window.location.hostname==="192.168.1.151"}async function zs(n,e,t){const r={data:e,expiresAt:Date.now()+t*1e3},i=JSON.stringify(r);if(Fn()){localStorage.setItem(n,btoa(i));return}const s=new TextEncoder,o=window.crypto.getRandomValues(new Uint8Array(12)),a=await Un(),c=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,s.encode(i)),l=`${btoa(String.fromCharCode(...o))}.${btoa(String.fromCharCode(...new Uint8Array(c)))}`;localStorage.setItem(n,l)}async function js(n){const e=localStorage.getItem(n);if(!e)return null;try{if(Fn()){const u=atob(e),f=JSON.parse(u);return Date.now()>f.expiresAt?(localStorage.removeItem(n),null):f.data}const[t,r]=e.split(".");if(!t||!r)return null;const i=Uint8Array.from(atob(t),u=>u.charCodeAt(0)),s=Uint8Array.from(atob(r),u=>u.charCodeAt(0)),o=await Un(),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},o,s),l=new TextDecoder().decode(a),d=JSON.parse(l);return Date.now()>d.expiresAt?(localStorage.removeItem(n),null):d.data}catch(t){return console.error("Erreur lors du déchiffrement :",t),null}}const Us="https://talkizi.com/api";function Fs(){return Array.from(document.querySelectorAll("script[src]")).find(n=>n.src.includes("widget.js"))||null}async function Vs(n){const e=await js("config");if(e)return console.log("✅ Config trouvée dans le cache.",e),e;try{const r=await(await fetch(`${Us}/configs/validate/${encodeURIComponent(n)}`,{cache:"force-cache"})).json();return r.valid?(await zs("config",r,3600),r):(console.error("❌ Clé API invalide."),null)}catch(t){return console.error("❌ Erreur API:",t),null}}async function Ft(){const n=Fs();console.log(n);let e=n==null?void 0:n.getAttribute("data-key"),t=n==null?void 0:n.getAttribute("data-show"),r=t===null?!0:t==="true";e||(console.error("❌ API key manquante."),e="Stuc)vW47b.e5?@FGYbj");const i=await Vs(e);if(!i||!i.valid){console.warn("❌ Config invalide ou absente. Rien ne sera affiché.");return}const o=new URLSearchParams(window.location.search).get("talkiziId");o&&(i.talkiziId=o,i.rooms=[{_id:o,name:"Private Room"}]);const a=document.createElement("div");document.body.appendChild(a);{if(console.info("🟣 Mode special actif → rendu uniquement de la modale.",r),!r){mn(()=>[],a);return}mn(()=>M(di,{get children(){return r&&M(Bs,{config:i})}}),a);return}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ft):Ft(),window.TalkiziWidget={start:Ft,version:"1.0.0",env:"special"};class qs{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return Hs(e).buffer}}function Hs(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);t.set(s,r),r+=i.byteLength}return t}function Vn(n){return new Gs(n).unpack()}function qn(n){const e=new Ws,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class Gs{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let r=0,i="",s,o;for(;r<e;)s=t[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|t[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,r+=3):(o=(s&7)<<18|(t[r+1]&63)<<12|(t[r+2]&63)<<6|t[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++){const i=this.unpack();t[i]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(t===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+t*2**(i-52);return(r===0?1:-1)*o}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class Ws{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const r=i=>{if(i<t){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=t<<31|r+1023<<20|s/o&1048575,c=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<t.length){const o=t[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new qs,this._textEncoder=new TextEncoder}}let Hn=!0,Gn=!0;function ze(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseFloat(r[t],10)}function be(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=l=>{const d=t(l);d&&(a.handleEvent?a.handleEvent(d):a(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Ks(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Hn=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function Js(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Gn=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function Wn(){if(typeof window=="object"){if(Hn)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Vt(n,e){Gn&&console.warn(n+" is deprecated, please use "+e+" instead.")}function Ys(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ze(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ze(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ze(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype,e._safariVersion=ze(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Kn(n){return Object.prototype.toString.call(n)==="[object Object]"}function Jn(n){return Kn(n)?Object.keys(n).reduce(function(e,t){const r=Kn(n[t]),i=r?Jn(n[t]):n[t],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[t]:i})},{}):n}function qt(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?qt(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(i=>{qt(n,n.get(i),t)})}))}function Yn(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return n.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{n.forEach(a=>{a.type===r&&a.trackId===o.id&&qt(n,a,i)})}),i}const Qn=Wn;function Xn(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const d=typeof a[l]=="object"?a[l]:{ideal:a[l]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const u=function(f,g){return f?f+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(d.ideal!==void 0){c.optional=c.optional||[];let f={};typeof d.ideal=="number"?(f[u("min",l)]=d.ideal,c.optional.push(f),f={},f[u("max",l)]=d.ideal,c.optional.push(f)):(f[u("",l)]=d.ideal,c.optional.push(f))}d.exact!==void 0&&typeof d.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[u("",l)]=d.exact):["min","max"].forEach(f=>{d[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[u(f,l)]=d[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(d,u,f){u in d&&!(f in d)&&(d[f]=d[u],delete d[u])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const d=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete a.video.facingMode;let u;if(l.exact==="environment"||l.ideal==="environment"?u=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(f=>{f=f.filter(x=>x.kind==="videoinput");let g=f.find(x=>u.some(m=>x.label.toLowerCase().includes(m)));return!g&&f.length&&u.includes("back")&&(g=f[f.length-1]),g&&(a.video.deviceId=l.exact?{exact:g.deviceId}:{ideal:g.deviceId}),a.video=r(a.video),Qn("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Qn("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,d=>{t.webkitGetUserMedia(d,c,u=>{l&&l(s(u))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(d=>{if(l.audio&&!d.getAudioTracks().length||l.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(s(d))))}}}function Zn(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function er(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else be(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function tr(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function nr(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>Yn(o,s.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i}),be(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>Yn(s,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function rr(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(u=>u.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function ir(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return rr(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const d=t.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(u=>this._reverseStreams[u.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(u=>{if(this.getSenders().find(g=>g.track===u))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const u=new n.MediaStream(d.getTracks());this._streams[d.id]=u,this._reverseStreams[u.id]=d,d=u}r.apply(this,[d])};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},n.RTCPeerConnection.prototype.addTrack=function(d,u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[u.id];if(x)x.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new n.MediaStream([d]);this._streams[u.id]=m,this._reverseStreams[m.id]=u,this.addStream(m)}return this.getSenders().find(m=>m.track===d)};function s(l,d){let u=d.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const g=l._reverseStreams[f],x=l._streams[g.id];u=u.replace(new RegExp(x.id,"g"),g.id)}),new RTCSessionDescription({type:d.type,sdp:u})}function o(l,d){let u=d.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const g=l._reverseStreams[f],x=l._streams[g.id];u=u.replace(new RegExp(g.id,"g"),x.id)}),new RTCSessionDescription({type:d.type,sdp:u})}["createOffer","createAnswer"].forEach(function(l){const d=n.RTCPeerConnection.prototype[l],u={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[x=>{const m=s(this,x);f[0].apply(null,[m])},x=>{f[1]&&f[1].apply(null,x)},arguments[2]]):d.apply(this,arguments).then(x=>s(this,x))}};n.RTCPeerConnection.prototype[l]=u[l]});const a=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),n.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(m=>d.track===m)&&(f=this._streams[g])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ht(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=i[t]})}function sr(n,e){be(n,"negotiationneeded",t=>{const r=t.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return t})}const or=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:sr,shimAddTrackRemoveTrack:ir,shimAddTrackRemoveTrackWithNative:rr,shimGetSendersWithDtmf:tr,shimGetUserMedia:Xn,shimMediaStream:Zn,shimOnTrack:er,shimPeerConnection:Ht,shimSenderReceiverGetStats:nr},Symbol.toStringTag,{value:"Module"}));function ar(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(i,s,o){Vt("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function Qs(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function cr(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Gt(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=t[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((d,u)=>{c.set(u,Object.assign({},d,{type:t[d.type]||d.type}))})}return c}).then(o,a)}}function lr(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ur(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),be(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function dr(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){Vt("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function fr(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function hr(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function pr(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function mr(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function gr(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const yr=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:hr,shimCreateAnswer:gr,shimCreateOffer:mr,shimGetDisplayMedia:Qs,shimGetParameters:pr,shimGetUserMedia:ar,shimOnTrack:cr,shimPeerConnection:Gt,shimRTCDataChannel:fr,shimReceiverGetStats:ur,shimRemoveStream:dr,shimSenderGetStats:lr},Symbol.toStringTag,{value:"Module"}));function _r(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);const i=t.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function vr(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function br(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,d){const u=arguments.length>=2?arguments[2]:arguments[0],f=t.apply(this,[u]);return d?(f.then(l,d),Promise.resolve()):f},e.createAnswer=function(l,d){const u=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[u]);return d?(f.then(l,d),Promise.resolve()):f};let a=function(c,l,d){const u=i.apply(this,[c]);return d?(u.then(l,d),Promise.resolve()):u};e.setLocalDescription=a,a=function(c,l,d){const u=s.apply(this,[c]);return d?(u.then(l,d),Promise.resolve()):u},e.setRemoteDescription=a,a=function(c,l,d){const u=o.apply(this,[c]);return d?(u.then(l,d),Promise.resolve()):u},e.addIceCandidate=a}function Cr(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=i=>r(Sr(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function Sr(n){return n&&n.video!==void 0?Object.assign({},n,{video:Jn(n.video)}):n}function kr(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Vt("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Tr(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function xr(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Rr(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const Er=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Rr,shimCallbacksAPI:br,shimConstraints:Sr,shimCreateOfferLegacy:xr,shimGetUserMedia:Cr,shimLocalStreamsAPI:_r,shimRTCIceServerUrls:kr,shimRemoteStreamsAPI:vr,shimTrackEventTransceiver:Tr},Symbol.toStringTag,{value:"Module"}));function Xs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wt={exports:{}},Pr;function Zs(){return Pr||(Pr=1,function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(t){let r;t.indexOf("a=candidate:")===0?r=t.substring(12).split(" "):r=t.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const i=t.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const s=t.type;return r.push("typ"),r.push(s),s!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let r=t.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const i=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(t){const r=t.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const r={};let i;const s=t.substring(t.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(t){let r="",i=t.payloadType;if(t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const s=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?s.push(o+"="+t.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substring(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",i=t.payloadType;return t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),i={ssrc:parseInt(t.substring(7,r),10)},s=t.indexOf(":",r);return s>-1?(i.attribute=t.substring(r+1,s),i.value=t.substring(s+1)):i.attribute=t.substring(r+1),i},e.parseSsrcGroup=function(t){const r=t.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(t){const r=t.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let i="a=setup:"+r+`\r
`;return t.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(t){const r=t.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const i=e.matchPrefix(t+r,"a=ice-ufrag:")[0],s=e.matchPrefix(t+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(t)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=e.matchPrefix(t,"a=rtpmap:"+c+" ")[0];if(l){const d=e.parseRtpMap(l),u=e.matchPrefix(t,"a=fmtp:"+c+" ");switch(d.parameters=u.length?e.parseFmtp(u[0]):{},d.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(d=>d.type===c.type&&d.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(t,r){let i="";i+="m="+t+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(t){const r=[],i=e.parseRtpParameters(t),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(t,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const d=e.matchPrefix(t,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(x=>parseInt(x,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(l=d[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let g={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(g.rtx={ssrc:l}),r.push(g),s&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&c&&r.push({ssrc:c});let u=e.matchPrefix(t,"b=");return u.length&&(u[0].indexOf("b=TIAS:")===0?u=parseInt(u[0].substring(7),10):u[0].indexOf("b=AS:")===0?u=parseInt(u[0].substring(5),10)*1e3*.95-50*40*8:u=void 0,r.forEach(f=>{f.maxBitrate=u})),r},e.parseRtcpParameters=function(t){const r={},i=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const i=e.matchPrefix(t,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(t){const r=e.parseMLine(t),i=e.matchPrefix(t,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(t,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(t,r){let i=[];return t.protocol!=="DTLS/SCTP"?i=["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,r,i){let s;const o=r!==void 0?r:2;return t?s=t:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const i=e.splitLines(t);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const i=e.splitLines(t)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(t){const i=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},n.exports=e}(Wt)),Wt.exports}var wr=Zs();const Ae=Xs(wr),eo=_e({__proto__:null,default:Ae},[wr]);function ut(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=Ae.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,be(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Kt(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||be(n,"icecandidate",e=>{if(e.candidate){const t=Ae.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function dt(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(a){if(!a||!a.sdp)return!1;const c=Ae.splitSections(a.sdp);return c.shift(),c.some(l=>{const d=Ae.parseMLine(l);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const d=Ae.matchPrefix(a.sdp,"a=max-message-size:");return d.length>0?l=parseInt(d[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const c=r(arguments[0]),l=i(c),d=s(arguments[0],c);let u;l===0&&d===0?u=Number.POSITIVE_INFINITY:l===0||d===0?u=Math.max(l,d):u=Math.min(l,d);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return u}}),this._sctp=f}return o.apply(this,arguments)}}function ft(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},be(n,"datachannel",r=>(e(r.channel,r.target),r))}function Jt(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Yt(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return t.apply(this,arguments)}}function ht(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function pt(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?t.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const to=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Yt,shimAddIceCandidateNullOrEmpty:ht,shimConnectionState:Jt,shimMaxMessageSize:dt,shimParameterlessSetLocalDescription:pt,shimRTCIceCandidate:ut,shimRTCIceCandidateRelayProtocol:Kt,shimSendThrowTypeError:ft},Symbol.toStringTag,{value:"Module"}));function no({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=Wn,r=Ys(n),i={browserDetails:r,commonShim:to,extractVersion:ze,disableLog:Ks,disableWarnings:Js,sdp:eo};switch(r.browser){case"chrome":if(!or||!Ht||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=or,ht(n,r),pt(n),Xn(n,r),Zn(n),Ht(n,r),er(n),ir(n,r),tr(n),nr(n),sr(n,r),ut(n),Kt(n),Jt(n),dt(n,r),ft(n),Yt(n,r);break;case"firefox":if(!yr||!Gt||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=yr,ht(n,r),pt(n),ar(n,r),Gt(n,r),cr(n),dr(n),lr(n),ur(n),fr(n),hr(n),pr(n),mr(n),gr(n),ut(n),Jt(n),dt(n,r),ft(n);break;case"safari":if(!Er||!e.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=Er,ht(n,r),pt(n),kr(n),xr(n),br(n),_r(n),vr(n),Tr(n),Cr(n),Rr(n),ut(n),Kt(n),dt(n,r),ft(n),Yt(n,r);break;default:t("Unsupported browser!");break}return i}const Ar=no({window:typeof window>"u"?void 0:window});function Ce(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}class Or{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),c=e.slice(o,a),l={__peerData:this._dataCount,n:s,data:c,total:i};t.push(l),o=a,s++}return this._dataCount++,t}}}function ro(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.byteLength;return t}const Qt=Ar.default||Ar,je=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Qt.browserDetails.browser}getVersion(){return Qt.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=Qt.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},io=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),Lr=()=>Math.random().toString(36).slice(2),Dr={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class so extends Or{noop(){}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(i){i.target&&t(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Dr,this.browser=je.getBrowser(),this.browserVersion=je.getVersion(),this.pack=qn,this.unpack=Vn,this.supports=function(){const t={browser:je.isBrowserSupported(),webRTC:je.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let r;try{r=new RTCPeerConnection(Dr),t.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!i.ordered;try{i.binaryType="blob",t.binaryBlob=!je.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return t}(),this.validateId=io,this.randomToken=Lr}}const J=new so,oo="PeerJS: ";class ao{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const r=[oo,...t];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var h=new ao,Xt={},co=Object.prototype.hasOwnProperty,Y="~";function Ue(){}Object.create&&(Ue.prototype=Object.create(null),new Ue().__proto__||(Y=!1));function lo(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function Ir(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new lo(t,r||n,i),o=Y?Y+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function mt(n,e){--n._eventsCount===0?n._events=new Ue:delete n._events[e]}function W(){this._events=new Ue,this._eventsCount=0}W.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)co.call(t,r)&&e.push(Y?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},W.prototype.listeners=function(e){var t=Y?Y+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},W.prototype.listenerCount=function(e){var t=Y?Y+e:e,r=this._events[t];return r?r.fn?1:r.length:0},W.prototype.emit=function(e,t,r,i,s,o){var a=Y?Y+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,d,u;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,s),!0;case 6:return c.fn.call(c.context,t,r,i,s,o),!0}for(u=1,d=new Array(l-1);u<l;u++)d[u-1]=arguments[u];c.fn.apply(c.context,d)}else{var f=c.length,g;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!d)for(g=1,d=new Array(l-1);g<l;g++)d[g-1]=arguments[g];c[u].fn.apply(c[u].context,d)}}return!0},W.prototype.on=function(e,t,r){return Ir(this,e,t,r,!1)},W.prototype.once=function(e,t,r){return Ir(this,e,t,r,!0)},W.prototype.removeListener=function(e,t,r,i){var s=Y?Y+e:e;if(!this._events[s])return this;if(!t)return mt(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&mt(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:mt(this,s)}return this},W.prototype.removeAllListeners=function(e){var t;return e?(t=Y?Y+e:e,this._events[t]&&mt(this,t)):(this._events=new Ue,this._eventsCount=0),this},W.prototype.off=W.prototype.removeListener,W.prototype.addListener=W.prototype.on,W.prefixed=Y,W.EventEmitter=W,Xt=W;var Se={};Ce(Se,"ConnectionType",()=>de),Ce(Se,"PeerErrorType",()=>D),Ce(Se,"BaseConnectionErrorType",()=>gt),Ce(Se,"DataConnectionErrorType",()=>yt),Ce(Se,"SerializationType",()=>Fe),Ce(Se,"SocketEventType",()=>fe),Ce(Se,"ServerMessageType",()=>q);var de=function(n){return n.Data="data",n.Media="media",n}({}),D=function(n){return n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc",n}({}),gt=function(n){return n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed",n}({}),yt=function(n){return n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big",n}({}),Fe=function(n){return n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw",n}({}),fe=function(n){return n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close",n}({}),q=function(n){return n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE",n}({});const $r="1.5.5";class uo extends Xt.EventEmitter{constructor(e,t,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+t+":"+r+i+"peerjs?key="+s}start(e,t){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+$r),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),h.log("Server message received:",s)}catch{h.log("Invalid server message",i.data);return}this.emit(fe.Message,s)},this._socket.onclose=i=>{this._disconnected||(h.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(fe.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),h.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){h.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:q.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(fe.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Mr{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===de.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=t.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){h.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;h.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(h.log(`Received ICE candidates for ${t}:`,o.candidate),s.socket.send({type:q.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":h.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(gt.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":h.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(gt.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":h.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},h.log("Listening for data channel"),e.ondatachannel=o=>{h.log("Received data channel");const a=o.channel;s.getConnection(t,r)._initializeDataChannel(a)},h.log("Listening for remote stream"),e.ontrack=o=>{h.log("Received remote stream");const a=o.streams[0],c=s.getConnection(t,r);if(c.type===de.Media){const l=c;this._addStreamToMediaConnection(a,l)}}}cleanup(){h.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(t||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);h.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),h.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===de.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}t.socket.send({type:q.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(D.WebRTC,i),h.log("Failed to setLocalDescription, ",i))}}catch(r){t.emitError(D.WebRTC,r),h.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();h.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),h.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:q.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){t.emitError(D.WebRTC,i),h.log("Failed to setLocalDescription, ",i)}}catch(r){t.emitError(D.WebRTC,r),h.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const r=this.connection.peerConnection,i=this.connection.provider;h.log("Setting remote description",t);const s=this;try{await r.setRemoteDescription(t),h.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError(D.WebRTC,o),h.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){h.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),h.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(D.WebRTC,t),h.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(h.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return h.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){h.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class Br extends Xt.EventEmitter{emitError(e,t){h.error("Error:",t),this.emit("error",new Nr(`${e}`,t))}}class Nr extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class zr extends Br{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}const Ve=class Ve extends zr{get type(){return de.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Ve.ID_PREFIX+J.randomToken(),this._negotiator=new Mr(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{h.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{h.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){h.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case q.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case q.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:h.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){h.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};tn=new WeakMap,Ge(Ve,tn,Ve.ID_PREFIX="mc_");let _t=Ve;class fo{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${t}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",$r),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){h.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==J.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===J.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw h.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}const ke=class ke extends zr{get type(){return de.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||ke.ID_PREFIX+Lr(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Mr(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{h.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{h.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{h.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(yt.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case q.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case q.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:h.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};nn=new WeakMap,rn=new WeakMap,Ge(ke,nn,ke.ID_PREFIX="dc_"),Ge(ke,rn,ke.MAX_BUFFERED_AMOUNT=8388608);let vt=ke;class bt extends vt{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>vt.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return h.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Zt extends bt{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new Or,this.serialization=Fe.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=Vn(e),r=t.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const i=ro(r.data);this._handleDataMessage({data:i})}}_send(e,t){const r=qn(e);if(r instanceof Promise)return this._send_blob(r);if(!t&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);h.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class ho extends bt{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Fe.None}}class po extends bt{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=J.chunkedMTU){this.emitError(yt.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Fe.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}const qe=class qe extends Br{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:ho,json:po,binary:Zt,"binary-utf8":Zt,default:Zt},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:J.CLOUD_HOST,port:J.CLOUD_PORT,path:"/",key:qe.DEFAULT_KEY,token:J.randomToken(),config:J.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==J.CLOUD_HOST?this._options.secure=J.isSecure():this._options.host==J.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&h.setLogFunction(this._options.logFunction),h.logLevel=this._options.debug||0,this._api=new fo(t),this._socket=this._createServerConnection(),!J.supports.audioVideo&&!J.supports.data){this._delayedAbort(D.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!J.validateId(r)){this._delayedAbort(D.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(D.ServerError,i))}_createServerConnection(){const e=new uo(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(fe.Message,t=>{this._handleMessage(t)}),e.on(fe.Error,t=>{this._abort(D.SocketError,t)}),e.on(fe.Disconnected,()=>{this.disconnected||(this.emitError(D.Network,"Lost connection to server."),this.disconnect())}),e.on(fe.Close,()=>{this.disconnected||this._abort(D.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,i=e.src;switch(t){case q.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case q.Error:this._abort(D.ServerError,r.msg);break;case q.IdTaken:this._abort(D.UnavailableID,`ID "${this.id}" is taken`);break;case q.InvalidKey:this._abort(D.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case q.Leave:h.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case q.Expire:this.emitError(D.PeerUnavailable,`Could not connect to peer ${i}`);break;case q.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),h.warn(`Offer received for existing Connection ID:${s}`)),r.type===de.Media){const c=new _t(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=c,this._addConnection(i,o),this.emit("call",c)}else if(r.type===de.Data){const c=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=c,this._addConnection(i,o),this.emit("connection",c)}else{h.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const c of a)o.handleMessage(c);break}default:{if(!r){h.warn(`You received a malformed message from ${i} of type ${t}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):h.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){h.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(D.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected){h.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(D.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){h.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new _t(e,this,{...r,_stream:t});return this._addConnection(e,i),i}_addConnection(e,t){h.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===t)return i;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){h.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(h.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;h.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)h.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)h.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(D.ServerError,t))}};sn=new WeakMap,Ge(qe,sn,qe.DEFAULT_KEY="peerjs");let en=qe;const mo=Object.freeze(Object.defineProperty({__proto__:null,BaseConnectionErrorType:gt,BufferedConnection:bt,ConnectionType:de,DataConnectionErrorType:yt,Peer:en,PeerError:Nr,PeerErrorType:D,SerializationType:Fe,ServerMessageType:q,SocketEventType:fe,util:J},Symbol.toStringTag,{value:"Module"}))})();
