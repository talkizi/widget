(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('/*! tailwindcss v4.1.10 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:oklch(93.6% .032 17.717);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-900:oklch(39.6% .141 25.723);--color-yellow-500:oklch(79.5% .184 86.047);--color-yellow-600:oklch(68.1% .162 75.834);--color-yellow-700:oklch(55.4% .135 66.442);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-emerald-400:oklch(76.5% .177 163.223);--color-emerald-500:oklch(69.6% .17 162.48);--color-emerald-600:oklch(59.6% .145 163.225);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-50:oklch(96.2% .018 272.314);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-md:28rem;--container-xl:36rem;--container-2xl:42rem;--container-3xl:48rem;--container-4xl:56rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-extrabold:800;--tracking-tight:-.025em;--leading-tight:1.25;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--blur-sm:8px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.top-2{top:calc(var(--spacing)*2)}.right-0{right:calc(var(--spacing)*0)}.right-2{right:calc(var(--spacing)*2)}.right-6{right:calc(var(--spacing)*6)}.right-20{right:calc(var(--spacing)*20)}.bottom-3{bottom:calc(var(--spacing)*3)}.bottom-6{bottom:calc(var(--spacing)*6)}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.m-4{margin:calc(var(--spacing)*4)}.mx-auto{margin-inline:auto}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-8{margin-top:calc(var(--spacing)*8)}.mr-2{margin-right:calc(var(--spacing)*2)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.mb-10{margin-bottom:calc(var(--spacing)*10)}.mb-12{margin-bottom:calc(var(--spacing)*12)}.mb-16{margin-bottom:calc(var(--spacing)*16)}.ml-1{margin-left:calc(var(--spacing)*1)}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.size-6{width:calc(var(--spacing)*6);height:calc(var(--spacing)*6)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-16{height:calc(var(--spacing)*16)}.h-\\[10rem\\]{height:10rem}.h-\\[40vh\\]{height:40vh}.h-\\[84vh\\]{height:84vh}.h-auto{height:auto}.h-full{height:100%}.h-screen{height:100vh}.max-h-\\[300px\\]{max-height:300px}.max-h-full{max-height:100%}.min-h-\\[60px\\]{min-height:60px}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-10{width:calc(var(--spacing)*10)}.w-14{width:calc(var(--spacing)*14)}.w-24{width:calc(var(--spacing)*24)}.w-\\[10rem\\]{width:10rem}.w-\\[48\\%\\]{width:48%}.w-\\[92vw\\]{width:92vw}.w-\\[260px\\]{width:260px}.w-auto{width:auto}.w-full{width:100%}.w-screen{width:100vw}.max-w-1{max-width:calc(var(--spacing)*1)}.max-w-1\\/4{max-width:25%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-3xl{max-width:var(--container-3xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-\\[780px\\]{max-width:780px}.max-w-full{max-width:100%}.max-w-md{max-width:var(--container-md)}.max-w-xl{max-width:var(--container-xl)}.flex-1{flex:1}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-6{--tw-translate-x:calc(var(--spacing)*6);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-95{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-spin{animation:var(--animate-spin)}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-zoom-in{cursor:zoom-in}.cursor-zoom-out{cursor:zoom-out}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-row{flex-direction:row}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.gap-1{gap:calc(var(--spacing)*1)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-8>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*8)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t-2xl{border-top-left-radius:var(--radius-2xl);border-top-right-radius:var(--radius-2xl)}.rounded-l-xl{border-top-left-radius:var(--radius-xl);border-bottom-left-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-blue-700{border-color:var(--color-blue-700)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-indigo-500{border-color:var(--color-indigo-500)}.border-indigo-600{border-color:var(--color-indigo-600)}.border-red-500{border-color:var(--color-red-500)}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.border-white\\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-black\\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\\/60{background-color:#0009}@supports (color:color-mix(in lab,red,red)){.bg-black\\/60{background-color:color-mix(in oklab,var(--color-black)60%,transparent)}}.bg-black\\/90{background-color:#000000e6}@supports (color:color-mix(in lab,red,red)){.bg-black\\/90{background-color:color-mix(in oklab,var(--color-black)90%,transparent)}}.bg-blue-600{background-color:var(--color-blue-600)}.bg-emerald-600{background-color:var(--color-emerald-600)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-50{background-color:var(--color-indigo-50)}.bg-indigo-100{background-color:var(--color-indigo-100)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-white{background-color:var(--color-white)}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-yellow-600{background-color:var(--color-yellow-600)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-indigo-600{--tw-gradient-from:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-700{--tw-gradient-from:var(--color-indigo-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-700{--tw-gradient-to:var(--color-purple-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.object-cover{object-fit:cover}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-10{padding:calc(var(--spacing)*10)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-10{padding-block:calc(var(--spacing)*10)}.py-16{padding-block:calc(var(--spacing)*16)}.py-24{padding-block:calc(var(--spacing)*24)}.pr-32{padding-right:calc(var(--spacing)*32)}.pl-6{padding-left:calc(var(--spacing)*6)}.text-center{text-align:center}.text-left{text-align:left}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-extrabold{--tw-font-weight:var(--font-weight-extrabold);font-weight:var(--font-weight-extrabold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.text-blue-600{color:var(--color-blue-600)}.text-gray-200{color:var(--color-gray-200)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-indigo-600{color:var(--color-indigo-600)}.text-indigo-700{color:var(--color-indigo-700)}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-white{color:var(--color-white)}.text-yellow-700{color:var(--color-yellow-700)}.underline{text-decoration-line:underline}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-indigo-400{--tw-ring-color:var(--color-indigo-400)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-\\[1500ms\\]{--tw-duration:1.5s;transition-duration:1.5s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.group-hover\\:text-inherit:is(:where(.group):hover *){color:inherit}.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-emerald-500:hover{background-color:var(--color-emerald-500)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-300:hover{background-color:var(--color-gray-300)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:bg-indigo-100:hover{background-color:var(--color-indigo-100)}.hover\\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\\:bg-red-100:hover{background-color:var(--color-red-100)}.hover\\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\\:bg-yellow-600:hover{background-color:var(--color-yellow-600)}.hover\\:bg-yellow-700:hover{background-color:var(--color-yellow-700)}.hover\\:text-indigo-500:hover{color:var(--color-indigo-500)}.hover\\:text-indigo-600:hover{color:var(--color-indigo-600)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\:border-indigo-500:focus{border-color:var(--color-indigo-500)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-emerald-400\\/60:focus{--tw-ring-color:#00d29499}@supports (color:color-mix(in lab,red,red)){.focus\\:ring-emerald-400\\/60:focus{--tw-ring-color:color-mix(in oklab,var(--color-emerald-400)60%,transparent)}}.focus\\:ring-indigo-500:focus{--tw-ring-color:var(--color-indigo-500)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.active\\:translate-y-\\[1px\\]:active{--tw-translate-y:1px;translate:var(--tw-translate-x)var(--tw-translate-y)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:opacity-60:disabled{opacity:.6}@media (min-width:40rem){.sm\\:mb-0{margin-bottom:calc(var(--spacing)*0)}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-auto{width:auto}.sm\\:flex-row{flex-direction:row}.sm\\:flex-nowrap{flex-wrap:nowrap}.sm\\:justify-end{justify-content:flex-end}.sm\\:gap-3{gap:calc(var(--spacing)*3)}.sm\\:gap-4{gap:calc(var(--spacing)*4)}.sm\\:px-8{padding-inline:calc(var(--spacing)*8)}.sm\\:text-left{text-align:left}}@media (min-width:48rem){.md\\:block{display:block}.md\\:hidden{display:none}.md\\:w-64{width:calc(var(--spacing)*64)}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:p-0{padding:calc(var(--spacing)*0)}.md\\:p-8{padding:calc(var(--spacing)*8)}.md\\:text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.md\\:text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}}@media (min-width:64rem){.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (prefers-color-scheme:dark){.dark\\:border-gray-600{border-color:var(--color-gray-600)}.dark\\:border-gray-700{border-color:var(--color-gray-700)}.dark\\:bg-gray-700{background-color:var(--color-gray-700)}.dark\\:bg-gray-800{background-color:var(--color-gray-800)}.dark\\:bg-gray-900{background-color:var(--color-gray-900)}.dark\\:text-gray-200{color:var(--color-gray-200)}.dark\\:text-gray-300{color:var(--color-gray-300)}.dark\\:text-gray-400{color:var(--color-gray-400)}.dark\\:text-white{color:var(--color-white)}@media (hover:hover){.dark\\:hover\\:bg-gray-700:hover{background-color:var(--color-gray-700)}.dark\\:hover\\:bg-red-900:hover{background-color:var(--color-red-900)}}}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@keyframes spin{to{transform:rotate(360deg)}}.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var du=bt=>{throw TypeError(bt)};var xi=(bt,Ot,mn)=>Ot.has(bt)?du("Cannot add the same private member more than once"):Ot instanceof WeakSet?Ot.add(bt):Ot.set(bt,mn);/*! Talkizi Widget v6.3.5 – 2025-09-01T17:21:42.965Z */(function(){"use strict";var Gn,Kn,Yn,Jn;function bt(r,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in r)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(r,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const Ot=!1,mn=(r,t)=>r===t,ma=Symbol("solid-track"),Ci={equals:mn};let kr=Ar;const _t=1,Ti=2,Lr={owned:null,cleanups:null,context:null,owner:null};var ce=null;let _n=null,_a=null,ve=null,Ee=null,ct=null,wi=0;function Si(r,t){const n=ve,s=ce,c=r.length===0,h=t===void 0?s:t,u=c?Lr:{owned:null,cleanups:null,context:h?h.context:null,owner:h},d=c?r:()=>r(()=>tt(()=>Yt(u)));ce=u,ve=null;try{return Kt(d,!0)}finally{ve=n,ce=s}}function le(r,t){t=t?Object.assign({},Ci,t):Ci;const n={value:r,observers:null,observerSlots:null,comparator:t.equals||void 0},s=c=>(typeof c=="function"&&(c=c(n.value)),Rr(n,c));return[Er.bind(n),s]}function Fe(r,t,n){const s=vn(r,t,!1,_t);Gt(s)}function Pi(r,t,n){kr=Ta;const s=vn(r,t,!1,_t);s.user=!0,ct?ct.push(s):Gt(s)}function xt(r,t,n){n=n?Object.assign({},Ci,n):Ci;const s=vn(r,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,Gt(s),Er.bind(s)}function tt(r){if(ve===null)return r();const t=ve;ve=null;try{return r()}finally{ve=t}}function ga(r){Pi(()=>tt(r))}function gn(r){return ce===null||(ce.cleanups===null?ce.cleanups=[r]:ce.cleanups.push(r)),r}function va(r,t){const n=Symbol("context");return{id:n,Provider:Sa(n),defaultValue:r}}function ya(r){let t;return ce&&ce.context&&(t=ce.context[r.id])!==void 0?t:r.defaultValue}function ba(r){const t=xt(r),n=xt(()=>yn(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function Er(){if(this.sources&&this.state)if(this.state===_t)Gt(this);else{const r=Ee;Ee=null,Kt(()=>Li(this),!1),Ee=r}if(ve){const r=this.observers?this.observers.length:0;ve.sources?(ve.sources.push(this),ve.sourceSlots.push(r)):(ve.sources=[this],ve.sourceSlots=[r]),this.observers?(this.observers.push(ve),this.observerSlots.push(ve.sources.length-1)):(this.observers=[ve],this.observerSlots=[ve.sources.length-1])}return this.value}function Rr(r,t,n){let s=r.value;return(!r.comparator||!r.comparator(s,t))&&(r.value=t,r.observers&&r.observers.length&&Kt(()=>{for(let c=0;c<r.observers.length;c+=1){const h=r.observers[c],u=_n&&_n.running;u&&_n.disposed.has(h),(u?!h.tState:!h.state)&&(h.pure?Ee.push(h):ct.push(h),h.observers&&Or(h)),u||(h.state=_t)}if(Ee.length>1e6)throw Ee=[],new Error},!1)),t}function Gt(r){if(!r.fn)return;Yt(r);const t=wi;xa(r,r.value,t)}function xa(r,t,n){let s;const c=ce,h=ve;ve=ce=r;try{s=r.fn(t)}catch(u){return r.pure&&(r.state=_t,r.owned&&r.owned.forEach(Yt),r.owned=null),r.updatedAt=n+1,Mr(u)}finally{ve=h,ce=c}(!r.updatedAt||r.updatedAt<=n)&&(r.updatedAt!=null&&"observers"in r?Rr(r,s):r.value=s,r.updatedAt=n)}function vn(r,t,n,s=_t,c){const h={fn:r,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ce,context:ce?ce.context:null,pure:n};return ce===null||ce!==Lr&&(ce.owned?ce.owned.push(h):ce.owned=[h]),h}function ki(r){if(r.state===0)return;if(r.state===Ti)return Li(r);if(r.suspense&&tt(r.suspense.inFallback))return r.suspense.effects.push(r);const t=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<wi);)r.state&&t.push(r);for(let n=t.length-1;n>=0;n--)if(r=t[n],r.state===_t)Gt(r);else if(r.state===Ti){const s=Ee;Ee=null,Kt(()=>Li(r,t[0]),!1),Ee=s}}function Kt(r,t){if(Ee)return r();let n=!1;t||(Ee=[]),ct?n=!0:ct=[],wi++;try{const s=r();return Ca(n),s}catch(s){n||(ct=null),Ee=null,Mr(s)}}function Ca(r){if(Ee&&(Ar(Ee),Ee=null),r)return;const t=ct;ct=null,t.length&&Kt(()=>kr(t),!1)}function Ar(r){for(let t=0;t<r.length;t++)ki(r[t])}function Ta(r){let t,n=0;for(t=0;t<r.length;t++){const s=r[t];s.user?r[n++]=s:ki(s)}for(t=0;t<n;t++)ki(r[t])}function Li(r,t){r.state=0;for(let n=0;n<r.sources.length;n+=1){const s=r.sources[n];if(s.sources){const c=s.state;c===_t?s!==t&&(!s.updatedAt||s.updatedAt<wi)&&ki(s):c===Ti&&Li(s,t)}}}function Or(r){for(let t=0;t<r.observers.length;t+=1){const n=r.observers[t];n.state||(n.state=Ti,n.pure?Ee.push(n):ct.push(n),n.observers&&Or(n))}}function Yt(r){let t;if(r.sources)for(;r.sources.length;){const n=r.sources.pop(),s=r.sourceSlots.pop(),c=n.observers;if(c&&c.length){const h=c.pop(),u=n.observerSlots.pop();s<c.length&&(h.sourceSlots[u]=s,c[s]=h,n.observerSlots[s]=u)}}if(r.tOwned){for(t=r.tOwned.length-1;t>=0;t--)Yt(r.tOwned[t]);delete r.tOwned}if(r.owned){for(t=r.owned.length-1;t>=0;t--)Yt(r.owned[t]);r.owned=null}if(r.cleanups){for(t=r.cleanups.length-1;t>=0;t--)r.cleanups[t]();r.cleanups=null}r.state=0}function wa(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Mr(r,t=ce){throw wa(r)}function yn(r){if(typeof r=="function"&&!r.length)return yn(r());if(Array.isArray(r)){const t=[];for(let n=0;n<r.length;n++){const s=yn(r[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return r}function Sa(r,t){return function(s){let c;return Fe(()=>c=tt(()=>(ce.context={...ce.context,[r]:s.value},ba(()=>s.children))),void 0),c}}const Pa=Symbol("fallback");function Ir(r){for(let t=0;t<r.length;t++)r[t]()}function ka(r,t,n={}){let s=[],c=[],h=[],u=0,d=t.length>1?[]:null;return gn(()=>Ir(h)),()=>{let p=r()||[],g=p.length,v,_;return p[ma],tt(()=>{let R,$,P,Ue,qe,be,ne,re,ze;if(g===0)u!==0&&(Ir(h),h=[],s=[],c=[],u=0,d&&(d=[])),n.fallback&&(s=[Pa],c[0]=Si(B=>(h[0]=B,n.fallback())),u=1);else if(u===0){for(c=new Array(g),_=0;_<g;_++)s[_]=p[_],c[_]=Si(x);u=g}else{for(P=new Array(g),Ue=new Array(g),d&&(qe=new Array(g)),be=0,ne=Math.min(u,g);be<ne&&s[be]===p[be];be++);for(ne=u-1,re=g-1;ne>=be&&re>=be&&s[ne]===p[re];ne--,re--)P[re]=c[ne],Ue[re]=h[ne],d&&(qe[re]=d[ne]);for(R=new Map,$=new Array(re+1),_=re;_>=be;_--)ze=p[_],v=R.get(ze),$[_]=v===void 0?-1:v,R.set(ze,_);for(v=be;v<=ne;v++)ze=s[v],_=R.get(ze),_!==void 0&&_!==-1?(P[_]=c[v],Ue[_]=h[v],d&&(qe[_]=d[v]),_=$[_],R.set(ze,_)):h[v]();for(_=be;_<g;_++)_ in P?(c[_]=P[_],h[_]=Ue[_],d&&(d[_]=qe[_],d[_](_))):c[_]=Si(x);c=c.slice(0,u=g),s=p.slice(0)}return c});function x(R){if(h[_]=R,d){const[$,P]=le(_);return d[_]=P,t(p[_],$)}return t(p[_])}}}function fe(r,t){return tt(()=>r(t||{}))}const La=r=>`Stale read from <${r}>.`;function Ei(r){const t="fallback"in r&&{fallback:()=>r.fallback};return xt(ka(()=>r.each,r.children,t||void 0))}function Mt(r){const t=r.keyed,n=xt(()=>r.when,void 0,void 0),s=t?n:xt(n,void 0,{equals:(c,h)=>!c==!h});return xt(()=>{const c=s();if(c){const h=r.children;return typeof h=="function"&&h.length>0?tt(()=>h(t?c:()=>{if(!tt(s))throw La("Show");return n()})):h}return r.fallback},void 0,void 0)}const we=r=>xt(()=>r());function Ea(r,t,n){let s=n.length,c=t.length,h=s,u=0,d=0,p=t[c-1].nextSibling,g=null;for(;u<c||d<h;){if(t[u]===n[d]){u++,d++;continue}for(;t[c-1]===n[h-1];)c--,h--;if(c===u){const v=h<s?d?n[d-1].nextSibling:n[h-d]:p;for(;d<h;)r.insertBefore(n[d++],v)}else if(h===d)for(;u<c;)(!g||!g.has(t[u]))&&t[u].remove(),u++;else if(t[u]===n[h-1]&&n[d]===t[c-1]){const v=t[--c].nextSibling;r.insertBefore(n[d++],t[u++].nextSibling),r.insertBefore(n[--h],v),t[c]=n[h]}else{if(!g){g=new Map;let _=d;for(;_<h;)g.set(n[_],_++)}const v=g.get(t[u]);if(v!=null)if(d<v&&v<h){let _=u,x=1,R;for(;++_<c&&_<h&&!((R=g.get(t[_]))==null||R!==v+x);)x++;if(x>v-d){const $=t[u];for(;d<v;)r.insertBefore(n[d++],$)}else r.replaceChild(n[d++],t[u++])}else u++;else t[u++].remove()}}}const zr="_$DX_DELEGATE";function Br(r,t,n,s={}){let c;return Si(h=>{c=h,t===document?r():N(t,r(),t.firstChild?null:void 0,n)},s.owner),()=>{c(),t.textContent=""}}function K(r,t,n,s){let c;const h=()=>{const d=s?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return d.innerHTML=r,n?d.content.firstChild.firstChild:s?d.firstChild:d.content.firstChild},u=t?()=>tt(()=>document.importNode(c||(c=h()),!0)):()=>(c||(c=h())).cloneNode(!0);return u.cloneNode=u,u}function Ct(r,t=window.document){const n=t[zr]||(t[zr]=new Set);for(let s=0,c=r.length;s<c;s++){const h=r[s];n.has(h)||(n.add(h),t.addEventListener(h,Aa))}}function Ra(r,t,n){n==null?r.removeAttribute(t):r.setAttribute(t,n)}function $e(r,t){t==null?r.removeAttribute("class"):r.className=t}function Ke(r,t,n,s){Array.isArray(n)?(r[`$$${t}`]=n[0],r[`$$${t}Data`]=n[1]):r[`$$${t}`]=n}function Jt(r,t,n){return tt(()=>r(t,n))}function N(r,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return Ri(r,t,s,n);Fe(c=>Ri(r,t(),c,n),s)}function Aa(r){let t=r.target;const n=`$$${r.type}`,s=r.target,c=r.currentTarget,h=p=>Object.defineProperty(r,"target",{configurable:!0,value:p}),u=()=>{const p=t[n];if(p&&!t.disabled){const g=t[`${n}Data`];if(g!==void 0?p.call(t,g,r):p.call(t,r),r.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(r.target)&&h(t.host),!0},d=()=>{for(;u()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return t||document}}),r.composedPath){const p=r.composedPath();h(p[0]);for(let g=0;g<p.length-2&&(t=p[g],!!u());g++){if(t._$host){t=t._$host,d();break}if(t.parentNode===c)break}}else d();h(s)}function Ri(r,t,n,s,c){for(;typeof n=="function";)n=n();if(t===n)return n;const h=typeof t,u=s!==void 0;if(r=u&&n[0]&&n[0].parentNode||r,h==="string"||h==="number"){if(h==="number"&&(t=t.toString(),t===n))return n;if(u){let d=n[0];d&&d.nodeType===3?d.data!==t&&(d.data=t):d=document.createTextNode(t),n=It(r,n,s,d)}else n!==""&&typeof n=="string"?n=r.firstChild.data=t:n=r.textContent=t}else if(t==null||h==="boolean")n=It(r,n,s);else{if(h==="function")return Fe(()=>{let d=t();for(;typeof d=="function";)d=d();n=Ri(r,d,n,s)}),()=>n;if(Array.isArray(t)){const d=[],p=n&&Array.isArray(n);if(bn(d,t,n,c))return Fe(()=>n=Ri(r,d,n,s,!0)),()=>n;if(d.length===0){if(n=It(r,n,s),u)return n}else p?n.length===0?Dr(r,d,s):Ea(r,n,d):(n&&It(r),Dr(r,d));n=d}else if(t.nodeType){if(Array.isArray(n)){if(u)return n=It(r,n,s,t);It(r,n,null,t)}else n==null||n===""||!r.firstChild?r.appendChild(t):r.replaceChild(t,r.firstChild);n=t}}return n}function bn(r,t,n,s){let c=!1;for(let h=0,u=t.length;h<u;h++){let d=t[h],p=n&&n[r.length],g;if(!(d==null||d===!0||d===!1))if((g=typeof d)=="object"&&d.nodeType)r.push(d);else if(Array.isArray(d))c=bn(r,d,p)||c;else if(g==="function")if(s){for(;typeof d=="function";)d=d();c=bn(r,Array.isArray(d)?d:[d],Array.isArray(p)?p:[p])||c}else r.push(d),c=!0;else{const v=String(d);p&&p.nodeType===3&&p.data===v?r.push(p):r.push(document.createTextNode(v))}}return c}function Dr(r,t,n=null){for(let s=0,c=t.length;s<c;s++)r.insertBefore(t[s],n)}function It(r,t,n,s){if(n===void 0)return r.textContent="";const c=s||document.createTextNode("");if(t.length){let h=!1;for(let u=t.length-1;u>=0;u--){const d=t[u];if(c!==d){const p=d.parentNode===r;!h&&!u?p?r.replaceChild(c,d):r.insertBefore(c,n):p&&d.remove()}else h=!0}}else r.insertBefore(c,n);return[c]}var zt=(r=>(r.FREE="free",r.STARTER="starter",r.PRO="pro",r.BUSINESS="business",r.ENTERPRISE="enterprise",r))(zt||{});const Oa={[zt.FREE]:{label:"Gratuit",price:"0 €",desc:"1 salon vocal, audio uniquement, jusqu’à 4 participants.",maxRooms:1,video:!1,screenShare:!1,participants:4,stats:!1,webhooks:!1,privateAccess:!1,customBranding:!1,dedicatedHosting:!1,prioritySupport:!1},[zt.STARTER]:{label:"Starter",price:"5 €",desc:"1 salon vocal, audio + vidéo + écran, jusqu’à 10 participants.",maxRooms:1,video:!0,screenShare:!0,participants:10,stats:!1,webhooks:!1,privateAccess:!1,customBranding:!1,dedicatedHosting:!1,prioritySupport:!1},[zt.PRO]:{label:"Pro",price:"19 €",desc:"3 salons, audio + vidéo + écran, jusqu’à 10 participants, statistiques simples.",maxRooms:3,video:!0,screenShare:!0,participants:10,stats:!0,webhooks:!1,privateAccess:!1,customBranding:!1,dedicatedHosting:!1,prioritySupport:!1},[zt.BUSINESS]:{label:"Business",price:"49 €",desc:"10 salons privés, accès par token, 20 participants, stats avancées, webhooks, personnalisation.",maxRooms:10,video:!0,screenShare:!0,participants:20,stats:!0,webhooks:!0,privateAccess:!0,customBranding:!0,dedicatedHosting:!1,prioritySupport:!1},[zt.ENTERPRISE]:{label:"Entreprise",price:"Sur devis",desc:"Salons illimités, intégration avancée, hébergement dédié, support prioritaire.",maxRooms:1/0,video:!0,screenShare:!0,participants:1/0,stats:!0,webhooks:!0,privateAccess:!0,customBranding:!0,dedicatedHosting:!0,prioritySupport:!0}};var Ma=K('<span class="text-xs text-red-500 mt-1 font-medium">Salle pleine (<!> max)'),Ia=K('<button><div class="flex flex-col"><span class="text-sm font-semibold"></span><span class="text-xs text-gray-500 dark:text-gray-400 group-hover:text-inherit"></span></div><div class="flex items-center gap-1 text-xs"><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"></path></svg><span>/');function za(r){var c;const t=((c=Oa[r.plan])==null?void 0:c.participants)??4,n=r.count>=t,s=r.joinedRoomId===r.room._id;return(()=>{var h=Ia(),u=h.firstChild,d=u.firstChild,p=d.nextSibling,g=u.nextSibling,v=g.firstChild,_=v.nextSibling,x=_.firstChild;return Ke(h,"click",n?void 0:r.onJoin),h.disabled=n,N(d,()=>r.room.name),N(p,()=>r.room.description),N(u,fe(Mt,{when:n,get children(){var R=Ma(),$=R.firstChild,P=$.nextSibling;return P.nextSibling,N(R,t,P),R}}),null),N(_,()=>r==null?void 0:r.count,x),N(_,t,null),Fe(()=>$e(h,`${r.fullScreen?"w-[10rem] h-[10rem]":"w-full"} text-left p-4 rounded-xl border transition-shadow shadow-sm flex items-center justify-between group ${s?"bg-blue-600 text-white border-blue-700 shadow-md":n?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-300 border-gray-300 dark:border-gray-600 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-200 dark:border-gray-600"}`)),h})()}Ct(["click"]);const Nr=va();function Ba(r){const t=["fr","en"],n=localStorage.getItem("lang"),s=()=>{const d=navigator.language.slice(0,2);return t.includes(d)?d:"en"},[c,h]=le(n||s()),u=d=>{h(d),localStorage.setItem("lang",d)};return fe(Nr.Provider,{value:{lang:c,setLang:u},get children(){return r.children}})}function $r(){const r=ya(Nr);if(!r)throw new Error("useLang must be used within a LangProvider");return r}const Zr={fr:{heroTitle:"Ajoutez un salon vocal interactif en un script.",heroSubtitle:"Talkizi transforme instantanément votre site en espace vocal vivant, sans effort.",cta:"Essayez Talkizi gratuitement",why:"Pourquoi Talkizi ?",whyPoints:[{title:"Ultra-léger",desc:"Seulement 10kb, rapide et sans impact.",icon:"⚡️"},{title:"Installation instantanée",desc:"Copiez, collez, parlez.",icon:"🚀"},{title:"Personnalisable",desc:"Adaptez-le à votre marque.",icon:"🎨"},{title:"Boostez l’engagement",desc:"Créez des communautés actives.",icon:"💬"}],love:"Ce qu'ils vont adorer",snippetTitle:"Ajoutez Talkizi en 1 ligne",pricingTitle:"Tarifs",plans:[{title:"Gratuit",price:"0 € /mois",desc:"1 salon vocal, audio uniquement, jusqu’à 4 participants."},{title:"Starter",price:"5 € /mois HT",desc:"1 salon vocal, audio + vidéo + écran, jusqu’à 10 participants."},{title:"Pro",price:"19 € /mois HT",desc:"3 salons, audio + vidéo + écran, jusqu’à 10 participants, statistiques simples."},{title:"Business",price:"49 € /mois HT",desc:"10 salons privés, accès par token, 20 participants, stats avancées, webhooks, personnalisation."},{title:"Entreprise",price:"Sur devis",desc:"Salons illimités, intégration avancée, hébergement dédié, support prioritaire."}],faqTitle:"FAQ",faq:[{q:"Talkizi impacte-t-il les performances ?",a:"Non, il est ultra-léger et optimisé pour un chargement rapide."},{q:"Puis-je personnaliser le widget ?",a:"Oui, la personnalisation est disponible dès le plan Pro."},{q:"Ai-je besoin d’un compte ?",a:"Non, vous pouvez l’intégrer et l’essayer immédiatement, sans création de compte."}],finalCta:"Prêt à parler ? Essayez gratuitement !",legal:{title:"Mentions légales",editor:"Éditeur du site",editorDetails:"Le site Talkizi est édité par :",talkiziInfo:"Talkizi",siret:"SIRET : 83747616700031",email:"Email : contact@talkizi.com",hosting:"Hébergement",hostDetails:"Le site est hébergé par :",hetznerAddress:"Industriestr. 25 91710 Gunzenhausen, Germany",ovhAddress:"2 rue Kellermann – 59100 Roubaix – France",ip:"Propriété intellectuelle",ipText:"Tous les éléments du site Talkizi, y compris les textes, images, graphismes, logo, icônes, sons, logiciels, sont protégés par les lois en vigueur sur la propriété intellectuelle...",liability:"Responsabilité",liabilityText:"Talkizi s’efforce de fournir sur le site des informations aussi précises que possible...",contact:"Contact",contactText:"Pour toute question ou signalement, vous pouvez nous contacter à :"},terms:{title:"Conditions Générales d'Utilisation",sections:[{title:"1. Objet",content:"Les présentes Conditions Générales d'Utilisation (CGU) ont pour objet de définir les modalités et conditions dans lesquelles Talkizi met à disposition son service de salons vocaux et vidéo via un widget embarqué sur des sites tiers."},{title:"2. Acceptation",content:"En intégrant ou en utilisant le widget Talkizi, vous acceptez sans réserve les présentes CGU. Celles-ci peuvent être modifiées à tout moment par Talkizi ; il vous appartient de les consulter régulièrement."},{title:"3. Description du service",content:"Talkizi permet d’ajouter un salon vocal ou vidéo à un site web via un simple script. Les utilisateurs peuvent rejoindre un salon, échanger en temps réel par la voix, la vidéo ou le partage d’écran selon le plan choisi.",important:"Important : les flux audio, vidéo et écran transitent exclusivement en peer-to-peer via WebRTC et ne passent pas par les serveurs de Talkizi. Aucun enregistrement ni traitement des flux n’est effectué."},{title:"4. Engagements de l'utilisateur",content:"L'utilisateur s’engage à ne pas utiliser le service à des fins illicites, diffamatoires, ou portant atteinte aux droits d’autrui. Il est seul responsable des contenus échangés."},{title:"5. Responsabilité",content:"Talkizi fournit un service technique d’intermédiation de communication, sans surveillance ni contrôle du contenu échangé. Talkizi décline toute responsabilité en cas de litige entre utilisateurs ou en cas d’usage frauduleux."},{title:"6. Propriété",content:"Le code du widget, les interfaces et l’infrastructure sont la propriété exclusive de Talkizi. Toute reproduction, modification ou réutilisation sans autorisation est interdite."},{title:"7. Données personnelles",content:"Talkizi ne collecte aucune donnée personnelle via les salons vocaux/vidéo. Seules des données techniques nécessaires au fonctionnement du service (comme l’adresse IP pour établir une connexion WebRTC) sont temporairement utilisées sans stockage persistant."},{title:"8. Droit applicable",content:"Les présentes CGU sont soumises au droit français. Tout litige relatif à leur interprétation ou exécution sera de la compétence exclusive des tribunaux français."},{title:"9. Contact",content:"Pour toute question relative aux CGU, vous pouvez contacter :",email:"contact@talkizi.com"}]},privacy:{title:"Politique de confidentialité",sections:[{title:"1. Introduction",content:"Talkizi s'engage à protéger votre vie privée. Cette politique de confidentialité décrit la manière dont nous collectons, utilisons et protégeons vos informations personnelles lorsque vous utilisez notre site et notre widget vocal."},{title:"2. Données collectées",content:"Nous collectons uniquement les données strictement nécessaires au bon fonctionnement du service. Aucune donnée personnelle n’est requise pour accéder ou utiliser le widget Talkizi."},{title:"3. Utilisation des données",content:"Les éventuelles données collectées (logs techniques, adresse IP, préférences de langue) sont utilisées exclusivement pour :",list:["Assurer la sécurité et la stabilité du service","Améliorer l’expérience utilisateur","Analyser l’utilisation du site de façon anonyme"]},{title:"4. Partage des données",content:"Aucune donnée n’est vendue ou partagée à des tiers à des fins commerciales. Les données peuvent être transmises uniquement en cas d’obligation légale ou judiciaire."},{title:"5. Cookies",content:"Le site Talkizi utilise uniquement des cookies fonctionnels nécessaires au bon fonctionnement du service. Aucun cookie publicitaire ou de tracking tiers n’est utilisé."},{title:"6. Flux vocaux et vidéo",content:"Tous les flux vocaux et vidéo utilisés par Talkizi sont chiffrés et transmis en peer-to-peer via WebRTC. Ils ne transitent à aucun moment par les serveurs de Talkizi, garantissant une confidentialité maximale des échanges."},{title:"7. Vos droits",content:"Conformément au RGPD, vous disposez d’un droit d’accès, de rectification, de suppression et de portabilité de vos données. Pour toute demande, contactez-nous à :",email:"contact@talkizi.com"},{title:"8. Contact",content:"Pour toute question concernant cette politique de confidentialité, vous pouvez nous contacter à l'adresse suivante :",email:"contact@talkizi.com"}]},footer:{rights:"Tous droits réservés.",legal:"Mentions légales",terms:"Conditions",privacy:"Confidentialité"},header:{join:"Rejoindre",dashboard:"Mon espace"},config:{apiKey:"Clé API",show:"Afficher",hide:"Masquer",copy:"Copier",copied:"Copié !",rooms:"Rooms",roomName:"Nom de la room",description:"Description",addRoom:"+ Ajouter une room",remove:"Supprimer",urlsAllowed:"URLs autorisées",urlInvalid:"URL invalide",addUrl:"+ Ajouter une URL",plan:"Plan",free:"Gratuit",pro:"Pro",enterprise:"Entreprise",saveConfig:"💾 Sauvegarder",savedSuccess:"Configuration sauvegardée avec succès !",savedError:"Erreur lors de la sauvegarde",saveDisabledNoChange:"Aucune modification à sauvegarder",invalidUrls:"Une ou plusieurs URLs sont invalides",roomTrad:{options:{video:"Vidéo",screenShare:"Partage d'écran"}}},login:{subtitle:"Connexion sécurisée pour accéder à Talkizi.",google:"Se connecter avec Google",redirecting:"Redirection...",footer:"© 2025 Talkizi. Tous droits réservés."},docs:{title:"Documentation du widget Talkizi",intro:"Intégrez Talkizi en quelques secondes dans votre site HTML, React, Vue ou SolidJS.",advancedTitle:"Options avancées",advancedText:"Vous pouvez personnaliser le comportement du widget avec des attributs HTML.",keyDesc:"Clé publique de votre projet (obtenue sur le dashboard Talkizi).",showDesc:"Aficher ou masquer le widget par défaut.",apiTitle:"API JavaScript",apiIntro:"Le widget expose une API JS globale pour interagir avec lui :",faqTitle:"FAQ",faq:[{q:"Est-ce que le widget fonctionne sur mobile ?",a:"Oui, il est responsive et optimisé mobile."},{q:"Puis-je changer la langue du widget ?",a:"Oui, via une option dans le dashboard ou `setOptions()`."}],supportTitle:"Besoin d'aide ?",supportText:"Notre équipe vous répond dans les 24h ouvrées."},errors:{cardMissing:"Carte non trouvée ou pas accessible.",NO_PLAN_SPECIFIED:"Aucun plan spécifié.",UNKNOWN_PLAN:"Plan inconnu.",TOO_MANY_ROOMS:"Nombre de salons dépassé pour ce plan.",VIDEO_NOT_ALLOWED:"La vidéo n’est pas autorisée dans ce plan.",SCREENSHARE_NOT_ALLOWED:"Le partage d’écran n’est pas autorisé dans ce plan.",WEBHOOKS_NOT_ALLOWED:"Les webhooks ne sont pas disponibles dans ce plan.",PRIVATE_ACCESS_NOT_ALLOWED:"L’accès privé par token n’est pas autorisé dans ce plan.",CUSTOM_BRANDING_NOT_ALLOWED:"La personnalisation visuelle n’est pas disponible dans ce plan.",DEDICATED_HOSTING_NOT_ALLOWED:"L’hébergement dédié n’est pas inclus dans ce plan.",PRIORITY_SUPPORT_NOT_ALLOWED:"Le support prioritaire n’est pas inclus dans ce plan.",STATS_NOT_ALLOWED:"Ce plan ne permet pas l’option de statistiques sélectionnée."},planChange:{title:"💳 Vous avez changé de plan.",newPlan:"Nouveau plan",price:"Prix",chargeNotice:"💰 Le renouvellement sera facturé à l’issue de votre abonnement en cours.",priceExclVAT:"{{price}} /mois HT",priceInclVAT:"{{price}} /mois",priceOnRequest:"Sur devis"},payment:{title:"Paiement",cardAlreadyAdded:"Une carte est déjà enregistrée.",cardLabel:"Carte",expirationLabel:"Expiration",statusLabel:"Statut",addedOnLabel:"Ajoutée le",updateCardButton:"Mettre à jour ma carte",explanation1:"Pour activer ton compte (même pour la version gratuite), tu dois ajouter une carte bancaire. Aucune somme ne sera débitée pour l'offre gratuite. Cela permet uniquement de vérifier ton identité et d'éviter les abus.",explanation2:"L'ajout de ta carte prend moins d'une minute via notre partenaire sécurisé Stripe. Tu pourras ensuite gérer tes abonnements ou passer à une offre payante quand tu le souhaites.",addCardButton:"Ajouter ma carte maintenant",errorCreatingSession:"Une erreur est survenue, merci de réessayer."},dashboard:{loading:"Chargement en cours...",menu:"Menu",closeMenu:"Fermer le menu",sidebarTitle:"Mon espace",config:"Config",documentation:"Documentation",payment:"Paiement",account:"Mon compte",nameLabel:"Nom",emailLabel:"Email",idLabel:"ID",logout:"Se déconnecter",referralTitle:"Parrainage",referralLinkLabel:"Ton lien de parrainage",referralCountLabel:"Nombre de filleuls",earningsLabel:"Gains cumulés",copy:"Copier",copied:"Copié !",withdraw:"Demander un retrait",withdrawing:"Retrait en cours...",withdrawSuccess:"Ta demande de retrait a été envoyée !",withdrawError:"Une erreur est survenue pendant le retrait.",referralInfo:"Pour chaque filleul qui prend un abonnement, vous recevez 10% du montant HT chaque mois. Exemple : si votre filleul paie 19€ HT/mois pendant 2 ans → vous touchez environ 45,60€. Le retrait est possible à partir de 50€ cumulés."},modal:{openButton:"Salons vocaux",title:"Salons",currentRoom:"Salon actuel :",noRoom:"Aucun",selectRoom:"Sélectionne un salon.",connected:"Connecté ✅",notConnected:"Non connecté",leave:"Quitter",join:"Rejoindre vocal",defaultRoom:"Salon"},roomActions:{micOn:"Micro on",micOff:"Micro off",camOn:"Caméra on",camOff:"Caméra off",screenOn:"Écran on",screenOff:"Écran off",leave:"Quitter"}},en:{heroTitle:"Add an interactive voice room with one script.",heroSubtitle:"Talkizi instantly turns your site into a vibrant voice space — effortlessly.",cta:"Try Talkizi for free",why:"Why Talkizi?",whyPoints:[{title:"Ultra-lightweight",desc:"Only 10kb, fast and seamless.",icon:"⚡️"},{title:"Instant setup",desc:"Copy, paste, talk.",icon:"🚀"},{title:"Customizable",desc:"Match your brand.",icon:"🎨"},{title:"Boost engagement",desc:"Build active communities.",icon:"💬"}],love:"What they’ll love",snippetTitle:"Add Talkizi in 1 line",pricingTitle:"Pricing",plans:[{title:"Free",price:"€0 /month",desc:"1 voice room, audio only, up to 4 participants."},{title:"Starter",price:"€5 /monthn excl. VAT",desc:"1 room, audio + video + screen, up to 10 participants."},{title:"Pro",price:"€19 /month excl. VAT",desc:"3 rooms, audio + video + screen, up to 10 participants, basic stats."},{title:"Business",price:"€49 /month excl. VAT",desc:"10 private rooms, token access, 20 participants, advanced stats, webhooks, branding."},{title:"Enterprise",price:"Custom pricing",desc:"Unlimited rooms, advanced integration, dedicated hosting, priority support."}],faqTitle:"FAQ",faq:[{q:"Does Talkizi impact performance?",a:"No, it’s ultra-light and optimized for fast loading."},{q:"Can I customize the widget?",a:"Yes, customization is available starting from the Pro plan."},{q:"Do I need an account?",a:"No, you can integrate and try it instantly without creating an account."}],finalCta:"Ready to talk? Try it free!",legal:{title:"Legal notice",editor:"Site publisher",editorDetails:"The Talkizi website is published by:",talkiziInfo:"Talkizi",siret:"SIRET: 83747616700031",email:"Email: contact@talkizi.com",hosting:"Hosting",hostDetails:"The website is hosted by:",hetznerAddress:"Industriestr. 25 91710 Gunzenhausen, Germany",ovhAddress:"2 rue Kellermann – 59100 Roubaix – France",ip:"Intellectual property",ipText:"All elements of the Talkizi website, including texts, images, graphics, logos, icons, sounds, and software, are protected by applicable intellectual property laws...",liability:"Liability",liabilityText:"Talkizi strives to provide the most accurate information possible on its website...",contact:"Contact",contactText:"For any questions or reports, you can contact us at:"},terms:{title:"Terms of Use",sections:[{title:"1. Purpose",content:"These Terms of Use define the terms and conditions under which Talkizi provides its voice and video room service via an embedded widget on third-party websites."},{title:"2. Acceptance",content:"By embedding or using the Talkizi widget, you unreservedly accept these Terms of Use. They may be changed at any time by Talkizi; it is your responsibility to consult them regularly."},{title:"3. Service Description",content:"Talkizi allows you to add a voice or video room to a website using a simple script. Users can join a room and communicate in real time via voice, video, or screen sharing depending on the plan.",important:"Important: Audio, video, and screen streams are transmitted exclusively peer-to-peer via WebRTC and never pass through Talkizi’s servers. No recording or processing is done."},{title:"4. User Obligations",content:"The user agrees not to use the service for illegal, defamatory purposes or in violation of others' rights. They are solely responsible for the content exchanged."},{title:"5. Liability",content:"Talkizi provides a technical communication service with no monitoring or control over the content exchanged. Talkizi accepts no responsibility in the event of disputes or fraudulent use."},{title:"6. Ownership",content:"The widget code, interfaces, and infrastructure are the exclusive property of Talkizi. Any reproduction, modification, or reuse without permission is prohibited."},{title:"7. Personal Data",content:"Talkizi does not collect any personal data via its voice/video rooms. Only technical data necessary for the service (e.g. IP addresses to establish WebRTC connections) is temporarily used without persistent storage."},{title:"8. Governing Law",content:"These Terms are governed by French law. Any disputes relating to their interpretation or execution fall under the exclusive jurisdiction of French courts."},{title:"9. Contact",content:"For any questions related to these Terms of Use, contact:",email:"contact@talkizi.com"}]},privacy:{title:"Privacy Policy",sections:[{title:"1. Introduction",content:"Talkizi is committed to protecting your privacy. This privacy policy describes how we collect, use, and protect your personal information when using our website and voice widget."},{title:"2. Data Collected",content:"We only collect data strictly necessary for the proper operation of the service. No personal data is required to access or use the Talkizi widget."},{title:"3. Use of Data",content:"Collected data (technical logs, IP address, language preferences) is used exclusively for:",list:["Ensuring service security and stability","Improving user experience","Analyzing site usage anonymously"]},{title:"4. Data Sharing",content:"No data is sold or shared with third parties for commercial purposes. Data may only be transmitted when legally or judicially required."},{title:"5. Cookies",content:"The Talkizi website only uses functional cookies necessary for proper service operation. No advertising or third-party tracking cookies are used."},{title:"6. Voice and Video Streams",content:"All voice and video streams used by Talkizi are encrypted and transmitted peer-to-peer via WebRTC. They never pass through Talkizi servers, ensuring maximum confidentiality."},{title:"7. Your Rights",content:"In accordance with GDPR, you have the right to access, rectify, delete, and transfer your data. For any request, contact us at:",email:"contact@talkizi.com"},{title:"8. Contact",content:"For any questions regarding this privacy policy, you can contact us at:",email:"contact@talkizi.com"}]},footer:{rights:"All rights reserved.",legal:"Legal notice",terms:"Terms",privacy:"Privacy"},header:{join:"Join",dashboard:"My dashboard"},config:{apiKey:"API Key",show:"Show",hide:"Hide",copy:"Copy",copied:"Copied!",rooms:"Rooms",roomName:"Room name",description:"Description",addRoom:"+ Add a room",remove:"Remove",urlsAllowed:"Allowed URLs",urlInvalid:"Invalid URL",addUrl:"+ Add a URL",plan:"Plan",free:"Free",pro:"Pro",enterprise:"Enterprise",saveConfig:"💾 Save",savedSuccess:"Configuration saved successfully!",savedError:"Failed to save configuration.",saveDisabledNoChange:"No changes to save",invalidUrls:"One or more URLs are invalid",roomTrad:{options:{video:"Video",screenShare:"Screen Share"}}},login:{subtitle:"Secure login to access Talkizi.",google:"Sign in with Google",redirecting:"Redirecting...",footer:"© 2025 Talkizi. All rights reserved."},docs:{title:"Talkizi Widget Documentation",intro:"Integrate Talkizi in seconds into your HTML, React, Vue or SolidJS website.",advancedTitle:"Advanced Options",advancedText:"You can customize the widget's behavior using HTML attributes.",keyDesc:"Your project’s public key (available in the Talkizi dashboard).",showDesc:"Whether to show the widget by default (true/false).",apiTitle:"JavaScript API",apiIntro:"The widget exposes a global JavaScript API you can interact with:",faqTitle:"FAQ",faq:[{q:"Does the widget work on mobile?",a:"Yes, it is fully responsive and mobile-optimized."},{q:"Can I change the widget's language?",a:"Yes, via an option in the dashboard or using `setOptions()`."}],supportTitle:"Need help?",supportText:"Our team will get back to you within 24 business hours."},errors:{cardMissing:"Card not found or invalid",NO_PLAN_SPECIFIED:"No plan specified.",UNKNOWN_PLAN:"Unknown plan.",TOO_MANY_ROOMS:"Too many rooms for this plan.",VIDEO_NOT_ALLOWED:"Video is not allowed with this plan.",SCREENSHARE_NOT_ALLOWED:"Screen sharing is not allowed with this plan.",WEBHOOKS_NOT_ALLOWED:"Webhooks are not allowed with this plan.",PRIVATE_ACCESS_NOT_ALLOWED:"Private token access is not allowed with this plan.",CUSTOM_BRANDING_NOT_ALLOWED:"Custom branding is not allowed with this plan.",DEDICATED_HOSTING_NOT_ALLOWED:"Dedicated hosting is not available with this plan.",PRIORITY_SUPPORT_NOT_ALLOWED:"Priority support is not included in this plan.",STATS_NOT_ALLOWED:"This plan does not allow the selected statistics option."},planChange:{title:"💳 You changed your plan.",newPlan:"New plan",price:"Price",chargeNotice:"💰 You won’t be charged until your current subscription ends.",priceExclVAT:"{{price}} /month (excluding VAT)",priceInclVAT:"{{price}} /month",priceOnRequest:"On request"},payment:{title:"Payment",cardAlreadyAdded:"A card is already on file.",cardLabel:"Card",expirationLabel:"Expiration",statusLabel:"Status",addedOnLabel:"Added on",updateCardButton:"Update my card",explanation1:"To activate your account (even for the free plan), you must add a credit card. No charges will be made for the free offer. This is solely to verify your identity and prevent abuse.",explanation2:"Adding your card takes less than a minute via our secure partner Stripe. You'll then be able to manage your subscriptions or upgrade at any time.",addCardButton:"Add my card now",errorCreatingSession:"An error occurred, please try again."},dashboard:{loading:"Loading...",menu:"Menu",closeMenu:"Close menu",sidebarTitle:"My dashboard",config:"Settings",documentation:"Documentation",payment:"Payment",account:"My account",nameLabel:"Name",emailLabel:"Email",idLabel:"ID",logout:"Log out",referralTitle:"Referral Program",referralLinkLabel:"Your referral link",referralCountLabel:"Number of referrals",earningsLabel:"Total earnings",copy:"Copy",copied:"Copied!",withdraw:"Request Withdrawal",withdrawing:"Withdrawing...",withdrawSuccess:"Your withdrawal request has been sent!",withdrawError:"An error occurred during withdrawal.",referralInfo:"For each person you refer who subscribes, you receive 10% of the pre-tax amount every month. Example: if your referral pays €19 excl. tax/month for 2 years → you earn around €45.60. Withdrawals available once you reach €50."},modal:{openButton:"Voice rooms",title:"Rooms",currentRoom:"Current room:",noRoom:"None",selectRoom:"Select a room.",connected:"Connected ✅",notConnected:"Not connected",leave:"Leave",join:"Join voice",defaultRoom:"Room"},roomActions:{micOn:"Mic on",micOff:"Mic off",camOn:"Camera on",camOff:"Camera off",screenOn:"Screen on",screenOff:"Screen off",leave:"Leave"}}};var Da=K('<button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor></svg><span>'),Fr=K("<button><span>"),Na=K('<button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 16l4-4m0 0l-4-4m4 4H7"></path></svg><span>'),$a=K('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5v14l12-7L9 5z"></svg>',!1,!0,!1),Za=K('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 5l14 14M15 10v4m0 0H9m6 0V6m0 0h6"></svg>',!1,!0,!1),Fa=K('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 0 1-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 0 0-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409">'),Ua=K('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z">'),ja=K('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M3 3v18h18V3H3zm9 4v10M7 12h10">'),qa=K('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M3 3v18h18V3H3z">');function Va(r){const{lang:t}=$r(),n=()=>Zr[t()];return[(()=>{var s=Da(),c=s.firstChild,h=c.nextSibling;return Ke(s,"click",r.onToggleMute),N(c,(()=>{var u=we(()=>!!r.isMuted);return()=>u()?$a():Za()})()),N(h,(()=>{var u=we(()=>!!r.isMuted);return()=>u()?n().roomActions.micOff:n().roomActions.micOn})()),Fe(()=>$e(s,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${r.fullScreen?"w-auto":"w-[48%]"}`)),s})(),(()=>{var s=Fr(),c=s.firstChild;return Ke(s,"click",r.onToggleVideoEnabled),N(s,(()=>{var h=we(()=>!!r.isVideoEnabled);return()=>h()?Fa():Ua()})(),c),N(c,(()=>{var h=we(()=>!!r.isVideoEnabled);return()=>h()?n().roomActions.camOff:n().roomActions.camOn})()),Fe(()=>$e(s,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${r.fullScreen?"w-auto":"w-[48%]"}`)),s})(),(()=>{var s=Fr(),c=s.firstChild;return Ke(s,"click",r.onToggleScreenShare),N(s,(()=>{var h=we(()=>!!r.isScreenSharing);return()=>h()?ja():qa()})(),c),N(c,(()=>{var h=we(()=>!!r.isScreenSharing);return()=>h()?n().roomActions.screenOff:n().roomActions.screenOn})()),Fe(()=>$e(s,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${r.fullScreen?"w-auto":"w-[48%]"}`)),s})(),(()=>{var s=Na(),c=s.firstChild,h=c.nextSibling;return Ke(s,"click",r.onLeave),N(h,()=>n().roomActions.leave),Fe(()=>$e(s,`inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-medium px-4 py-2 rounded-lg shadow transition ${r.fullScreen?"w-auto":"w-[48%]"}`)),s})()]}Ct(["click"]);const it=Object.create(null);it.open="0",it.close="1",it.ping="2",it.pong="3",it.message="4",it.upgrade="5",it.noop="6";const Ai=Object.create(null);Object.keys(it).forEach(r=>{Ai[it[r]]=r});const xn={type:"error",data:"parser error"},Ur=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",jr=typeof ArrayBuffer=="function",qr=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,Cn=({type:r,data:t},n,s)=>Ur&&t instanceof Blob?n?s(t):Vr(t,s):jr&&(t instanceof ArrayBuffer||qr(t))?n?s(t):Vr(new Blob([t]),s):s(it[r]+(t||"")),Vr=(r,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(r)};function Hr(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let Tn;function Ha(r,t){if(Ur&&r.data instanceof Blob)return r.data.arrayBuffer().then(Hr).then(t);if(jr&&(r.data instanceof ArrayBuffer||qr(r.data)))return t(Hr(r.data));Cn(r,!1,n=>{Tn||(Tn=new TextEncoder),t(Tn.encode(n))})}const Wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Wr.length;r++)Xt[Wr.charCodeAt(r)]=r;const Wa=r=>{let t=r.length*.75,n=r.length,s,c=0,h,u,d,p;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const g=new ArrayBuffer(t),v=new Uint8Array(g);for(s=0;s<n;s+=4)h=Xt[r.charCodeAt(s)],u=Xt[r.charCodeAt(s+1)],d=Xt[r.charCodeAt(s+2)],p=Xt[r.charCodeAt(s+3)],v[c++]=h<<2|u>>4,v[c++]=(u&15)<<4|d>>2,v[c++]=(d&3)<<6|p&63;return g},Ga=typeof ArrayBuffer=="function",wn=(r,t)=>{if(typeof r!="string")return{type:"message",data:Gr(r,t)};const n=r.charAt(0);return n==="b"?{type:"message",data:Ka(r.substring(1),t)}:Ai[n]?r.length>1?{type:Ai[n],data:r.substring(1)}:{type:Ai[n]}:xn},Ka=(r,t)=>{if(Ga){const n=Wa(r);return Gr(n,t)}else return{base64:!0,data:r}},Gr=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},Kr="",Ya=(r,t)=>{const n=r.length,s=new Array(n);let c=0;r.forEach((h,u)=>{Cn(h,!1,d=>{s[u]=d,++c===n&&t(s.join(Kr))})})},Ja=(r,t)=>{const n=r.split(Kr),s=[];for(let c=0;c<n.length;c++){const h=wn(n[c],t);if(s.push(h),h.type==="error")break}return s};function Xa(){return new TransformStream({transform(r,t){Ha(r,n=>{const s=n.length;let c;if(s<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,s);else if(s<65536){c=new Uint8Array(3);const h=new DataView(c.buffer);h.setUint8(0,126),h.setUint16(1,s)}else{c=new Uint8Array(9);const h=new DataView(c.buffer);h.setUint8(0,127),h.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(c[0]|=128),t.enqueue(c),t.enqueue(n)})}})}let Sn;function Oi(r){return r.reduce((t,n)=>t+n.length,0)}function Mi(r,t){if(r[0].length===t)return r.shift();const n=new Uint8Array(t);let s=0;for(let c=0;c<t;c++)n[c]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),n}function Qa(r,t){Sn||(Sn=new TextDecoder);const n=[];let s=0,c=-1,h=!1;return new TransformStream({transform(u,d){for(n.push(u);;){if(s===0){if(Oi(n)<1)break;const p=Mi(n,1);h=(p[0]&128)===128,c=p[0]&127,c<126?s=3:c===126?s=1:s=2}else if(s===1){if(Oi(n)<2)break;const p=Mi(n,2);c=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),s=3}else if(s===2){if(Oi(n)<8)break;const p=Mi(n,8),g=new DataView(p.buffer,p.byteOffset,p.length),v=g.getUint32(0);if(v>Math.pow(2,21)-1){d.enqueue(xn);break}c=v*Math.pow(2,32)+g.getUint32(4),s=3}else{if(Oi(n)<c)break;const p=Mi(n,c);d.enqueue(wn(h?p:Sn.decode(p),t)),s=0}if(c===0||c>r){d.enqueue(xn);break}}}})}const Yr=4;function ye(r){if(r)return ec(r)}function ec(r){for(var t in ye.prototype)r[t]=ye.prototype[t];return r}ye.prototype.on=ye.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this},ye.prototype.once=function(r,t){function n(){this.off(r,n),t.apply(this,arguments)}return n.fn=t,this.on(r,n),this},ye.prototype.off=ye.prototype.removeListener=ye.prototype.removeAllListeners=ye.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+r];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,c=0;c<n.length;c++)if(s=n[c],s===t||s.fn===t){n.splice(c,1);break}return n.length===0&&delete this._callbacks["$"+r],this},ye.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+r],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,c=n.length;s<c;++s)n[s].apply(this,t)}return this},ye.prototype.emitReserved=ye.prototype.emit,ye.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},ye.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Ii=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),je=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),tc="arraybuffer";function mu(){}function Jr(r,...t){return t.reduce((n,s)=>(r.hasOwnProperty(s)&&(n[s]=r[s]),n),{})}const ic=je.setTimeout,nc=je.clearTimeout;function zi(r,t){t.useNativeTimers?(r.setTimeoutFn=ic.bind(je),r.clearTimeoutFn=nc.bind(je)):(r.setTimeoutFn=je.setTimeout.bind(je),r.clearTimeoutFn=je.clearTimeout.bind(je))}const rc=1.33;function sc(r){return typeof r=="string"?oc(r):Math.ceil((r.byteLength||r.size)*rc)}function oc(r){let t=0,n=0;for(let s=0,c=r.length;s<c;s++)t=r.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function Xr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ac(r){let t="";for(let n in r)r.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return t}function cc(r){let t={},n=r.split("&");for(let s=0,c=n.length;s<c;s++){let h=n[s].split("=");t[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}return t}class lc extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class Pn extends ye{constructor(t){super(),this.writable=!1,zi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new lc(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=wn(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=ac(t);return n.length?"?"+n:""}}class hc extends Pn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Ja(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ya(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Xr()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Qr=!1;try{Qr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const uc=Qr;function dc(){}class fc extends hc{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(c,h)=>{this.onError("xhr post error",c,h)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class nt extends ye{constructor(t,n,s){super(),this.createRequest=t,zi(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=Jr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&s.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var c;s.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=nt.requestsCount++,nt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=dc,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete nt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(nt.requestsCount=0,nt.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",es);else if(typeof addEventListener=="function"){const r="onpagehide"in je?"pagehide":"unload";addEventListener(r,es,!1)}}function es(){for(let r in nt.requests)nt.requests.hasOwnProperty(r)&&nt.requests[r].abort()}const pc=function(){const r=ts({xdomain:!1});return r&&r.responseType!==null}();class mc extends fc{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=pc&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new nt(ts,this.uri(),t)}}function ts(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||uc))return new XMLHttpRequest}catch{}if(!t)try{return new je[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const is=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _c extends Pn{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=is?{}:Jr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],c=n===t.length-1;Cn(s,this.supportsBinary,h=>{try{this.doWrite(s,h)}catch{}c&&Ii(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Xr()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const kn=je.WebSocket||je.MozWebSocket;class gc extends _c{createSocket(t,n,s){return is?new kn(t,n,s):n?new kn(t,n):new kn(t)}doWrite(t,n){this.ws.send(n)}}class vc extends Pn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Qa(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),c=Xa();c.readable.pipeTo(t.writable),this._writer=c.writable.getWriter();const h=()=>{s.read().then(({done:d,value:p})=>{d||(this.onPacket(p),h())}).catch(d=>{})};h();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],c=n===t.length-1;this._writer.write(s).then(()=>{c&&Ii(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const yc={websocket:gc,webtransport:vc,polling:mc},bc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ln(r){if(r.length>8e3)throw"URI too long";const t=r,n=r.indexOf("["),s=r.indexOf("]");n!=-1&&s!=-1&&(r=r.substring(0,n)+r.substring(n,s).replace(/:/g,";")+r.substring(s,r.length));let c=bc.exec(r||""),h={},u=14;for(;u--;)h[xc[u]]=c[u]||"";return n!=-1&&s!=-1&&(h.source=t,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=Cc(h,h.path),h.queryKey=Tc(h,h.query),h}function Cc(r,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Tc(r,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,c,h){c&&(n[c]=h)}),n}const En=typeof addEventListener=="function"&&typeof removeEventListener=="function",Bi=[];En&&addEventListener("offline",()=>{Bi.forEach(r=>r())},!1);class gt extends ye{constructor(t,n){if(super(),this.binaryType=tc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=Ln(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Ln(n.host).host);zi(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const c=s.prototype.name;this.transports.push(c),this._transportsByName[c]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=cc(this.opts.query)),En&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Bi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Yr,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&gt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",gt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const c=this.writeBuffer[s].data;if(c&&(n+=sc(c)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ii(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,c){if(typeof n=="function"&&(c=n,n=void 0),typeof s=="function"&&(c=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const h={type:t,data:n,options:s};this.emitReserved("packetCreate",h),this.writeBuffer.push(h),c&&this.once("flush",c),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(gt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),En&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Bi.indexOf(this._offlineEventListener);s!==-1&&Bi.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}gt.protocol=Yr;class wc extends gt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;gt.priorWebsocketSuccess=!1;const c=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",_=>{if(!s)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;gt.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=n.name,this.emitReserved("upgradeError",x)}}))};function h(){s||(s=!0,v(),n.close(),n=null)}const u=_=>{const x=new Error("probe error: "+_);x.transport=n.name,h(),this.emitReserved("upgradeError",x)};function d(){u("transport closed")}function p(){u("socket closed")}function g(_){n&&_.name!==n.name&&h()}const v=()=>{n.removeListener("open",c),n.removeListener("error",u),n.removeListener("close",d),this.off("close",p),this.off("upgrading",g)};n.once("open",c),n.once("error",u),n.once("close",d),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Sc=class extends wc{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(c=>yc[c]).filter(c=>!!c)),super(t,s)}};function Pc(r,t="",n){let s=r;n=n||typeof location<"u"&&location,r==null&&(r=n.protocol+"//"+n.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=n.protocol+r:r=n.host+r),/^(https?|wss?):\/\//.test(r)||(typeof n<"u"?r=n.protocol+"//"+r:r="https://"+r),s=Ln(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const h=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+h+":"+s.port+t,s.href=s.protocol+"://"+h+(n&&n.port===s.port?"":":"+s.port),s}const kc=typeof ArrayBuffer=="function",Lc=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,ns=Object.prototype.toString,Ec=typeof Blob=="function"||typeof Blob<"u"&&ns.call(Blob)==="[object BlobConstructor]",Rc=typeof File=="function"||typeof File<"u"&&ns.call(File)==="[object FileConstructor]";function Rn(r){return kc&&(r instanceof ArrayBuffer||Lc(r))||Ec&&r instanceof Blob||Rc&&r instanceof File}function Di(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let n=0,s=r.length;n<s;n++)if(Di(r[n]))return!0;return!1}if(Rn(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Di(r.toJSON(),!0);for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&Di(r[n]))return!0;return!1}function Ac(r){const t=[],n=r.data,s=r;return s.data=An(n,t),s.attachments=t.length,{packet:s,buffers:t}}function An(r,t){if(!r)return r;if(Rn(r)){const n={_placeholder:!0,num:t.length};return t.push(r),n}else if(Array.isArray(r)){const n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=An(r[s],t);return n}else if(typeof r=="object"&&!(r instanceof Date)){const n={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=An(r[s],t));return n}return r}function Oc(r,t){return r.data=On(r.data,t),delete r.attachments,r}function On(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let n=0;n<r.length;n++)r[n]=On(r[n],t);else if(typeof r=="object")for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=On(r[n],t));return r}const Mc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ic=5;var H;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(H||(H={}));class zc{constructor(t){this.replacer=t}encode(t){return(t.type===H.EVENT||t.type===H.ACK)&&Di(t)?this.encodeAsBinary({type:t.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===H.BINARY_EVENT||t.type===H.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Ac(t),s=this.encodeAsString(n.packet),c=n.buffers;return c.unshift(s),c}}function rs(r){return Object.prototype.toString.call(r)==="[object Object]"}class Mn extends ye{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===H.BINARY_EVENT;s||n.type===H.BINARY_ACK?(n.type=s?H.EVENT:H.ACK,this.reconstructor=new Bc(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Rn(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(H[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===H.BINARY_EVENT||s.type===H.BINARY_ACK){const h=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const u=t.substring(h,n);if(u!=Number(u)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(u)}if(t.charAt(n+1)==="/"){const h=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(h,n)}else s.nsp="/";const c=t.charAt(n+1);if(c!==""&&Number(c)==c){const h=n+1;for(;++n;){const u=t.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===t.length)break}s.id=Number(t.substring(h,n+1))}if(t.charAt(++n)){const h=this.tryParse(t.substr(n));if(Mn.isPayloadValid(s.type,h))s.data=h;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case H.CONNECT:return rs(n);case H.DISCONNECT:return n===void 0;case H.CONNECT_ERROR:return typeof n=="string"||rs(n);case H.EVENT:case H.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Mc.indexOf(n[0])===-1);case H.ACK:case H.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Bc{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Oc(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Dc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mn,Encoder:zc,get PacketType(){return H},protocol:Ic},Symbol.toStringTag,{value:"Module"}));function Ye(r,t,n){return r.on(t,n),function(){r.off(t,n)}}const Nc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ss extends ye{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ye(t,"open",this.onopen.bind(this)),Ye(t,"packet",this.onpacket.bind(this)),Ye(t,"error",this.onerror.bind(this)),Ye(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,c,h;if(Nc.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const u={type:H.EVENT,data:n};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const v=this.ids++,_=n.pop();this._registerAckCallback(v,_),u.id=v}const d=(c=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||c===void 0?void 0:c.writable,p=this.connected&&!(!((h=this.io.engine)===null||h===void 0)&&h._hasPingExpired());return this.flags.volatile&&!d||(p?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(t,n){var s;const c=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(c===void 0){this.acks[t]=n;return}const h=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);n.call(this,new Error("operation has timed out"))},c),u=(...d)=>{this.io.clearTimeoutFn(h),n.apply(this,d)};u.withError=!0,this.acks[t]=u}emitWithAck(t,...n){return new Promise((s,c)=>{const h=(u,d)=>u?c(u):s(d);h.withError=!0,n.push(h),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((c,...h)=>s!==this._queue[0]?void 0:(c!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(c)):(this._queue.shift(),n&&n(null,...h)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:H.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case H.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(t);break;case H.ACK:case H.BINARY_ACK:this.onack(t);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...c){s||(s=!0,n.packet({type:H.ACK,id:t,data:c}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function Bt(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Bt.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*r);r=(Math.floor(t*10)&1)==0?r-n:r+n}return Math.min(r,this.max)|0},Bt.prototype.reset=function(){this.attempts=0},Bt.prototype.setMin=function(r){this.ms=r},Bt.prototype.setMax=function(r){this.max=r},Bt.prototype.setJitter=function(r){this.jitter=r};class In extends ye{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,zi(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Bt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const c=n.parser||Dc;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Sc(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const c=Ye(n,"open",function(){s.onopen(),t&&t()}),h=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},u=Ye(n,"error",h);if(this._timeout!==!1){const d=this._timeout,p=this.setTimeoutFn(()=>{c(),h(new Error("timeout")),n.close()},d);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(c),this.subs.push(u),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ye(t,"ping",this.onping.bind(this)),Ye(t,"data",this.ondata.bind(this)),Ye(t,"error",this.onerror.bind(this)),Ye(t,"close",this.onclose.bind(this)),Ye(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Ii(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new ss(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(c=>{c?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",c)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Qt={};function Ni(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const n=Pc(r,t.path||"/socket.io"),s=n.source,c=n.id,h=n.path,u=Qt[c]&&h in Qt[c].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||u;let p;return d?p=new In(s,t):(Qt[c]||(Qt[c]=new In(s,t)),p=Qt[c]),n.query&&!t.query&&(t.query=n.queryKey),p.socket(n.path,t)}Object.assign(Ni,{Manager:In,Socket:ss,io:Ni,connect:Ni});function $c(r){var Ve,Xe,ai,Nt;const[t,n]=le(!1),[s,c]=le(!1),[h,u]=le(null),[d,p]=le(null),[g,v]=le(null),[_,x]=le(null),[R,$]=le(new Map),[P,Ue]=le(!1),[qe,be]=le(!1),[ne,re]=le(new Map),[ze,B]=le(new Map),[Be,Ae]=le(new Map),[Je,Oe]=le(new Map),[oe,_e]=le(!1),[De,Y]=le(null),pe="talkizi.com",xe=((Ve=window.location.hostname)!=null&&Ve.includes("local")||(Xe=window.location.hostname)!=null&&Xe.includes("192.168"))&&!(pe!=null&&pe.includes("talk"))?parseInt(void 0):443,M=((ai=window.location.hostname)!=null&&ai.includes("local")||(Nt=window.location.hostname)!=null&&Nt.includes("192.168"))&&!(pe!=null&&pe.includes("talk"))?parseInt(void 0):443,T=Ni(`https://${pe}:${xe}`);function ae(){var F;if(!_())return;const A=(F=_())==null?void 0:F.getAudioTracks()[0];if(!A)return;const Z=!s();A.enabled=!Z,c(Z)}function S(){if(!h()||P())return;Ue(!0);const A=g(),Z=h(),F=r.rooms.map(k=>k._id),Se=F.join(",");if(document.querySelectorAll("audio").forEach(k=>{try{k.pause(),k.srcObject=null,k.remove()}catch{}}),T.emit("leave-room",{roomId:Z,clientId:(A==null?void 0:A.id)??"unknown",groupRooms:F,groupId:Se}),T.emit("get-all-counts",{rooms:r.rooms.map(k=>k._id),groupRooms:r.rooms.map(k=>k._id)}),Je().forEach(k=>{try{k.close()}catch{}}),Oe(new Map),ie(),A)try{A.disconnect(),A.destroy()}catch{}v(null);const U=_();U&&U.getTracks().forEach(k=>k.stop()),x(null),re(new Map),Y(null),B(new Map),be(!1),u(null),p(null),Ue(!1)}async function W(A){S(),p(`Connexion à ${A.name}...`);const{Peer:Z}=await Promise.resolve().then(()=>jl),F=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});x(F);const Se=`${A._id}-${crypto.randomUUID()}`,U=new Z(Se,{host:pe,secure:!0,port:M,path:"/voice"});v(U),u(A._id),U.on("open",k=>{p(`Connecté à ${A.name} ✅`),T.emit("join-room",{roomId:A._id,clientId:k,groupRooms:r.rooms.map(z=>z._id),groupId:r.rooms.map(z=>z._id).join(",")}),T.emit("ask-video-states",{roomId:A._id,requesterId:k}),T.emit("get-all-counts",{rooms:r.rooms.map(z=>z._id),groupRooms:r.rooms.map(z=>z._id)}),T.emit("please-call-me",{requesterId:k})}),U.on("call",k=>{var te;const z=((te=k.metadata)==null?void 0:te.type)??"camera";z==="screen"?k.answer():k.answer(_()),Oe(he=>new Map(he.set(k.peer,k))),k.on("stream",he=>{z==="screen"?B(ut=>new Map(ut.set(k.peer,he))):re(ut=>new Map(ut.set(k.peer,he)));const ue=new Audio;ue.srcObject=he,ue.autoplay=!0,ue.play().catch(ut=>console.warn("Impossible de jouer le son",ut))}),k.on("close",()=>{z==="screen"?B(he=>{const ue=new Map(he);return ue.delete(k.peer),ue}):re(he=>{const ue=new Map(he);return ue.delete(k.peer),ue})})}),U.on("disconnected",()=>{P()||(p("Déconnecté"),S())})}async function X(){const A=g();if(A)if(oe())ie();else try{const Z=await navigator.mediaDevices.getDisplayMedia({video:!0});Y(Z),_e(!0);const F=Z.getVideoTracks()[0];T.emit("screen-on",{roomId:h(),peerId:A.id}),A.listAllPeers(Se=>{Se.filter(U=>U!==A.id&&U.startsWith(`${h()}-`)).forEach(U=>{const k=A.call(U,Z,{metadata:{type:"screen"}});Oe(z=>new Map(z.set(k.peer,k))),k.on("stream",z=>{B(te=>new Map(te.set(k.peer,z)))}),k.on("close",()=>{B(z=>{const te=new Map(z);return te.delete(k.peer),te})})})}),F.onended=()=>{ie()}}catch(Z){console.error("Erreur lors du partage d’écran :",Z)}}function ie(){const A=De();if(!A)return;const Z=A.getVideoTracks()[0];Z&&Z.stop(),_e(!1),Y(null);const F=g();F&&(T.emit("screen-off",{roomId:h(),peerId:F.id}),Je().forEach((Se,U)=>{var te;const k=(te=Se._localStream)==null?void 0:te.getVideoTracks();(k==null?void 0:k.some(he=>he.label.toLowerCase().includes("screen")))&&(Se.close(),B(he=>{const ue=new Map(he);return ue.delete(U),ue}),Oe(he=>{const ue=new Map(he);return ue.delete(U),ue}))}))}async function Q(){const A=_();if(!A)return;let Z=A.getVideoTracks()[0];const F=g();if(Z)Z.enabled=!Z.enabled,be(Z.enabled),T.emit(Z.enabled?"video-on":"video-off",{roomId:h(),peerId:F==null?void 0:F.id}),Z.enabled&&F&&F.listAllPeers(Se=>{Se.filter(U=>U!==F.id&&U.startsWith(`${h()}-`)).forEach(U=>{const k=F.call(U,A);Oe(z=>new Map(z.set(k.peer,k))),k.on("stream",z=>{re(te=>new Map(te.set(k.peer,z)))}),k.on("close",()=>{re(z=>{const te=new Map(z);return te.delete(k.peer),te})})})});else try{const U=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];U&&(A.addTrack(U),be(!0),T.emit("video-on",{roomId:h(),peerId:F==null?void 0:F.id}),F&&F.listAllPeers(k=>{k.filter(z=>z!==F.id&&z.startsWith(`${h()}-`)).forEach(z=>{const te=F.call(z,A,{metadata:{type:"camera"}});Oe(he=>new Map(he.set(te.peer,te))),te.on("stream",he=>{re(ue=>new Map(ue.set(te.peer,he)))}),te.on("close",()=>{re(he=>{const ue=new Map(he);return ue.delete(te.peer),ue})})})}))}catch(Se){console.error("Erreur caméra",Se)}}T.on("all-participant-counts",A=>{$(new Map(Object.entries(A)))}),T.on("remote-video-off",({peerId:A})=>{Ae(Z=>new Map(Z.set(A,!1))),re(Z=>{const F=new Map(Z);return F.delete(A),F})}),T.on("remote-video-on",({peerId:A})=>{console.log(`Video activée pour ${A}`),Ae(Z=>new Map(Z.set(A,!0)))}),T.on("request-video-state",({requesterId:A})=>{var F;const Z=(F=g())==null?void 0:F.id;Z&&T.emit(qe()?"video-on":"video-off",{roomId:h(),peerId:Z})});function ee(){p("Plus de réseau ❌"),S()}function V(){p("Connexion rétablie ✅"),T.emit("get-all-counts",{rooms:r.rooms.map(A=>A._id),groupRooms:r.rooms.map(A=>A._id)})}return window.addEventListener("offline",ee),window.addEventListener("online",V),gn(()=>{window.removeEventListener("offline",ee),window.removeEventListener("online",V)}),T.emit("subscribe-group",{groupId:r.rooms.map(A=>A._id).join(",")}),T.on("please-call-me",({requesterId:A})=>{const Z=g();if(!Z)return;const F=_(),Se=De();if(F){const U=Z.call(A,F,{metadata:{type:"camera"}});Oe(k=>new Map(k.set(U.peer,U))),U.on("stream",k=>{re(te=>new Map(te.set(U.peer,k)));const z=new Audio;z.srcObject=k,z.autoplay=!0,z.play().catch(te=>console.warn("Impossible de jouer le son",te))}),U.on("close",()=>{re(k=>{const z=new Map(k);return z.delete(U.peer),z})})}if(Se){const U=Z.call(A,Se,{metadata:{type:"screen"}});Oe(k=>new Map(k.set(U.peer,U))),U.on("stream",k=>{B(z=>new Map(z.set(U.peer,k)))}),U.on("close",()=>{B(k=>{const z=new Map(k);return z.delete(U.peer),z})})}}),T.emit("get-all-counts",{rooms:r.rooms.map(A=>A._id),groupRooms:r.rooms.map(A=>A._id)}),{visible:t,isMuted:s,joinedRoom:h,status:d,roomParticipantCounts:R,open:()=>n(!0),close:S,leaveAndClose:()=>{S(),n(!1)},joinRoom:W,leaveRoom:S,toggleMute:ae,localStream:_,isVideoEnabled:qe,toggleVideo:Q,remoteStreams:ne,remoteVideoStates:Be,toggleScreenShare:X,remoteScreenStreams:ze,stopScreenShare:ie,screenStream:De,isScreenSharing:oe}}var Zc=K('<div class="flex items-center gap-2"><button title="Plein écran"class="flex items-center gap-1 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full px-2 py-1 transition"><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 3H5a2 2 0 0 0-2 2v3m0 8v3a2 2 0 0 0 2 2h3m8-16h3a2 2 0 0 1 2 2v3m0 8v3a2 2 0 0 1-2 2h-3"></path></svg></button><button class="flex items-center gap-1 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full px-2 py-1 transition"></button><button class="flex items-center gap-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900 rounded-full px-2 py-1 transition"title=Fermer><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Fc=K('<svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4h7M4 4v7M20 20h-7M20 20v-7">'),Uc=K('<svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4h7M4 4v7M20 20h-7M20 20v-7"></path> ');function os(r){return(()=>{var t=Zc(),n=t.firstChild,s=n.nextSibling,c=s.nextSibling;return Ke(n,"click",r.onToogleFullScreen),Ke(s,"click",r.onToggleExpand),N(s,(()=>{var h=we(()=>!!r.isExpanded);return()=>h()?Fc():Uc()})()),Ke(c,"click",r.onClose),Fe(()=>Ra(s,"title",r.isExpanded?"Réduire":"Agrandir")),t})()}Ct(["click"]);var jc=K('<div class="relative cursor-zoom-in w-full max-w-1/4 max-h-[300px] rounded-md overflow-hidden"><video muted class="w-full h-auto rounded object-cover"autoplay playsinline>'),qc=K('<div class="z-10 mt-6 flex gap-2 overflow-x-auto px-4 py-2 bg-black/60 rounded-lg">'),Vc=K('<div class="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center"><div class="absolute inset-0"></div><video muted class="max-w-full max-h-full z-10 rounded-lg shadow-2xl"autoplay playsinline>'),Hc=K('<video muted class="w-24 h-16 rounded object-cover border border-white/20"autoplay playsinline>'),Wc=K('<div class="w-full max-w-1/4 max-h-[300px] rounded-md bg-black flex items-center justify-center text-white">📷 Caméra désactivée');function Gc(r){let t,n;const[s,c]=le(!1);Pi(()=>{if(t&&r.stream&&r.isVideoEnabled){const u=r.stream.getVideoTracks().some(d=>d.readyState==="live");t.srcObject=u?r.stream:null,t.onloadedmetadata=()=>t==null?void 0:t.play().catch(console.warn)}}),Pi(()=>{s()&&n&&r.stream&&(n.srcObject=r.stream,n.onloadedmetadata=()=>n==null?void 0:n.play().catch(console.warn))});const h=u=>{u.key==="Escape"&&c(!1)};return Pi(()=>{s()?window.addEventListener("keydown",h):window.removeEventListener("keydown",h),gn(()=>window.removeEventListener("keydown",h))}),r.isVideoEnabled?[(()=>{var u=jc(),d=u.firstChild;return u.$$click=()=>c(!0),Jt(p=>t=p,d),u})(),fe(Mt,{get when(){return s()},get children(){var u=Vc(),d=u.firstChild,p=d.nextSibling;return d.$$click=()=>c(!1),Jt(g=>n=g,p),N(u,fe(Mt,{get when(){return r.peers&&r.peers.length>0},get children(){var g=qc();return N(g,fe(Ei,{get each(){return r.peers},children:v=>(()=>{var _=Hc();return Jt(x=>{x.srcObject=v.stream,x.onloadedmetadata=()=>x.play().catch(console.warn)},_),_})()})),g}}),null),u}})]:Wc()}Ct(["click"]);var Kc=K('<a href=https://talkizi.com target=_blank rel="noopener noreferrer"><span>Powered by</span><span class="font-semibold text-indigo-600">Talkizi');function as(r){return(()=>{var t=Kc();return Fe(()=>$e(t,`flex items-center justify-center gap-1 text-xs text-gray-400 hover:text-indigo-500 transition-colors ${r.class??""}`)),t})()}var Yc=K('<div class="z-10 mt-6 flex gap-2 overflow-x-auto px-4 py-2 bg-black/60 rounded-lg max-w-full">'),Jc=K('<div class="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center"><div class="absolute inset-0 cursor-zoom-out"></div><video muted autoplay playsinline class="z-10 max-w-full max-h-full rounded-xl shadow-2xl">'),Xc=K("<video muted autoplay playsinline>");function Qc(r){return(()=>{var t=Jc(),n=t.firstChild,s=n.nextSibling;return Ke(n,"click",r.onClose),Jt(c=>{c.srcObject=r.current.stream,c.onloadedmetadata=()=>c.play().catch(console.warn)},s),N(t,fe(Mt,{get when(){return r.all.length>1},get children(){var c=Yc();return N(c,fe(Ei,{get each(){return r.all},children:h=>(()=>{var u=Xc();return u.$$click=d=>{d.stopPropagation(),r.onSelect(h.id)},Jt(d=>{d.srcObject=h.stream,d.onloadedmetadata=()=>d.play().catch(console.warn)},u),Fe(()=>$e(u,`w-24 h-16 rounded cursor-pointer border ${h.id===r.current.id?"border-white":"border-transparent"}`)),u})()})),c}}),null),t})()}Ct(["click"]);var el=K('<div class="w-full h-[40vh] flex flex-col items-center justify-center gap-4"><svg class="animate-spin h-10 w-10 text-indigo-600"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8v4A4 4 0 008 12H4z"></path></svg><p class="text-lg font-medium text-gray-700 dark:text-gray-200">Un agent arrive…</p><p class="text-xs text-gray-500">Merci de patienter, la connexion va se lancer automatiquement.'),tl=K('<button class="fixed bottom-6 right-6 z-50 bg-gradient-to-br from-indigo-600 to-purple-500 text-white px-5 py-3 rounded-full shadow-2xl hover:scale-105 transition-all duration-200 flex items-center gap-3"><span>'),il=K('<div><div><div><h2></h2></div><div class="flex-1 overflow-y-auto"><div></div><div></div></div><div class="border-t p-4 border-gray-200 dark:border-gray-700"><h3></h3><p class="text-base font-bold text-gray-900 dark:text-white"></p><p class="text-xs text-gray-500 mt-1">'),nl=K('<div class="flex gap-2">'),rl=K('<div class="mt-4 flex gap-2 flex-wrap justify-center">'),sl=K('<div class="fixed bottom-6 right-6 z-50"><div class="w-[260px] bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 flex flex-col transition-all"><div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><h2 class="text-sm font-semibold text-gray-800 dark:text-white"></h2></div><div class="p-3 flex flex-col gap-2"><p class="text-xs text-gray-500"></p><div class="flex gap-2 flex-wrap">'),ol=K('<button class="bg-yellow-600 hover:bg-yellow-700 text-white px-2 py-1 rounded text-xs">'),al=K('<button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs">'),cl=K('<button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs">');function ll(){return el()}function hl(r){const[t,n]=le(null),[s,c]=le("expanded"),[h,u]=le(null),[d,p]=le(!1),[g,v]=le(null),_=()=>s()==="fullscreen",x=()=>s()==="expanded",R=()=>s()==="minimized",{lang:$}=$r(),P=()=>Zr[$()];ga(()=>{var B,Be;if((B=r.config)!=null&&B.talkiziId){const Ae=new URLSearchParams(window.location.search);if(p(Ae.get("support")==="true"),Ue(),d()){if(r.config.rooms.length===0)throw new Error("Le mode support ne peut être activé que si une seule room est configurée.");v(r.config.rooms[0]),(Be=t())==null||Be.joinRoom(r.config.rooms[0])}}});const Ue=()=>{if(t())t().open();else{const B=$c(r.config);n(B),B.open()}},qe=()=>{c(R()?"expanded":"minimized")},be=()=>{c(B=>B==="fullscreen"?"expanded":"fullscreen")},ne=()=>d()?"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50":"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-end z-50",re=()=>d()?"w-[92vw] max-w-[780px] h-[84vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl flex flex-col transition-all":`h-full bg-white dark:bg-gray-900 rounded-l-xl shadow-lg flex flex-col transition-all ${_()?"w-full":"sm:w-[400px]"}`,ze=()=>d()?"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center rounded-t-2xl":"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center";return[fe(Mt,{get when(){var B;return!((B=t())!=null&&B.visible())},get children(){var B=tl(),Be=B.firstChild;return B.$$click=Ue,N(Be,()=>P().modal.openButton),N(B,fe(as,{}),null),B}}),we(()=>we(()=>{var B;return!!((B=t())!=null&&B.visible()&&!R())})()&&(()=>{var B=il(),Be=B.firstChild,Ae=Be.firstChild,Je=Ae.firstChild,Oe=Ae.nextSibling,oe=Oe.firstChild,_e=oe.nextSibling,De=Oe.nextSibling,Y=De.firstChild,pe=Y.nextSibling,xe=pe.nextSibling;return B.$$click=M=>{var T;M.target===M.currentTarget&&((T=t())==null||T.leaveAndClose())},N(Je,(()=>{var M=we(()=>!!d());return()=>M()?"Support":P().modal.title})()),N(Ae,(()=>{var M=we(()=>!d());return()=>M()&&fe(os,{onToogleFullScreen:be,get isFullScreen(){return _()},get isExpanded(){return x()},onExpand:()=>c("expanded"),onToggleExpand:qe,get onClose(){return t().leaveAndClose}})})(),null),N(oe,(()=>{var M=we(()=>!d());return()=>M()&&fe(Ei,{get each(){return r.config.rooms},children:T=>(()=>{var ae=nl();return N(ae,fe(za,{get plan(){return r.config.plan},get fullScreen(){return _()},room:T,get joinedRoomId(){return t().joinedRoom()},get count(){var S;return((S=t())==null?void 0:S.roomParticipantCounts().get(T._id))??0},onJoin:()=>{var S;return(S=t())==null?void 0:S.joinRoom(T)}})),ae})()})})(),null),N(oe,(()=>{var M=we(()=>{var T,ae;return!!(d()&&((ae=t())==null?void 0:ae.roomParticipantCounts().get((T=g())==null?void 0:T._id))===1)});return()=>M()&&fe(ll,{})})(),null),N(_e,fe(Ei,{get each(){var M,T,ae,S,W;return[...(M=t())!=null&&M.localStream()&&((T=t())!=null&&T.isVideoEnabled())?[{id:"local",stream:(ae=t())==null?void 0:ae.localStream(),isVideoEnabled:!0}]:[],...(S=t())!=null&&S.screenStream()?[{id:"local-screen",stream:(W=t())==null?void 0:W.screenStream(),isVideoEnabled:!0}]:[],...Array.from(t().remoteStreams().entries()).map(([X,ie])=>{var Q;return{id:X,stream:ie,isVideoEnabled:((Q=t())==null?void 0:Q.remoteVideoStates().get(X))??!0}}),...Array.from(t().remoteScreenStreams().entries()).map(([X,ie])=>({id:`${X}-screen`,stream:ie,isVideoEnabled:!0}))]},children:M=>fe(Gc,{get stream(){return M.stream},get isVideoEnabled(){return M.isVideoEnabled},peers:[]})}),null),N(_e,fe(Mt,{get when(){return h()},get children(){return fe(Qc,{get current(){var M,T,ae,S,W;return[...(M=t())!=null&&M.localStream()&&((T=t())!=null&&T.isVideoEnabled())?[{id:"local",stream:(ae=t())==null?void 0:ae.localStream(),isVideoEnabled:!0}]:[],...(S=t())!=null&&S.screenStream()?[{id:"local-screen",stream:(W=t())==null?void 0:W.screenStream(),isVideoEnabled:!0}]:[],...Array.from(t().remoteStreams().entries()).map(([X,ie])=>{var Q;return{id:X,stream:ie,isVideoEnabled:((Q=t())==null?void 0:Q.remoteVideoStates().get(X))??!0}}),...Array.from(t().remoteScreenStreams().entries()).map(([X,ie])=>({id:`${X}-screen`,stream:ie,isVideoEnabled:!0}))].find(X=>X.id===h())},all:[],onSelect:u,onClose:()=>u(null)})}}),null),N(Y,()=>P().modal.currentRoom),N(pe,()=>{var M;return((M=r.config.rooms.find(T=>{var ae;return T._id===((ae=t())==null?void 0:ae.joinedRoom())}))==null?void 0:M.name)??P().modal.noRoom}),N(xe,()=>{var M;return((M=t())==null?void 0:M.status())??P().modal.selectRoom}),N(De,(()=>{var M=we(()=>{var T;return!!((T=t())!=null&&T.joinedRoom())});return()=>M()&&(()=>{var T=rl();return N(T,fe(Va,{get fullScreen(){return _()},get isMuted(){return t().isMuted()},get onToggleMute(){return t().toggleMute},get onLeave(){return t().leaveRoom},get onToggleVideoEnabled(){return t().toggleVideo},get isVideoEnabled(){return t().isVideoEnabled()},get onToggleScreenShare(){return t().toggleScreenShare},get isScreenSharing(){var ae;return(ae=t())==null?void 0:ae.isScreenSharing()}})),T})()})(),null),N(Be,fe(as,{}),null),Fe(M=>{var T=ne(),ae=re(),S=ze(),W=d()?"text-lg font-semibold":"text-lg font-semibold text-gray-800 dark:text-white",X=`flex ${_()?"flex-row gap-4":"flex-col gap-4 "} p-4`,ie=`flex flex-row flex-wrap gap-4 w-full justify-start p-4 ${d()?"bg-white dark:bg-gray-900":""}`,Q=(d(),"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1");return T!==M.e&&$e(B,M.e=T),ae!==M.t&&$e(Be,M.t=ae),S!==M.a&&$e(Ae,M.a=S),W!==M.o&&$e(Je,M.o=W),X!==M.i&&$e(oe,M.i=X),ie!==M.n&&$e(_e,M.n=ie),Q!==M.s&&$e(Y,M.s=Q),M},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),B})()),we(()=>we(()=>{var B;return!!((B=t())!=null&&B.visible()&&R())})()&&(()=>{var B=sl(),Be=B.firstChild,Ae=Be.firstChild,Je=Ae.firstChild,Oe=Ae.nextSibling,oe=Oe.firstChild,_e=oe.nextSibling;return N(Je,()=>{var De;return((De=r.config.rooms[0])==null?void 0:De.name)??P().modal.defaultRoom}),N(Ae,fe(os,{get isFullScreen(){return _()},onToogleFullScreen:be,get isExpanded(){return x()},onExpand:()=>c("expanded"),onToggleExpand:qe,get onClose(){return t().leaveAndClose}}),null),N(oe,(()=>{var De=we(()=>!!t().joinedRoom());return()=>{var Y;return De()?((Y=t())==null?void 0:Y.status())??P().modal.connected:P().modal.notConnected}})()),N(_e,(()=>{var De=we(()=>!!t().joinedRoom());return()=>De()?[(()=>{var pe;var Y=ol();return Ke(Y,"click",(pe=t())==null?void 0:pe.toggleMute),N(Y,()=>{var xe;return(xe=t())!=null&&xe.isMuted()?"🔇":"🎙️"}),Y})(),(()=>{var pe;var Y=al();return Ke(Y,"click",(pe=t())==null?void 0:pe.leaveRoom),N(Y,()=>P().modal.leave),Y})()]:(()=>{var Y=cl();return Y.$$click=()=>{var pe;return(pe=t())==null?void 0:pe.joinRoom(r.config.rooms[0])},N(Y,()=>P().modal.join),Y})()})()),B})())]}Ct(["click"]);const ul="aconsole.log('Hello, world!');";async function cs(){const r=new TextEncoder,t=await window.crypto.subtle.importKey("raw",r.encode(ul),{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:r.encode("consoole.alert.?33312oooo#?"),iterations:1e5,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function ls(){return window.location.hostname==="192.168.1.151"}async function dl(r,t,n){const s={data:t,expiresAt:Date.now()+n*1e3},c=JSON.stringify(s);if(ls()){localStorage.setItem(r,btoa(c));return}const h=new TextEncoder,u=window.crypto.getRandomValues(new Uint8Array(12)),d=await cs(),p=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:u},d,h.encode(c)),g=`${btoa(String.fromCharCode(...u))}.${btoa(String.fromCharCode(...new Uint8Array(p)))}`;localStorage.setItem(r,g)}async function fl(r){const t=localStorage.getItem(r);if(!t)return null;try{if(ls()){const _=atob(t),x=JSON.parse(_);return Date.now()>x.expiresAt?(localStorage.removeItem(r),null):x.data}const[n,s]=t.split(".");if(!n||!s)return null;const c=Uint8Array.from(atob(n),_=>_.charCodeAt(0)),h=Uint8Array.from(atob(s),_=>_.charCodeAt(0)),u=await cs(),d=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:c},u,h),g=new TextDecoder().decode(d),v=JSON.parse(g);return Date.now()>v.expiresAt?(localStorage.removeItem(r),null):v.data}catch(n){return console.error("Erreur lors du déchiffrement :",n),null}}function pl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ei={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ml=ei.exports,hs;function _l(){return hs||(hs=1,function(r,t){(function(n,s){s(t)})(ml,function(n){var s="1.9.4";function c(e){var i,o,a,l;for(o=1,a=arguments.length;o<a;o++){l=arguments[o];for(i in l)e[i]=l[i]}return e}var h=Object.create||function(){function e(){}return function(i){return e.prototype=i,new e}}();function u(e,i){var o=Array.prototype.slice;if(e.bind)return e.bind.apply(e,o.call(arguments,1));var a=o.call(arguments,2);return function(){return e.apply(i,a.length?a.concat(o.call(arguments)):arguments)}}var d=0;function p(e){return"_leaflet_id"in e||(e._leaflet_id=++d),e._leaflet_id}function g(e,i,o){var a,l,f,m;return m=function(){a=!1,l&&(f.apply(o,l),l=!1)},f=function(){a?l=arguments:(e.apply(o,arguments),setTimeout(m,i),a=!0)},f}function v(e,i,o){var a=i[1],l=i[0],f=a-l;return e===a&&o?e:((e-l)%f+f)%f+l}function _(){return!1}function x(e,i){if(i===!1)return e;var o=Math.pow(10,i===void 0?6:i);return Math.round(e*o)/o}function R(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return R(e).split(/\s+/)}function P(e,i){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?h(e.options):{});for(var o in i)e.options[o]=i[o];return e.options}function Ue(e,i,o){var a=[];for(var l in e)a.push(encodeURIComponent(o?l.toUpperCase():l)+"="+encodeURIComponent(e[l]));return(!i||i.indexOf("?")===-1?"?":"&")+a.join("&")}var qe=/\{ *([\w_ -]+) *\}/g;function be(e,i){return e.replace(qe,function(o,a){var l=i[a];if(l===void 0)throw new Error("No value provided for variable "+o);return typeof l=="function"&&(l=l(i)),l})}var ne=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function re(e,i){for(var o=0;o<e.length;o++)if(e[o]===i)return o;return-1}var ze="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Be=0;function Ae(e){var i=+new Date,o=Math.max(0,16-(i-Be));return Be=i+o,window.setTimeout(e,o)}var Je=window.requestAnimationFrame||B("RequestAnimationFrame")||Ae,Oe=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function oe(e,i,o){if(o&&Je===Ae)e.call(i);else return Je.call(window,u(e,i))}function _e(e){e&&Oe.call(window,e)}var De={__proto__:null,extend:c,create:h,bind:u,get lastId(){return d},stamp:p,throttle:g,wrapNum:v,falseFn:_,formatNum:x,trim:R,splitWords:$,setOptions:P,getParamString:Ue,template:be,isArray:ne,indexOf:re,emptyImageUrl:ze,requestFn:Je,cancelFn:Oe,requestAnimFrame:oe,cancelAnimFrame:_e};function Y(){}Y.extend=function(e){var i=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,a=h(o);a.constructor=i,i.prototype=a;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(i[l]=this[l]);return e.statics&&c(i,e.statics),e.includes&&(pe(e.includes),c.apply(null,[a].concat(e.includes))),c(a,e),delete a.statics,delete a.includes,a.options&&(a.options=o.options?h(o.options):{},c(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,m=a._initHooks.length;f<m;f++)a._initHooks[f].call(this)}},i},Y.include=function(e){var i=this.prototype.options;return c(this.prototype,e),e.options&&(this.prototype.options=i,this.mergeOptions(e.options)),this},Y.mergeOptions=function(e){return c(this.prototype.options,e),this},Y.addInitHook=function(e){var i=Array.prototype.slice.call(arguments,1),o=typeof e=="function"?e:function(){this[e].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function pe(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=ne(e)?e:[e];for(var i=0;i<e.length;i++)e[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xe={on:function(e,i,o){if(typeof e=="object")for(var a in e)this._on(a,e[a],i);else{e=$(e);for(var l=0,f=e.length;l<f;l++)this._on(e[l],i,o)}return this},off:function(e,i,o){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var a in e)this._off(a,e[a],i);else{e=$(e);for(var l=arguments.length===1,f=0,m=e.length;f<m;f++)l?this._off(e[f]):this._off(e[f],i,o)}return this},_on:function(e,i,o,a){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(e,i,o)===!1){o===this&&(o=void 0);var l={fn:i,ctx:o};a&&(l.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(l)}},_off:function(e,i,o){var a,l,f;if(this._events&&(a=this._events[e],!!a)){if(arguments.length===1){if(this._firingCount)for(l=0,f=a.length;l<f;l++)a[l].fn=_;delete this._events[e];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var m=this._listens(e,i,o);if(m!==!1){var y=a[m];this._firingCount&&(y.fn=_,this._events[e]=a=a.slice()),a.splice(m,1)}}},fire:function(e,i,o){if(!this.listens(e,o))return this;var a=c({},i,{type:e,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var l=this._events[e];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,m=l.length;f<m;f++){var y=l[f],b=y.fn;y.once&&this.off(e,b,y.ctx),b.call(y.ctx||this,a)}this._firingCount--}}return o&&this._propagateEvent(a),this},listens:function(e,i,o,a){typeof e!="string"&&console.warn('"string" type argument expected');var l=i;typeof i!="function"&&(a=!!i,l=void 0,o=void 0);var f=this._events&&this._events[e];if(f&&f.length&&this._listens(e,l,o)!==!1)return!0;if(a){for(var m in this._eventParents)if(this._eventParents[m].listens(e,i,o,a))return!0}return!1},_listens:function(e,i,o){if(!this._events)return!1;var a=this._events[e]||[];if(!i)return!!a.length;o===this&&(o=void 0);for(var l=0,f=a.length;l<f;l++)if(a[l].fn===i&&a[l].ctx===o)return l;return!1},once:function(e,i,o){if(typeof e=="object")for(var a in e)this._on(a,e[a],i,!0);else{e=$(e);for(var l=0,f=e.length;l<f;l++)this._on(e[l],i,o,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[p(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[p(e)],this},_propagateEvent:function(e){for(var i in this._eventParents)this._eventParents[i].fire(e.type,c({layer:e.target,propagatedFrom:e.target},e),!0)}};xe.addEventListener=xe.on,xe.removeEventListener=xe.clearAllEventListeners=xe.off,xe.addOneTimeEventListener=xe.once,xe.fireEvent=xe.fire,xe.hasEventListeners=xe.listens;var M=Y.extend(xe);function T(e,i,o){this.x=o?Math.round(e):e,this.y=o?Math.round(i):i}var ae=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};T.prototype={clone:function(){return new T(this.x,this.y)},add:function(e){return this.clone()._add(S(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(S(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new T(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new T(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(e){e=S(e);var i=e.x-this.x,o=e.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(e){return e=S(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=S(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function S(e,i,o){return e instanceof T?e:ne(e)?new T(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new T(e.x,e.y):new T(e,i,o)}function W(e,i){if(e)for(var o=i?[e,i]:e,a=0,l=o.length;a<l;a++)this.extend(o[a])}W.prototype={extend:function(e){var i,o;if(!e)return this;if(e instanceof T||typeof e[0]=="number"||"x"in e)i=o=S(e);else if(e=X(e),i=e.min,o=e.max,!i||!o)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=o.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(e){return S((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return S(this.min.x,this.max.y)},getTopRight:function(){return S(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var i,o;return typeof e[0]=="number"||e instanceof T?e=S(e):e=X(e),e instanceof W?(i=e.min,o=e.max):i=o=e,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(e){e=X(e);var i=this.min,o=this.max,a=e.min,l=e.max,f=l.x>=i.x&&a.x<=o.x,m=l.y>=i.y&&a.y<=o.y;return f&&m},overlaps:function(e){e=X(e);var i=this.min,o=this.max,a=e.min,l=e.max,f=l.x>i.x&&a.x<o.x,m=l.y>i.y&&a.y<o.y;return f&&m},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var i=this.min,o=this.max,a=Math.abs(i.x-o.x)*e,l=Math.abs(i.y-o.y)*e;return X(S(i.x-a,i.y-l),S(o.x+a,o.y+l))},equals:function(e){return e?(e=X(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function X(e,i){return!e||e instanceof W?e:new W(e,i)}function ie(e,i){if(e)for(var o=i?[e,i]:e,a=0,l=o.length;a<l;a++)this.extend(o[a])}ie.prototype={extend:function(e){var i=this._southWest,o=this._northEast,a,l;if(e instanceof ee)a=e,l=e;else if(e instanceof ie){if(a=e._southWest,l=e._northEast,!a||!l)return this}else return e?this.extend(V(e)||Q(e)):this;return!i&&!o?(this._southWest=new ee(a.lat,a.lng),this._northEast=new ee(l.lat,l.lng)):(i.lat=Math.min(a.lat,i.lat),i.lng=Math.min(a.lng,i.lng),o.lat=Math.max(l.lat,o.lat),o.lng=Math.max(l.lng,o.lng)),this},pad:function(e){var i=this._southWest,o=this._northEast,a=Math.abs(i.lat-o.lat)*e,l=Math.abs(i.lng-o.lng)*e;return new ie(new ee(i.lat-a,i.lng-l),new ee(o.lat+a,o.lng+l))},getCenter:function(){return new ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof ee||"lat"in e?e=V(e):e=Q(e);var i=this._southWest,o=this._northEast,a,l;return e instanceof ie?(a=e.getSouthWest(),l=e.getNorthEast()):a=l=e,a.lat>=i.lat&&l.lat<=o.lat&&a.lng>=i.lng&&l.lng<=o.lng},intersects:function(e){e=Q(e);var i=this._southWest,o=this._northEast,a=e.getSouthWest(),l=e.getNorthEast(),f=l.lat>=i.lat&&a.lat<=o.lat,m=l.lng>=i.lng&&a.lng<=o.lng;return f&&m},overlaps:function(e){e=Q(e);var i=this._southWest,o=this._northEast,a=e.getSouthWest(),l=e.getNorthEast(),f=l.lat>i.lat&&a.lat<o.lat,m=l.lng>i.lng&&a.lng<o.lng;return f&&m},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,i){return e?(e=Q(e),this._southWest.equals(e.getSouthWest(),i)&&this._northEast.equals(e.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(e,i){return e instanceof ie?e:new ie(e,i)}function ee(e,i,o){if(isNaN(e)||isNaN(i))throw new Error("Invalid LatLng object: ("+e+", "+i+")");this.lat=+e,this.lng=+i,o!==void 0&&(this.alt=+o)}ee.prototype={equals:function(e,i){if(!e)return!1;e=V(e);var o=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return o<=(i===void 0?1e-9:i)},toString:function(e){return"LatLng("+x(this.lat,e)+", "+x(this.lng,e)+")"},distanceTo:function(e){return Xe.distance(this,V(e))},wrap:function(){return Xe.wrapLatLng(this)},toBounds:function(e){var i=180*e/40075017,o=i/Math.cos(Math.PI/180*this.lat);return Q([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new ee(this.lat,this.lng,this.alt)}};function V(e,i,o){return e instanceof ee?e:ne(e)&&typeof e[0]!="object"?e.length===3?new ee(e[0],e[1],e[2]):e.length===2?new ee(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new ee(e.lat,"lng"in e?e.lng:e.lon,e.alt):i===void 0?null:new ee(e,i,o)}var Ve={latLngToPoint:function(e,i){var o=this.projection.project(e),a=this.scale(i);return this.transformation._transform(o,a)},pointToLatLng:function(e,i){var o=this.scale(i),a=this.transformation.untransform(e,o);return this.projection.unproject(a)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(e),a=this.transformation.transform(i.min,o),l=this.transformation.transform(i.max,o);return new W(a,l)},infinite:!1,wrapLatLng:function(e){var i=this.wrapLng?v(e.lng,this.wrapLng,!0):e.lng,o=this.wrapLat?v(e.lat,this.wrapLat,!0):e.lat,a=e.alt;return new ee(o,i,a)},wrapLatLngBounds:function(e){var i=e.getCenter(),o=this.wrapLatLng(i),a=i.lat-o.lat,l=i.lng-o.lng;if(a===0&&l===0)return e;var f=e.getSouthWest(),m=e.getNorthEast(),y=new ee(f.lat-a,f.lng-l),b=new ee(m.lat-a,m.lng-l);return new ie(y,b)}},Xe=c({},Ve,{wrapLng:[-180,180],R:6371e3,distance:function(e,i){var o=Math.PI/180,a=e.lat*o,l=i.lat*o,f=Math.sin((i.lat-e.lat)*o/2),m=Math.sin((i.lng-e.lng)*o/2),y=f*f+Math.cos(a)*Math.cos(l)*m*m,b=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return this.R*b}}),ai=6378137,Nt={R:ai,MAX_LATITUDE:85.0511287798,project:function(e){var i=Math.PI/180,o=this.MAX_LATITUDE,a=Math.max(Math.min(o,e.lat),-o),l=Math.sin(a*i);return new T(this.R*e.lng*i,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(e){var i=180/Math.PI;return new ee((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*i,e.x*i/this.R)},bounds:function(){var e=ai*Math.PI;return new W([-e,-e],[e,e])}()};function A(e,i,o,a){if(ne(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=i,this._c=o,this._d=a}A.prototype={transform:function(e,i){return this._transform(e.clone(),i)},_transform:function(e,i){return i=i||1,e.x=i*(this._a*e.x+this._b),e.y=i*(this._c*e.y+this._d),e},untransform:function(e,i){return i=i||1,new T((e.x/i-this._b)/this._a,(e.y/i-this._d)/this._c)}};function Z(e,i,o,a){return new A(e,i,o,a)}var F=c({},Xe,{code:"EPSG:3857",projection:Nt,transformation:function(){var e=.5/(Math.PI*Nt.R);return Z(e,.5,-e,.5)}()}),Se=c({},F,{code:"EPSG:900913"});function U(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function k(e,i){var o="",a,l,f,m,y,b;for(a=0,f=e.length;a<f;a++){for(y=e[a],l=0,m=y.length;l<m;l++)b=y[l],o+=(l?"L":"M")+b.x+" "+b.y;o+=i?O.svg?"z":"x":""}return o||"M0 0"}var z=document.documentElement.style,te="ActiveXObject"in window,he=te&&!document.addEventListener,ue="msLaunchUri"in navigator&&!("documentMode"in document),ut=rt("webkit"),co=rt("android"),lo=rt("android 2")||rt("android 3"),ql=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Vl=co&&rt("Google")&&ql<537&&!("AudioNode"in window),Xn=!!window.opera,ho=!ue&&rt("chrome"),uo=rt("gecko")&&!ut&&!Xn&&!te,Hl=!ho&&rt("safari"),fo=rt("phantom"),po="OTransition"in z,Wl=navigator.platform.indexOf("Win")===0,mo=te&&"transition"in z,Qn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!lo,_o="MozPerspective"in z,Gl=!window.L_DISABLE_3D&&(mo||Qn||_o)&&!po&&!fo,ci=typeof orientation<"u"||rt("mobile"),Kl=ci&&ut,Yl=ci&&Qn,go=!window.PointerEvent&&window.MSPointerEvent,vo=!!(window.PointerEvent||go),yo="ontouchstart"in window||!!window.TouchEvent,Jl=!window.L_NO_TOUCH&&(yo||vo),Xl=ci&&Xn,Ql=ci&&uo,eh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,th=function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",_,i),window.removeEventListener("testPassiveEventSupport",_,i)}catch{}return e}(),ih=function(){return!!document.createElement("canvas").getContext}(),er=!!(document.createElementNS&&U("svg").createSVGRect),nh=!!er&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),rh=!er&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var i=e.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),sh=navigator.platform.indexOf("Mac")===0,oh=navigator.platform.indexOf("Linux")===0;function rt(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var O={ie:te,ielt9:he,edge:ue,webkit:ut,android:co,android23:lo,androidStock:Vl,opera:Xn,chrome:ho,gecko:uo,safari:Hl,phantom:fo,opera12:po,win:Wl,ie3d:mo,webkit3d:Qn,gecko3d:_o,any3d:Gl,mobile:ci,mobileWebkit:Kl,mobileWebkit3d:Yl,msPointer:go,pointer:vo,touch:Jl,touchNative:yo,mobileOpera:Xl,mobileGecko:Ql,retina:eh,passiveEvents:th,canvas:ih,svg:er,vml:rh,inlineSvg:nh,mac:sh,linux:oh},bo=O.msPointer?"MSPointerDown":"pointerdown",xo=O.msPointer?"MSPointerMove":"pointermove",Co=O.msPointer?"MSPointerUp":"pointerup",To=O.msPointer?"MSPointerCancel":"pointercancel",tr={touchstart:bo,touchmove:xo,touchend:Co,touchcancel:To},wo={touchstart:dh,touchmove:Yi,touchend:Yi,touchcancel:Yi},$t={},So=!1;function ah(e,i,o){return i==="touchstart"&&uh(),wo[i]?(o=wo[i].bind(this,o),e.addEventListener(tr[i],o,!1),o):(console.warn("wrong event specified:",i),_)}function ch(e,i,o){if(!tr[i]){console.warn("wrong event specified:",i);return}e.removeEventListener(tr[i],o,!1)}function lh(e){$t[e.pointerId]=e}function hh(e){$t[e.pointerId]&&($t[e.pointerId]=e)}function Po(e){delete $t[e.pointerId]}function uh(){So||(document.addEventListener(bo,lh,!0),document.addEventListener(xo,hh,!0),document.addEventListener(Co,Po,!0),document.addEventListener(To,Po,!0),So=!0)}function Yi(e,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var o in $t)i.touches.push($t[o]);i.changedTouches=[i],e(i)}}function dh(e,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&Le(i),Yi(e,i)}function fh(e){var i={},o,a;for(a in e)o=e[a],i[a]=o&&o.bind?o.bind(e):o;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var ph=200;function mh(e,i){e.addEventListener("dblclick",i);var o=0,a;function l(f){if(f.detail!==1){a=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var m=Ao(f);if(!(m.some(function(b){return b instanceof HTMLLabelElement&&b.attributes.for})&&!m.some(function(b){return b instanceof HTMLInputElement||b instanceof HTMLSelectElement}))){var y=Date.now();y-o<=ph?(a++,a===2&&i(fh(f))):a=1,o=y}}}return e.addEventListener("click",l),{dblclick:i,simDblclick:l}}function _h(e,i){e.removeEventListener("dblclick",i.dblclick),e.removeEventListener("click",i.simDblclick)}var ir=Qi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),li=Qi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ko=li==="webkitTransition"||li==="OTransition"?li+"End":"transitionend";function Lo(e){return typeof e=="string"?document.getElementById(e):e}function hi(e,i){var o=e.style[i]||e.currentStyle&&e.currentStyle[i];if((!o||o==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(e,null);o=a?a[i]:null}return o==="auto"?null:o}function J(e,i,o){var a=document.createElement(e);return a.className=i||"",o&&o.appendChild(a),a}function de(e){var i=e.parentNode;i&&i.removeChild(e)}function Ji(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Zt(e){var i=e.parentNode;i&&i.lastChild!==e&&i.appendChild(e)}function Ft(e){var i=e.parentNode;i&&i.firstChild!==e&&i.insertBefore(e,i.firstChild)}function nr(e,i){if(e.classList!==void 0)return e.classList.contains(i);var o=Xi(e);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)}function j(e,i){if(e.classList!==void 0)for(var o=$(i),a=0,l=o.length;a<l;a++)e.classList.add(o[a]);else if(!nr(e,i)){var f=Xi(e);rr(e,(f?f+" ":"")+i)}}function ge(e,i){e.classList!==void 0?e.classList.remove(i):rr(e,R((" "+Xi(e)+" ").replace(" "+i+" "," ")))}function rr(e,i){e.className.baseVal===void 0?e.className=i:e.className.baseVal=i}function Xi(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function He(e,i){"opacity"in e.style?e.style.opacity=i:"filter"in e.style&&gh(e,i)}function gh(e,i){var o=!1,a="DXImageTransform.Microsoft.Alpha";try{o=e.filters.item(a)}catch{if(i===1)return}i=Math.round(i*100),o?(o.Enabled=i!==100,o.Opacity=i):e.style.filter+=" progid:"+a+"(opacity="+i+")"}function Qi(e){for(var i=document.documentElement.style,o=0;o<e.length;o++)if(e[o]in i)return e[o];return!1}function kt(e,i,o){var a=i||new T(0,0);e.style[ir]=(O.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(o?" scale("+o+")":"")}function Ce(e,i){e._leaflet_pos=i,O.any3d?kt(e,i):(e.style.left=i.x+"px",e.style.top=i.y+"px")}function Lt(e){return e._leaflet_pos||new T(0,0)}var ui,di,sr;if("onselectstart"in document)ui=function(){D(window,"selectstart",Le)},di=function(){se(window,"selectstart",Le)};else{var fi=Qi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ui=function(){if(fi){var e=document.documentElement.style;sr=e[fi],e[fi]="none"}},di=function(){fi&&(document.documentElement.style[fi]=sr,sr=void 0)}}function or(){D(window,"dragstart",Le)}function ar(){se(window,"dragstart",Le)}var en,cr;function lr(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(tn(),en=e,cr=e.style.outlineStyle,e.style.outlineStyle="none",D(window,"keydown",tn))}function tn(){en&&(en.style.outlineStyle=cr,en=void 0,cr=void 0,se(window,"keydown",tn))}function Eo(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function hr(e){var i=e.getBoundingClientRect();return{x:i.width/e.offsetWidth||1,y:i.height/e.offsetHeight||1,boundingClientRect:i}}var vh={__proto__:null,TRANSFORM:ir,TRANSITION:li,TRANSITION_END:ko,get:Lo,getStyle:hi,create:J,remove:de,empty:Ji,toFront:Zt,toBack:Ft,hasClass:nr,addClass:j,removeClass:ge,setClass:rr,getClass:Xi,setOpacity:He,testProp:Qi,setTransform:kt,setPosition:Ce,getPosition:Lt,get disableTextSelection(){return ui},get enableTextSelection(){return di},disableImageDrag:or,enableImageDrag:ar,preventOutline:lr,restoreOutline:tn,getSizedParentNode:Eo,getScale:hr};function D(e,i,o,a){if(i&&typeof i=="object")for(var l in i)dr(e,l,i[l],o);else{i=$(i);for(var f=0,m=i.length;f<m;f++)dr(e,i[f],o,a)}return this}var st="_leaflet_events";function se(e,i,o,a){if(arguments.length===1)Ro(e),delete e[st];else if(i&&typeof i=="object")for(var l in i)fr(e,l,i[l],o);else if(i=$(i),arguments.length===2)Ro(e,function(y){return re(i,y)!==-1});else for(var f=0,m=i.length;f<m;f++)fr(e,i[f],o,a);return this}function Ro(e,i){for(var o in e[st]){var a=o.split(/\d/)[0];(!i||i(a))&&fr(e,a,null,null,o)}}var ur={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function dr(e,i,o,a){var l=i+p(o)+(a?"_"+p(a):"");if(e[st]&&e[st][l])return this;var f=function(y){return o.call(a||e,y||window.event)},m=f;!O.touchNative&&O.pointer&&i.indexOf("touch")===0?f=ah(e,i,f):O.touch&&i==="dblclick"?f=mh(e,f):"addEventListener"in e?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?e.addEventListener(ur[i]||i,f,O.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(f=function(y){y=y||window.event,mr(e,y)&&m(y)},e.addEventListener(ur[i],f,!1)):e.addEventListener(i,m,!1):e.attachEvent("on"+i,f),e[st]=e[st]||{},e[st][l]=f}function fr(e,i,o,a,l){l=l||i+p(o)+(a?"_"+p(a):"");var f=e[st]&&e[st][l];if(!f)return this;!O.touchNative&&O.pointer&&i.indexOf("touch")===0?ch(e,i,f):O.touch&&i==="dblclick"?_h(e,f):"removeEventListener"in e?e.removeEventListener(ur[i]||i,f,!1):e.detachEvent("on"+i,f),e[st][l]=null}function Et(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function pr(e){return dr(e,"wheel",Et),this}function pi(e){return D(e,"mousedown touchstart dblclick contextmenu",Et),e._leaflet_disable_click=!0,this}function Le(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Rt(e){return Le(e),Et(e),this}function Ao(e){if(e.composedPath)return e.composedPath();for(var i=[],o=e.target;o;)i.push(o),o=o.parentNode;return i}function Oo(e,i){if(!i)return new T(e.clientX,e.clientY);var o=hr(i),a=o.boundingClientRect;return new T((e.clientX-a.left)/o.x-i.clientLeft,(e.clientY-a.top)/o.y-i.clientTop)}var yh=O.linux&&O.chrome?window.devicePixelRatio:O.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Mo(e){return O.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/yh:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function mr(e,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==e;)o=o.parentNode}catch{return!1}return o!==e}var bh={__proto__:null,on:D,off:se,stopPropagation:Et,disableScrollPropagation:pr,disableClickPropagation:pi,preventDefault:Le,stop:Rt,getPropagationPath:Ao,getMousePosition:Oo,getWheelDelta:Mo,isExternalTarget:mr,addListener:D,removeListener:se},Io=M.extend({run:function(e,i,o,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Lt(e),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=oe(this._animate,this),this._step()},_step:function(e){var i=+new Date-this._startTime,o=this._duration*1e3;i<o?this._runFrame(this._easeOut(i/o),e):(this._runFrame(1),this._complete())},_runFrame:function(e,i){var o=this._startPos.add(this._offset.multiplyBy(e));i&&o._round(),Ce(this._el,o),this.fire("step")},_complete:function(){_e(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),G=M.extend({options:{crs:F,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,i){i=P(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(V(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=li&&O.any3d&&!O.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),D(this._proxy,ko,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,i,o){if(i=i===void 0?this._zoom:this._limitZoom(i),e=this._limitCenter(V(e),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=c({animate:o.animate},o.zoom),o.pan=c({animate:o.animate,duration:o.duration},o.pan));var a=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,i,o.zoom):this._tryAnimatedPan(e,o.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,i,o.pan&&o.pan.noMoveStart),this},setZoom:function(e,i){return this._loaded?this.setView(this.getCenter(),e,{zoom:i}):(this._zoom=e,this)},zoomIn:function(e,i){return e=e||(O.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,i)},zoomOut:function(e,i){return e=e||(O.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,i)},setZoomAround:function(e,i,o){var a=this.getZoomScale(i),l=this.getSize().divideBy(2),f=e instanceof T?e:this.latLngToContainerPoint(e),m=f.subtract(l).multiplyBy(1-1/a),y=this.containerPointToLatLng(l.add(m));return this.setView(y,i,{zoom:o})},_getBoundsCenterZoom:function(e,i){i=i||{},e=e.getBounds?e.getBounds():Q(e);var o=S(i.paddingTopLeft||i.padding||[0,0]),a=S(i.paddingBottomRight||i.padding||[0,0]),l=this.getBoundsZoom(e,!1,o.add(a));if(l=typeof i.maxZoom=="number"?Math.min(i.maxZoom,l):l,l===1/0)return{center:e.getCenter(),zoom:l};var f=a.subtract(o).divideBy(2),m=this.project(e.getSouthWest(),l),y=this.project(e.getNorthEast(),l),b=this.unproject(m.add(y).divideBy(2).add(f),l);return{center:b,zoom:l}},fitBounds:function(e,i){if(e=Q(e),!e.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(e,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,i){return this.setView(e,this._zoom,{pan:i})},panBy:function(e,i){if(e=S(e).round(),i=i||{},!e.x&&!e.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Io,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){j(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,i,o){if(o=o||{},o.animate===!1||!O.any3d)return this.setView(e,i,o);this._stop();var a=this.project(this.getCenter()),l=this.project(e),f=this.getSize(),m=this._zoom;e=V(e),i=i===void 0?m:i;var y=Math.max(f.x,f.y),b=y*this.getZoomScale(m,i),C=l.distanceTo(a)||1,w=1.42,I=w*w;function q(Te){var pn=Te?-1:1,cu=Te?b:y,lu=b*b-y*y+pn*I*I*C*C,hu=2*cu*I*C,Pr=lu/hu,pa=Math.sqrt(Pr*Pr+1)-Pr,uu=pa<1e-9?-18:Math.log(pa);return uu}function Ne(Te){return(Math.exp(Te)-Math.exp(-Te))/2}function Pe(Te){return(Math.exp(Te)+Math.exp(-Te))/2}function Ge(Te){return Ne(Te)/Pe(Te)}var Ze=q(0);function Wt(Te){return y*(Pe(Ze)/Pe(Ze+w*Te))}function ru(Te){return y*(Pe(Ze)*Ge(Ze+w*Te)-Ne(Ze))/I}function su(Te){return 1-Math.pow(1-Te,1.5)}var ou=Date.now(),da=(q(1)-Ze)/w,au=o.duration?1e3*o.duration:1e3*da*.8;function fa(){var Te=(Date.now()-ou)/au,pn=su(Te)*da;Te<=1?(this._flyToFrame=oe(fa,this),this._move(this.unproject(a.add(l.subtract(a).multiplyBy(ru(pn)/C)),m),this.getScaleZoom(y/Wt(pn),m),{flyTo:!0})):this._move(e,i)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),fa.call(this),this},flyToBounds:function(e,i){var o=this._getBoundsCenterZoom(e,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(e){return e=Q(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var i=this.options.minZoom;return this.options.minZoom=e,this._loaded&&i!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var i=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&i!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,i){this._enforcingBounds=!0;var o=this.getCenter(),a=this._limitCenter(o,this._zoom,Q(e));return o.equals(a)||this.panTo(a,i),this._enforcingBounds=!1,this},panInside:function(e,i){i=i||{};var o=S(i.paddingTopLeft||i.padding||[0,0]),a=S(i.paddingBottomRight||i.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(e),m=this.getPixelBounds(),y=X([m.min.add(o),m.max.subtract(a)]),b=y.getSize();if(!y.contains(f)){this._enforcingBounds=!0;var C=f.subtract(y.getCenter()),w=y.extend(f).getSize().subtract(b);l.x+=C.x<0?-w.x:w.x,l.y+=C.y<0?-w.y:w.y,this.panTo(this.unproject(l),i),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=c({animate:!1,pan:!0},e===!0?{animate:!0}:e);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),a=i.divideBy(2).round(),l=o.divideBy(2).round(),f=a.subtract(l);return!f.x&&!f.y?this:(e.animate&&e.pan?this.panBy(f):(e.pan&&this._rawPanBy(f),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=c({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=u(this._handleGeolocationResponse,this),o=u(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,e):navigator.geolocation.getCurrentPosition(i,o,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var i=e.code,o=e.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var i=e.coords.latitude,o=e.coords.longitude,a=new ee(i,o),l=a.toBounds(e.coords.accuracy*2),f=this._locateOptions;if(f.setView){var m=this.getBoundsZoom(l);this.setView(a,f.maxZoom?Math.min(m,f.maxZoom):m)}var y={latlng:a,bounds:l,timestamp:e.timestamp};for(var b in e.coords)typeof e.coords[b]=="number"&&(y[b]=e.coords[b]);this.fire("locationfound",y)}},addHandler:function(e,i){if(!i)return this;var o=this[e]=new i(this);return this._handlers.push(o),this.options[e]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),de(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(_e(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)de(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,i){var o="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),a=J("div",o,i||this._mapPane);return e&&(this._panes[e]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),i=this.unproject(e.getBottomLeft()),o=this.unproject(e.getTopRight());return new ie(i,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,i,o){e=Q(e),o=S(o||[0,0]);var a=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),m=e.getNorthWest(),y=e.getSouthEast(),b=this.getSize().subtract(o),C=X(this.project(y,a),this.project(m,a)).getSize(),w=O.any3d?this.options.zoomSnap:1,I=b.x/C.x,q=b.y/C.y,Ne=i?Math.max(I,q):Math.min(I,q);return a=this.getScaleZoom(Ne,a),w&&(a=Math.round(a/(w/100))*(w/100),a=i?Math.ceil(a/w)*w:Math.floor(a/w)*w),Math.max(l,Math.min(f,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new T(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,i){var o=this._getTopLeftPoint(e,i);return new W(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,i){var o=this.options.crs;return i=i===void 0?this._zoom:i,o.scale(e)/o.scale(i)},getScaleZoom:function(e,i){var o=this.options.crs;i=i===void 0?this._zoom:i;var a=o.zoom(e*o.scale(i));return isNaN(a)?1/0:a},project:function(e,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(V(e),i)},unproject:function(e,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(S(e),i)},layerPointToLatLng:function(e){var i=S(e).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(e){var i=this.project(V(e))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(V(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(Q(e))},distance:function(e,i){return this.options.crs.distance(V(e),V(i))},containerPointToLayerPoint:function(e){return S(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return S(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var i=this.containerPointToLayerPoint(S(e));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(e)))},mouseEventToContainerPoint:function(e){return Oo(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var i=this._container=Lo(e);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");D(i,"scroll",this._onScroll,this),this._containerId=p(i)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&O.any3d,j(e,"leaflet-container"+(O.touch?" leaflet-touch":"")+(O.retina?" leaflet-retina":"")+(O.ielt9?" leaflet-oldie":"")+(O.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=hi(e,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ce(this._mapPane,new T(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(j(e.markerPane,"leaflet-zoom-hide"),j(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,i,o){Ce(this._mapPane,new T(0,0));var a=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var l=this._zoom!==i;this._moveStart(l,o)._move(e,i)._moveEnd(l),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(e,i){return e&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(e,i,o,a){i===void 0&&(i=this._zoom);var l=this._zoom!==i;return this._zoom=i,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),a?o&&o.pinch&&this.fire("zoom",o):((l||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return _e(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ce(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[p(this._container)]=this;var i=e?se:D;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),O.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){_e(this._resizeRequest),this._resizeRequest=oe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,i){for(var o=[],a,l=i==="mouseout"||i==="mouseover",f=e.target||e.srcElement,m=!1;f;){if(a=this._targets[p(f)],a&&(i==="click"||i==="preclick")&&this._draggableMoved(a)){m=!0;break}if(a&&a.listens(i,!0)&&(l&&!mr(f,e)||(o.push(a),l))||f===this._container)break;f=f.parentNode}return!o.length&&!m&&!l&&this.listens(i,!0)&&(o=[this]),o},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var i=e.target||e.srcElement;if(!(!this._loaded||i._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(i))){var o=e.type;o==="mousedown"&&lr(i),this._fireDOMEvent(e,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,i,o){if(e.type==="click"){var a=c({},e);a.type="preclick",this._fireDOMEvent(a,a.type,o)}var l=this._findEventTargets(e,i);if(o){for(var f=[],m=0;m<o.length;m++)o[m].listens(i,!0)&&f.push(o[m]);l=f.concat(l)}if(l.length){i==="contextmenu"&&Le(e);var y=l[0],b={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var C=y.getLatLng&&(!y._radius||y._radius<=10);b.containerPoint=C?this.latLngToContainerPoint(y.getLatLng()):this.mouseEventToContainerPoint(e),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=C?y.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(m=0;m<l.length;m++)if(l[m].fire(i,b,!0),b.originalEvent._stopped||l[m].options.bubblingMouseEvents===!1&&re(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,i=this._handlers.length;e<i;e++)this._handlers[e].disable()},whenReady:function(e,i){return this._loaded?e.call(i||this,{target:this}):this.on("load",e,i),this},_getMapPanePos:function(){return Lt(this._mapPane)||new T(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,i){var o=e&&i!==void 0?this._getNewPixelOrigin(e,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,i){var o=this.getSize()._divideBy(2);return this.project(e,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,i,o){var a=this._getNewPixelOrigin(o,i);return this.project(e,i)._subtract(a)},_latLngBoundsToNewLayerBounds:function(e,i,o){var a=this._getNewPixelOrigin(o,i);return X([this.project(e.getSouthWest(),i)._subtract(a),this.project(e.getNorthWest(),i)._subtract(a),this.project(e.getSouthEast(),i)._subtract(a),this.project(e.getNorthEast(),i)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,i,o){if(!o)return e;var a=this.project(e,i),l=this.getSize().divideBy(2),f=new W(a.subtract(l),a.add(l)),m=this._getBoundsOffset(f,o,i);return Math.abs(m.x)<=1&&Math.abs(m.y)<=1?e:this.unproject(a.add(m),i)},_limitOffset:function(e,i){if(!i)return e;var o=this.getPixelBounds(),a=new W(o.min.add(e),o.max.add(e));return e.add(this._getBoundsOffset(a,i))},_getBoundsOffset:function(e,i,o){var a=X(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),l=a.min.subtract(e.min),f=a.max.subtract(e.max),m=this._rebound(l.x,-f.x),y=this._rebound(l.y,-f.y);return new T(m,y)},_rebound:function(e,i){return e+i>0?Math.round(e-i)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(i))},_limitZoom:function(e){var i=this.getMinZoom(),o=this.getMaxZoom(),a=O.any3d?this.options.zoomSnap:1;return a&&(e=Math.round(e/a)*a),Math.max(i,Math.min(o,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,i){var o=this._getCenterOffset(e)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,i),!0)},_createAnimProxy:function(){var e=this._proxy=J("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(i){var o=ir,a=this._proxy.style[o];kt(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),a===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){de(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),i=this.getZoom();kt(this._proxy,this.project(e,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(i),l=this._getCenterOffset(e)._divideBy(1-1/a);return o.animate!==!0&&!this.getSize().contains(l)?!1:(oe(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(e,i,!0)},this),!0)},_animateZoom:function(e,i,o,a){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=i,j(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:i,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xh(e,i){return new G(e,i)}var Qe=Y.extend({options:{position:"topright"},initialize:function(e){P(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var i=this._map;return i&&i.removeControl(this),this.options.position=e,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var i=this._container=this.onAdd(e),o=this.getPosition(),a=e._controlCorners[o];return j(i,"leaflet-control"),o.indexOf("bottom")!==-1?a.insertBefore(i,a.firstChild):a.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(de(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),mi=function(e){return new Qe(e)};G.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},i="leaflet-",o=this._controlContainer=J("div",i+"control-container",this._container);function a(l,f){var m=i+l+" "+i+f;e[l+f]=J("div",m,o)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)de(this._controlCorners[e]);de(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zo=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,i,o,a){return o<a?-1:a<o?1:0}},initialize:function(e,i,o){P(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in e)this._addLayer(e[a],a);for(a in i)this._addLayer(i[a],a,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Qe.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,i){return this._addLayer(e,i),this._map?this._update():this},addOverlay:function(e,i){return this._addLayer(e,i,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var i=this._getLayer(p(e));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){j(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(j(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",i=this._container=J("div",e),o=this.options.collapsed;i.setAttribute("aria-haspopup",!0),pi(i),pr(i);var a=this._section=J("section",e+"-list");o&&(this._map.on("click",this.collapse,this),D(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=J("a",e+"-toggle",i);l.href="#",l.title="Layers",l.setAttribute("role","button"),D(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){Le(f),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=J("div",e+"-base",a),this._separator=J("div",e+"-separator",a),this._overlaysList=J("div",e+"-overlays",a),i.appendChild(a)},_getLayer:function(e){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&p(this._layers[i].layer)===e)return this._layers[i]},_addLayer:function(e,i,o){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:i,overlay:o}),this.options.sortLayers&&this._layers.sort(u(function(a,l){return this.options.sortFunction(a.layer,l.layer,a.name,l.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ji(this._baseLayersList),Ji(this._overlaysList),this._layerControlInputs=[];var e,i,o,a,l=0;for(o=0;o<this._layers.length;o++)a=this._layers[o],this._addItem(a),i=i||a.overlay,e=e||!a.overlay,l+=a.overlay?0:1;return this.options.hideSingleBase&&(e=e&&l>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=i&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var i=this._getLayer(p(e.target)),o=i.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(e,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(i?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=o,a.firstChild},_addItem:function(e){var i=document.createElement("label"),o=this._map.hasLayer(e.layer),a;e.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=o):a=this._createRadioElement("leaflet-base-layers_"+p(this),o),this._layerControlInputs.push(a),a.layerId=p(e.layer),D(a,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+e.name;var f=document.createElement("span");i.appendChild(f),f.appendChild(a),f.appendChild(l);var m=e.overlay?this._overlaysList:this._baseLayersList;return m.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,i,o,a=[],l=[];this._handlingClick=!0;for(var f=e.length-1;f>=0;f--)i=e[f],o=this._getLayer(i.layerId).layer,i.checked?a.push(o):i.checked||l.push(o);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<a.length;f++)this._map.hasLayer(a[f])||this._map.addLayer(a[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,i,o,a=this._map.getZoom(),l=e.length-1;l>=0;l--)i=e[l],o=this._getLayer(i.layerId).layer,i.disabled=o.options.minZoom!==void 0&&a<o.options.minZoom||o.options.maxZoom!==void 0&&a>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,D(e,"click",Le),this.expand();var i=this;setTimeout(function(){se(e,"click",Le),i._preventClick=!1})}}),Ch=function(e,i,o){return new zo(e,i,o)},_r=Qe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var i="leaflet-control-zoom",o=J("div",i+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,i,o,a,l){var f=J("a",o,a);return f.innerHTML=e,f.href="#",f.title=i,f.setAttribute("role","button"),f.setAttribute("aria-label",i),pi(f),D(f,"click",Rt),D(f,"click",l,this),D(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var e=this._map,i="leaflet-disabled";ge(this._zoomInButton,i),ge(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(j(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(j(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});G.mergeOptions({zoomControl:!0}),G.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _r,this.addControl(this.zoomControl))});var Th=function(e){return new _r(e)},Bo=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var i="leaflet-control-scale",o=J("div",i),a=this.options;return this._addScales(a,i+"-line",o),e.on(a.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),o},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,i,o){e.metric&&(this._mScale=J("div",i,o)),e.imperial&&(this._iScale=J("div",i,o))},_update:function(){var e=this._map,i=e.getSize().y/2,o=e.distance(e.containerPointToLatLng([0,i]),e.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var i=this._getRoundNum(e),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/e)},_updateImperial:function(e){var i=e*3.2808399,o,a,l;i>5280?(o=i/5280,a=this._getRoundNum(o),this._updateScale(this._iScale,a+" mi",a/o)):(l=this._getRoundNum(i),this._updateScale(this._iScale,l+" ft",l/i))},_updateScale:function(e,i,o){e.style.width=Math.round(this.options.maxWidth*o)+"px",e.innerHTML=i},_getRoundNum:function(e){var i=Math.pow(10,(Math.floor(e)+"").length-1),o=e/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),wh=function(e){return new Bo(e)},Sh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gr=Qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(O.inlineSvg?Sh+" ":"")+"Leaflet</a>"},initialize:function(e){P(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=J("div","leaflet-control-attribution"),pi(this._container);for(var i in e._layers)e._layers[i].getAttribution&&this.addAttribution(e._layers[i].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var i in this._attributions)this._attributions[i]&&e.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),e.length&&o.push(e.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});G.mergeOptions({attributionControl:!0}),G.addInitHook(function(){this.options.attributionControl&&new gr().addTo(this)});var Ph=function(e){return new gr(e)};Qe.Layers=zo,Qe.Zoom=_r,Qe.Scale=Bo,Qe.Attribution=gr,mi.layers=Ch,mi.zoom=Th,mi.scale=wh,mi.attribution=Ph;var ot=Y.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ot.addTo=function(e,i){return e.addHandler(i,this),this};var kh={Events:xe},Do=O.touch?"touchstart mousedown":"mousedown",vt=M.extend({options:{clickTolerance:3},initialize:function(e,i,o,a){P(this,a),this._element=e,this._dragStartTarget=i||e,this._preventOutline=o},enable:function(){this._enabled||(D(this._dragStartTarget,Do,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vt._dragging===this&&this.finishDrag(!0),se(this._dragStartTarget,Do,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!nr(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){vt._dragging===this&&this.finishDrag();return}if(!(vt._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(vt._dragging=this,this._preventOutline&&lr(this._element),or(),ui(),!this._moving)){this.fire("down");var i=e.touches?e.touches[0]:e,o=Eo(this._element);this._startPoint=new T(i.clientX,i.clientY),this._startPos=Lt(this._element),this._parentScale=hr(o);var a=e.type==="mousedown";D(document,a?"mousemove":"touchmove",this._onMove,this),D(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var i=e.touches&&e.touches.length===1?e.touches[0]:e,o=new T(i.clientX,i.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,Le(e),this._moved||(this.fire("dragstart"),this._moved=!0,j(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),j(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ce(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){ge(document.body,"leaflet-dragging"),this._lastTarget&&(ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),se(document,"mousemove touchmove",this._onMove,this),se(document,"mouseup touchend touchcancel",this._onUp,this),ar(),di();var i=this._moved&&this._moving;this._moving=!1,vt._dragging=!1,i&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function No(e,i,o){var a,l=[1,4,2,8],f,m,y,b,C,w,I,q;for(f=0,w=e.length;f<w;f++)e[f]._code=At(e[f],i);for(y=0;y<4;y++){for(I=l[y],a=[],f=0,w=e.length,m=w-1;f<w;m=f++)b=e[f],C=e[m],b._code&I?C._code&I||(q=nn(C,b,I,i,o),q._code=At(q,i),a.push(q)):(C._code&I&&(q=nn(C,b,I,i,o),q._code=At(q,i),a.push(q)),a.push(b));e=a}return e}function $o(e,i){var o,a,l,f,m,y,b,C,w;if(!e||e.length===0)throw new Error("latlngs not passed");We(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var I=V([0,0]),q=Q(e),Ne=q.getNorthWest().distanceTo(q.getSouthWest())*q.getNorthEast().distanceTo(q.getNorthWest());Ne<1700&&(I=vr(e));var Pe=e.length,Ge=[];for(o=0;o<Pe;o++){var Ze=V(e[o]);Ge.push(i.project(V([Ze.lat-I.lat,Ze.lng-I.lng])))}for(y=b=C=0,o=0,a=Pe-1;o<Pe;a=o++)l=Ge[o],f=Ge[a],m=l.y*f.x-f.y*l.x,b+=(l.x+f.x)*m,C+=(l.y+f.y)*m,y+=m*3;y===0?w=Ge[0]:w=[b/y,C/y];var Wt=i.unproject(S(w));return V([Wt.lat+I.lat,Wt.lng+I.lng])}function vr(e){for(var i=0,o=0,a=0,l=0;l<e.length;l++){var f=V(e[l]);i+=f.lat,o+=f.lng,a++}return V([i/a,o/a])}var Lh={__proto__:null,clipPolygon:No,polygonCenter:$o,centroid:vr};function Zo(e,i){if(!i||!e.length)return e.slice();var o=i*i;return e=Ah(e,o),e=Rh(e,o),e}function Fo(e,i,o){return Math.sqrt(_i(e,i,o,!0))}function Eh(e,i,o){return _i(e,i,o)}function Rh(e,i){var o=e.length,a=typeof Uint8Array<"u"?Uint8Array:Array,l=new a(o);l[0]=l[o-1]=1,yr(e,l,i,0,o-1);var f,m=[];for(f=0;f<o;f++)l[f]&&m.push(e[f]);return m}function yr(e,i,o,a,l){var f=0,m,y,b;for(y=a+1;y<=l-1;y++)b=_i(e[y],e[a],e[l],!0),b>f&&(m=y,f=b);f>o&&(i[m]=1,yr(e,i,o,a,m),yr(e,i,o,m,l))}function Ah(e,i){for(var o=[e[0]],a=1,l=0,f=e.length;a<f;a++)Oh(e[a],e[l])>i&&(o.push(e[a]),l=a);return l<f-1&&o.push(e[f-1]),o}var Uo;function jo(e,i,o,a,l){var f=a?Uo:At(e,o),m=At(i,o),y,b,C;for(Uo=m;;){if(!(f|m))return[e,i];if(f&m)return!1;y=f||m,b=nn(e,i,y,o,l),C=At(b,o),y===f?(e=b,f=C):(i=b,m=C)}}function nn(e,i,o,a,l){var f=i.x-e.x,m=i.y-e.y,y=a.min,b=a.max,C,w;return o&8?(C=e.x+f*(b.y-e.y)/m,w=b.y):o&4?(C=e.x+f*(y.y-e.y)/m,w=y.y):o&2?(C=b.x,w=e.y+m*(b.x-e.x)/f):o&1&&(C=y.x,w=e.y+m*(y.x-e.x)/f),new T(C,w,l)}function At(e,i){var o=0;return e.x<i.min.x?o|=1:e.x>i.max.x&&(o|=2),e.y<i.min.y?o|=4:e.y>i.max.y&&(o|=8),o}function Oh(e,i){var o=i.x-e.x,a=i.y-e.y;return o*o+a*a}function _i(e,i,o,a){var l=i.x,f=i.y,m=o.x-l,y=o.y-f,b=m*m+y*y,C;return b>0&&(C=((e.x-l)*m+(e.y-f)*y)/b,C>1?(l=o.x,f=o.y):C>0&&(l+=m*C,f+=y*C)),m=e.x-l,y=e.y-f,a?m*m+y*y:new T(l,f)}function We(e){return!ne(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function qo(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),We(e)}function Vo(e,i){var o,a,l,f,m,y,b,C;if(!e||e.length===0)throw new Error("latlngs not passed");We(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var w=V([0,0]),I=Q(e),q=I.getNorthWest().distanceTo(I.getSouthWest())*I.getNorthEast().distanceTo(I.getNorthWest());q<1700&&(w=vr(e));var Ne=e.length,Pe=[];for(o=0;o<Ne;o++){var Ge=V(e[o]);Pe.push(i.project(V([Ge.lat-w.lat,Ge.lng-w.lng])))}for(o=0,a=0;o<Ne-1;o++)a+=Pe[o].distanceTo(Pe[o+1])/2;if(a===0)C=Pe[0];else for(o=0,f=0;o<Ne-1;o++)if(m=Pe[o],y=Pe[o+1],l=m.distanceTo(y),f+=l,f>a){b=(f-a)/l,C=[y.x-b*(y.x-m.x),y.y-b*(y.y-m.y)];break}var Ze=i.unproject(S(C));return V([Ze.lat+w.lat,Ze.lng+w.lng])}var Mh={__proto__:null,simplify:Zo,pointToSegmentDistance:Fo,closestPointOnSegment:Eh,clipSegment:jo,_getEdgeIntersection:nn,_getBitCode:At,_sqClosestPointOnSegment:_i,isFlat:We,_flat:qo,polylineCenter:Vo},br={project:function(e){return new T(e.lng,e.lat)},unproject:function(e){return new ee(e.y,e.x)},bounds:new W([-180,-90],[180,90])},xr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var i=Math.PI/180,o=this.R,a=e.lat*i,l=this.R_MINOR/o,f=Math.sqrt(1-l*l),m=f*Math.sin(a),y=Math.tan(Math.PI/4-a/2)/Math.pow((1-m)/(1+m),f/2);return a=-o*Math.log(Math.max(y,1e-10)),new T(e.lng*i*o,a)},unproject:function(e){for(var i=180/Math.PI,o=this.R,a=this.R_MINOR/o,l=Math.sqrt(1-a*a),f=Math.exp(-e.y/o),m=Math.PI/2-2*Math.atan(f),y=0,b=.1,C;y<15&&Math.abs(b)>1e-7;y++)C=l*Math.sin(m),C=Math.pow((1-C)/(1+C),l/2),b=Math.PI/2-2*Math.atan(f*C)-m,m+=b;return new ee(m*i,e.x*i/o)}},Ih={__proto__:null,LonLat:br,Mercator:xr,SphericalMercator:Nt},zh=c({},Xe,{code:"EPSG:3395",projection:xr,transformation:function(){var e=.5/(Math.PI*xr.R);return Z(e,.5,-e,.5)}()}),Ho=c({},Xe,{code:"EPSG:4326",projection:br,transformation:Z(1/180,1,-1/180,.5)}),Bh=c({},Ve,{projection:br,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,i){var o=i.lng-e.lng,a=i.lat-e.lat;return Math.sqrt(o*o+a*a)},infinite:!0});Ve.Earth=Xe,Ve.EPSG3395=zh,Ve.EPSG3857=F,Ve.EPSG900913=Se,Ve.EPSG4326=Ho,Ve.Simple=Bh;var et=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[p(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[p(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var i=e.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});G.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var i=p(e);return this._layers[i]?this:(this._layers[i]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var i=p(e);return this._layers[i]?(this._loaded&&e.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return p(e)in this._layers},eachLayer:function(e,i){for(var o in this._layers)e.call(i,this._layers[o]);return this},_addLayers:function(e){e=e?ne(e)?e:[e]:[];for(var i=0,o=e.length;i<o;i++)this.addLayer(e[i])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[p(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var i=p(e);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,i=-1/0,o=this._getZoomSpan();for(var a in this._zoomBoundLayers){var l=this._zoomBoundLayers[a].options;e=l.minZoom===void 0?e:Math.min(e,l.minZoom),i=l.maxZoom===void 0?i:Math.max(i,l.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=e===1/0?void 0:e,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ut=et.extend({initialize:function(e,i){P(this,i),this._layers={};var o,a;if(e)for(o=0,a=e.length;o<a;o++)this.addLayer(e[o])},addLayer:function(e){var i=this.getLayerId(e);return this._layers[i]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var i=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(e){var i=typeof e=="number"?e:this.getLayerId(e);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var i=Array.prototype.slice.call(arguments,1),o,a;for(o in this._layers)a=this._layers[o],a[e]&&a[e].apply(a,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,i){for(var o in this._layers)e.call(i,this._layers[o]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return p(e)}}),Dh=function(e,i){return new Ut(e,i)},dt=Ut.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Ut.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Ut.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new ie;for(var i in this._layers){var o=this._layers[i];e.extend(o.getBounds?o.getBounds():o.getLatLng())}return e}}),Nh=function(e,i){return new dt(e,i)},jt=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){P(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,i){var o=this._getIconUrl(e);if(!o){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(a,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(e,i){var o=this.options,a=o[i+"Size"];typeof a=="number"&&(a=[a,a]);var l=S(a),f=S(i==="shadow"&&o.shadowAnchor||o.iconAnchor||l&&l.divideBy(2,!0));e.className="leaflet-marker-"+i+" "+(o.className||""),f&&(e.style.marginLeft=-f.x+"px",e.style.marginTop=-f.y+"px"),l&&(e.style.width=l.x+"px",e.style.height=l.y+"px")},_createImg:function(e,i){return i=i||document.createElement("img"),i.src=e,i},_getIconUrl:function(e){return O.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function $h(e){return new jt(e)}var gi=jt.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof gi.imagePath!="string"&&(gi.imagePath=this._detectIconPath()),(this.options.imagePath||gi.imagePath)+jt.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var i=function(o,a,l){var f=a.exec(o);return f&&f[l]};return e=i(e,/^url\((['"])?(.+)\1\)$/,2),e&&i(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=J("div","leaflet-default-icon-path",document.body),i=hi(e,"background-image")||hi(e,"backgroundImage");if(document.body.removeChild(e),i=this._stripUrl(i),i)return i;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Wo=ot.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new vt(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),j(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var i=this._marker,o=i._map,a=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=Lt(i._icon),m=o.getPixelBounds(),y=o.getPixelOrigin(),b=X(m.min._subtract(y).add(l),m.max._subtract(y).subtract(l));if(!b.contains(f)){var C=S((Math.max(b.max.x,f.x)-b.max.x)/(m.max.x-b.max.x)-(Math.min(b.min.x,f.x)-b.min.x)/(m.min.x-b.min.x),(Math.max(b.max.y,f.y)-b.max.y)/(m.max.y-b.max.y)-(Math.min(b.min.y,f.y)-b.min.y)/(m.min.y-b.min.y)).multiplyBy(a);o.panBy(C,{animate:!1}),this._draggable._newPos._add(C),this._draggable._startPos._add(C),Ce(i._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=oe(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(_e(this._panRequest),this._panRequest=oe(this._adjustPan.bind(this,e)))},_onDrag:function(e){var i=this._marker,o=i._shadow,a=Lt(i._icon),l=i._map.layerPointToLatLng(a);o&&Ce(o,a),i._latlng=l,e.latlng=l,e.oldLatLng=this._oldLatLng,i.fire("move",e).fire("drag",e)},_onDragEnd:function(e){_e(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),rn=et.extend({options:{icon:new gi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,i){P(this,i),this._latlng=V(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var i=this._latlng;return this._latlng=V(e),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=e.icon.createIcon(this._icon),a=!1;o!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(o.title=e.title),o.tagName==="IMG"&&(o.alt=e.alt||"")),j(o,i),e.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&D(o,"focus",this._panOnFocus,this);var l=e.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(j(l,i),l.alt=""),this._shadow=l,e.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&se(this._icon,"focus",this._panOnFocus,this),de(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&de(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ce(this._icon,e),this._shadow&&Ce(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var i=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(j(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wo)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wo(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&He(this._icon,e),this._shadow&&He(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var i=this.options.icon.options,o=i.iconSize?S(i.iconSize):S(0,0),a=i.iconAnchor?S(i.iconAnchor):S(0,0);e.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:o.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Zh(e,i){return new rn(e,i)}var yt=et.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return P(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sn=yt.extend({options:{fill:!0,radius:10},initialize:function(e,i){P(this,i),this._latlng=V(e),this._radius=this.options.radius},setLatLng:function(e){var i=this._latlng;return this._latlng=V(e),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var i=e&&e.radius||this._radius;return yt.prototype.setStyle.call(this,e),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,i=this._radiusY||e,o=this._clickTolerance(),a=[e+o,i+o];this._pxBounds=new W(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fh(e,i){return new sn(e,i)}var Cr=sn.extend({initialize:function(e,i,o){if(typeof i=="number"&&(i=c({},o,{radius:i})),P(this,i),this._latlng=V(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ie(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:yt.prototype.setStyle,_project:function(){var e=this._latlng.lng,i=this._latlng.lat,o=this._map,a=o.options.crs;if(a.distance===Xe.distance){var l=Math.PI/180,f=this._mRadius/Xe.R/l,m=o.project([i+f,e]),y=o.project([i-f,e]),b=m.add(y).divideBy(2),C=o.unproject(b).lat,w=Math.acos((Math.cos(f*l)-Math.sin(i*l)*Math.sin(C*l))/(Math.cos(i*l)*Math.cos(C*l)))/l;(isNaN(w)||w===0)&&(w=f/Math.cos(Math.PI/180*i)),this._point=b.subtract(o.getPixelOrigin()),this._radius=isNaN(w)?0:b.x-o.project([C,e-w]).x,this._radiusY=b.y-m.y}else{var I=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(I).x}this._updateBounds()}});function Uh(e,i,o){return new Cr(e,i,o)}var ft=yt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,i){P(this,i),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var i=1/0,o=null,a=_i,l,f,m=0,y=this._parts.length;m<y;m++)for(var b=this._parts[m],C=1,w=b.length;C<w;C++){l=b[C-1],f=b[C];var I=a(e,l,f,!0);I<i&&(i=I,o=a(e,l,f))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,i){return i=i||this._defaultShape(),e=V(e),i.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ie,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return We(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var i=[],o=We(e),a=0,l=e.length;a<l;a++)o?(i[a]=V(e[a]),this._bounds.extend(i[a])):i[a]=this._convertLatLngs(e[a]);return i},_project:function(){var e=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),i=new T(e,e);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(e,i,o){var a=e[0]instanceof ee,l=e.length,f,m;if(a){for(m=[],f=0;f<l;f++)m[f]=this._map.latLngToLayerPoint(e[f]),o.extend(m[f]);i.push(m)}else for(f=0;f<l;f++)this._projectLatlngs(e[f],i,o)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,o,a,l,f,m,y,b;for(o=0,l=0,f=this._rings.length;o<f;o++)for(b=this._rings[o],a=0,m=b.length;a<m-1;a++)y=jo(b[a],b[a+1],e,a,!0),y&&(i[l]=i[l]||[],i[l].push(y[0]),(y[1]!==b[a+1]||a===m-2)&&(i[l].push(y[1]),l++))}},_simplifyPoints:function(){for(var e=this._parts,i=this.options.smoothFactor,o=0,a=e.length;o<a;o++)e[o]=Zo(e[o],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,i){var o,a,l,f,m,y,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,f=this._parts.length;o<f;o++)for(y=this._parts[o],a=0,m=y.length,l=m-1;a<m;l=a++)if(!(!i&&a===0)&&Fo(e,y[l],y[a])<=b)return!0;return!1}});function jh(e,i){return new ft(e,i)}ft._flat=qo;var qt=ft.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $o(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var i=ft.prototype._convertLatLngs.call(this,e),o=i.length;return o>=2&&i[0]instanceof ee&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(e){ft.prototype._setLatLngs.call(this,e),We(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return We(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,i=this.options.weight,o=new T(i,i);if(e=new W(e.min.subtract(o),e.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,l=this._rings.length,f;a<l;a++)f=No(this._rings[a],e,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var i=!1,o,a,l,f,m,y,b,C;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(f=0,b=this._parts.length;f<b;f++)for(o=this._parts[f],m=0,C=o.length,y=C-1;m<C;y=m++)a=o[m],l=o[y],a.y>e.y!=l.y>e.y&&e.x<(l.x-a.x)*(e.y-a.y)/(l.y-a.y)+a.x&&(i=!i);return i||ft.prototype._containsPoint.call(this,e,!0)}});function qh(e,i){return new qt(e,i)}var pt=dt.extend({initialize:function(e,i){P(this,i),this._layers={},e&&this.addData(e)},addData:function(e){var i=ne(e)?e:e.features,o,a,l;if(i){for(o=0,a=i.length;o<a;o++)l=i[o],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(e))return this;var m=on(e,f);return m?(m.feature=ln(e),m.defaultOptions=m.options,this.resetStyle(m),f.onEachFeature&&f.onEachFeature(e,m),this.addLayer(m)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=c({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(i){this._setLayerStyle(i,e)},this)},_setLayerStyle:function(e,i){e.setStyle&&(typeof i=="function"&&(i=i(e.feature)),e.setStyle(i))}});function on(e,i){var o=e.type==="Feature"?e.geometry:e,a=o?o.coordinates:null,l=[],f=i&&i.pointToLayer,m=i&&i.coordsToLatLng||Tr,y,b,C,w;if(!a&&!o)return null;switch(o.type){case"Point":return y=m(a),Go(f,e,y,i);case"MultiPoint":for(C=0,w=a.length;C<w;C++)y=m(a[C]),l.push(Go(f,e,y,i));return new dt(l);case"LineString":case"MultiLineString":return b=an(a,o.type==="LineString"?0:1,m),new ft(b,i);case"Polygon":case"MultiPolygon":return b=an(a,o.type==="Polygon"?1:2,m),new qt(b,i);case"GeometryCollection":for(C=0,w=o.geometries.length;C<w;C++){var I=on({geometry:o.geometries[C],type:"Feature",properties:e.properties},i);I&&l.push(I)}return new dt(l);case"FeatureCollection":for(C=0,w=o.features.length;C<w;C++){var q=on(o.features[C],i);q&&l.push(q)}return new dt(l);default:throw new Error("Invalid GeoJSON object.")}}function Go(e,i,o,a){return e?e(i,o):new rn(o,a&&a.markersInheritOptions&&a)}function Tr(e){return new ee(e[1],e[0],e[2])}function an(e,i,o){for(var a=[],l=0,f=e.length,m;l<f;l++)m=i?an(e[l],i-1,o):(o||Tr)(e[l]),a.push(m);return a}function wr(e,i){return e=V(e),e.alt!==void 0?[x(e.lng,i),x(e.lat,i),x(e.alt,i)]:[x(e.lng,i),x(e.lat,i)]}function cn(e,i,o,a){for(var l=[],f=0,m=e.length;f<m;f++)l.push(i?cn(e[f],We(e[f])?0:i-1,o,a):wr(e[f],a));return!i&&o&&l.length>0&&l.push(l[0].slice()),l}function Vt(e,i){return e.feature?c({},e.feature,{geometry:i}):ln(i)}function ln(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Sr={toGeoJSON:function(e){return Vt(this,{type:"Point",coordinates:wr(this.getLatLng(),e)})}};rn.include(Sr),Cr.include(Sr),sn.include(Sr),ft.include({toGeoJSON:function(e){var i=!We(this._latlngs),o=cn(this._latlngs,i?1:0,!1,e);return Vt(this,{type:(i?"Multi":"")+"LineString",coordinates:o})}}),qt.include({toGeoJSON:function(e){var i=!We(this._latlngs),o=i&&!We(this._latlngs[0]),a=cn(this._latlngs,o?2:i?1:0,!0,e);return i||(a=[a]),Vt(this,{type:(o?"Multi":"")+"Polygon",coordinates:a})}}),Ut.include({toMultiPoint:function(e){var i=[];return this.eachLayer(function(o){i.push(o.toGeoJSON(e).geometry.coordinates)}),Vt(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(e){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(e);var o=i==="GeometryCollection",a=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(e);if(o)a.push(f.geometry);else{var m=ln(f);m.type==="FeatureCollection"?a.push.apply(a,m.features):a.push(m)}}}),o?Vt(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function Ko(e,i){return new pt(e,i)}var Vh=Ko,hn=et.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,i,o){this._url=e,this._bounds=Q(i),P(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(j(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){de(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Zt(this._image),this},bringToBack:function(){return this._map&&Ft(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=Q(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",i=this._image=e?this._url:J("img");if(j(i,"leaflet-image-layer"),this._zoomAnimated&&j(i,"leaflet-zoom-animated"),this.options.className&&j(i,this.options.className),i.onselectstart=_,i.onmousemove=_,i.onload=u(this.fire,this,"load"),i.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;kt(this._image,o,i)},_reset:function(){var e=this._image,i=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();Ce(e,i.min),e.style.width=o.x+"px",e.style.height=o.y+"px"},_updateOpacity:function(){He(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Hh=function(e,i,o){return new hn(e,i,o)},Yo=hn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",i=this._image=e?this._url:J("video");if(j(i,"leaflet-image-layer"),this._zoomAnimated&&j(i,"leaflet-zoom-animated"),this.options.className&&j(i,this.options.className),i.onselectstart=_,i.onmousemove=_,i.onloadeddata=u(this.fire,this,"load"),e){for(var o=i.getElementsByTagName("source"),a=[],l=0;l<o.length;l++)a.push(o[l].src);this._url=o.length>0?a:[i.src];return}ne(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var m=J("source");m.src=this._url[f],i.appendChild(m)}}});function Wh(e,i,o){return new Yo(e,i,o)}var Jo=hn.extend({_initImage:function(){var e=this._image=this._url;j(e,"leaflet-image-layer"),this._zoomAnimated&&j(e,"leaflet-zoom-animated"),this.options.className&&j(e,this.options.className),e.onselectstart=_,e.onmousemove=_}});function Gh(e,i,o){return new Jo(e,i,o)}var at=et.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,i){e&&(e instanceof ee||ne(e))?(this._latlng=V(e),P(this,i)):(P(this,e),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&He(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&He(this._container,1),this.bringToFront(),this.options.interactive&&(j(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(He(this._container,0),this._removeTimeout=setTimeout(u(de,void 0,this._container),200)):de(this._container),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=V(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Zt(this._container),this},bringToBack:function(){return this._map&&Ft(this._container),this},_prepareOpen:function(e){var i=this._source;if(!i._map)return!1;if(i instanceof dt){i=null;var o=this._source._layers;for(var a in o)if(o[a]._map){i=o[a];break}if(!i)return!1;this._source=i}if(!e)if(i.getCenter)e=i.getCenter();else if(i.getLatLng)e=i.getLatLng();else if(i.getBounds)e=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")e.innerHTML=i;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),i=S(this.options.offset),o=this._getAnchor();this._zoomAnimated?Ce(this._container,e.add(o)):i=i.add(e).add(o);var a=this._containerBottom=-i.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=a+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});G.include({_initOverlay:function(e,i,o,a){var l=i;return l instanceof e||(l=new e(a).setContent(i)),o&&l.setLatLng(o),l}}),et.include({_initOverlay:function(e,i,o,a){var l=o;return l instanceof e?(P(l,a),l._source=this):(l=i&&!a?i:new e(a,this),l.setContent(o)),l}});var un=at.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,at.prototype.openOn.call(this,e)},onAdd:function(e){at.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof yt||this._source.on("preclick",Et))},onRemove:function(e){at.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof yt||this._source.off("preclick",Et))},getEvents:function(){var e=at.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",i=this._container=J("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=J("div",e+"-content-wrapper",i);if(this._contentNode=J("div",e+"-content",o),pi(i),pr(this._contentNode),D(i,"contextmenu",Et),this._tipContainer=J("div",e+"-tip-container",i),this._tip=J("div",e+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=J("a",e+"-close-button",i);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',D(a,"click",function(l){Le(l),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,i=e.style;i.width="",i.whiteSpace="nowrap";var o=e.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var a=e.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&a>l?(i.height=l+"px",j(e,f)):ge(e,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var i=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),o=this._getAnchor();Ce(this._container,i.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,i=parseInt(hi(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+i,a=this._containerWidth,l=new T(this._containerLeft,-o-this._containerBottom);l._add(Lt(this._container));var f=e.layerPointToContainerPoint(l),m=S(this.options.autoPanPadding),y=S(this.options.autoPanPaddingTopLeft||m),b=S(this.options.autoPanPaddingBottomRight||m),C=e.getSize(),w=0,I=0;f.x+a+b.x>C.x&&(w=f.x+a-C.x+b.x),f.x-w-y.x<0&&(w=f.x-y.x),f.y+o+b.y>C.y&&(I=f.y+o-C.y+b.y),f.y-I-y.y<0&&(I=f.y-y.y),(w||I)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([w,I]))}},_getAnchor:function(){return S(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Kh=function(e,i){return new un(e,i)};G.mergeOptions({closePopupOnClick:!0}),G.include({openPopup:function(e,i,o){return this._initOverlay(un,e,i,o).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),et.include({bindPopup:function(e,i){return this._popup=this._initOverlay(un,this._popup,e,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof dt||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Rt(e);var i=e.layer||e.target;if(this._popup._source===i&&!(i instanceof yt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=i,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var dn=at.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){at.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){at.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=at.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",i=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=J("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var i,o,a=this._map,l=this._container,f=a.latLngToContainerPoint(a.getCenter()),m=a.layerPointToContainerPoint(e),y=this.options.direction,b=l.offsetWidth,C=l.offsetHeight,w=S(this.options.offset),I=this._getAnchor();y==="top"?(i=b/2,o=C):y==="bottom"?(i=b/2,o=0):y==="center"?(i=b/2,o=C/2):y==="right"?(i=0,o=C/2):y==="left"?(i=b,o=C/2):m.x<f.x?(y="right",i=0,o=C/2):(y="left",i=b+(w.x+I.x)*2,o=C/2),e=e.subtract(S(i,o,!0)).add(w).add(I),ge(l,"leaflet-tooltip-right"),ge(l,"leaflet-tooltip-left"),ge(l,"leaflet-tooltip-top"),ge(l,"leaflet-tooltip-bottom"),j(l,"leaflet-tooltip-"+y),Ce(l,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&He(this._container,e)},_animateZoom:function(e){var i=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(i)},_getAnchor:function(){return S(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yh=function(e,i){return new dn(e,i)};G.include({openTooltip:function(e,i,o){return this._initOverlay(dn,e,i,o).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),et.include({bindTooltip:function(e,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(dn,this._tooltip,e,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var i=e?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[i](o),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof dt||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var i=typeof e.getElement=="function"&&e.getElement();i&&(D(i,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),D(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var i=typeof e.getElement=="function"&&e.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var i=e.latlng,o,a;this._tooltip.options.sticky&&e.originalEvent&&(o=this._map.mouseEventToContainerPoint(e.originalEvent),a=this._map.containerPointToLayerPoint(o),i=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(i)}});var Xo=jt.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var i=e&&e.tagName==="DIV"?e:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Ji(i),i.appendChild(o.html)):i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var a=S(o.bgPos);i.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Jh(e){return new Xo(e)}jt.Default=gi;var vi=et.extend({options:{tileSize:256,opacity:1,updateWhenIdle:O.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){P(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),de(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Zt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ft(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof T?e:new T(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var i=this.getPane().children,o=-e(-1/0,1/0),a=0,l=i.length,f;a<l;a++)f=i[a].style.zIndex,i[a]!==this._container&&f&&(o=e(o,+f));isFinite(o)&&(this.options.zIndex=o+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!O.ielt9){He(this._container,this.options.opacity);var e=+new Date,i=!1,o=!1;for(var a in this._tiles){var l=this._tiles[a];if(!(!l.current||!l.loaded)){var f=Math.min(1,(e-l.loaded)/200);He(l.el,f),f<1?i=!0:(l.active?o=!0:this._onOpaqueTile(l),l.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(_e(this._fadeFrame),this._fadeFrame=oe(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=J("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,i=this.options.maxZoom;if(e!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===e?(this._levels[o].el.style.zIndex=i-Math.abs(e-o),this._onUpdateLevel(o)):(de(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var a=this._levels[e],l=this._map;return a||(a=this._levels[e]={},a.el=J("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=i,a.origin=l.project(l.unproject(l.getPixelOrigin()),e).round(),a.zoom=e,this._setZoomTransform(a,l.getCenter(),l.getZoom()),_(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var e,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)i=this._tiles[e],i.retain=i.current;for(e in this._tiles)if(i=this._tiles[e],i.current&&!i.active){var a=i.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var i in this._tiles)this._tiles[i].coords.z===e&&this._removeTile(i)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)de(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,i,o,a){var l=Math.floor(e/2),f=Math.floor(i/2),m=o-1,y=new T(+l,+f);y.z=+m;var b=this._tileCoordsToKey(y),C=this._tiles[b];return C&&C.active?(C.retain=!0,!0):(C&&C.loaded&&(C.retain=!0),m>a?this._retainParent(l,f,m,a):!1)},_retainChildren:function(e,i,o,a){for(var l=2*e;l<2*e+2;l++)for(var f=2*i;f<2*i+2;f++){var m=new T(l,f);m.z=o+1;var y=this._tileCoordsToKey(m),b=this._tiles[y];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);o+1<a&&this._retainChildren(l,f,o+1,a)}},_resetView:function(e){var i=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var i=this.options;return i.minNativeZoom!==void 0&&e<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<e?i.maxNativeZoom:e},_setView:function(e,i,o,a){var l=Math.round(i);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!a||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(e),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(e,i)},_setZoomTransforms:function(e,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],e,i)},_setZoomTransform:function(e,i,o){var a=this._map.getZoomScale(o,e.zoom),l=e.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(i,o)).round();O.any3d?kt(e.el,l,a):Ce(e.el,l)},_resetGrid:function(){var e=this._map,i=e.options.crs,o=this._tileSize=this.getTileSize(),a=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,i.wrapLng[0]],a).x/o.x),Math.ceil(e.project([0,i.wrapLng[1]],a).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([i.wrapLat[0],0],a).y/o.x),Math.ceil(e.project([i.wrapLat[1],0],a).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),a=i.getZoomScale(o,this._tileZoom),l=i.project(e,this._tileZoom).floor(),f=i.getSize().divideBy(a*2);return new W(l.subtract(f),l.add(f))},_update:function(e){var i=this._map;if(i){var o=this._clampZoom(i.getZoom());if(e===void 0&&(e=i.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(e),l=this._pxBoundsToTileRange(a),f=l.getCenter(),m=[],y=this.options.keepBuffer,b=new W(l.getBottomLeft().subtract([y,-y]),l.getTopRight().add([y,-y]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var C in this._tiles){var w=this._tiles[C].coords;(w.z!==this._tileZoom||!b.contains(new T(w.x,w.y)))&&(this._tiles[C].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(e,o);return}for(var I=l.min.y;I<=l.max.y;I++)for(var q=l.min.x;q<=l.max.x;q++){var Ne=new T(q,I);if(Ne.z=this._tileZoom,!!this._isValidTile(Ne)){var Pe=this._tiles[this._tileCoordsToKey(Ne)];Pe?Pe.current=!0:m.push(Ne)}}if(m.sort(function(Ze,Wt){return Ze.distanceTo(f)-Wt.distanceTo(f)}),m.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ge=document.createDocumentFragment();for(q=0;q<m.length;q++)this._addTile(m[q],Ge);this._level.el.appendChild(Ge)}}}},_isValidTile:function(e){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(e.x<o.min.x||e.x>o.max.x)||!i.wrapLat&&(e.y<o.min.y||e.y>o.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(e);return Q(this.options.bounds).overlaps(a)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var i=this._map,o=this.getTileSize(),a=e.scaleBy(o),l=a.add(o),f=i.unproject(a,e.z),m=i.unproject(l,e.z);return[f,m]},_tileCoordsToBounds:function(e){var i=this._tileCoordsToNwSe(e),o=new ie(i[0],i[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var i=e.split(":"),o=new T(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(e){var i=this._tiles[e];i&&(de(i.el),delete this._tiles[e],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){j(e,"leaflet-tile");var i=this.getTileSize();e.style.width=i.x+"px",e.style.height=i.y+"px",e.onselectstart=_,e.onmousemove=_,O.ielt9&&this.options.opacity<1&&He(e,this.options.opacity)},_addTile:function(e,i){var o=this._getTilePos(e),a=this._tileCoordsToKey(e),l=this.createTile(this._wrapCoords(e),u(this._tileReady,this,e));this._initTile(l),this.createTile.length<2&&oe(u(this._tileReady,this,e,null,l)),Ce(l,o),this._tiles[a]={el:l,coords:e,current:!0},i.appendChild(l),this.fire("tileloadstart",{tile:l,coords:e})},_tileReady:function(e,i,o){i&&this.fire("tileerror",{error:i,tile:o,coords:e});var a=this._tileCoordsToKey(e);o=this._tiles[a],o&&(o.loaded=+new Date,this._map._fadeAnimated?(He(o.el,0),_e(this._fadeFrame),this._fadeFrame=oe(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(j(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),O.ielt9||!this._map._fadeAnimated?oe(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var i=new T(this._wrapX?v(e.x,this._wrapX):e.x,this._wrapY?v(e.y,this._wrapY):e.y);return i.z=e.z,i},_pxBoundsToTileRange:function(e){var i=this.getTileSize();return new W(e.min.unscaleBy(i).floor(),e.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Xh(e){return new vi(e)}var Ht=vi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,i){this._url=e,i=P(this,i),i.detectRetina&&O.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,i){return this._url===e&&i===void 0&&(i=!0),this._url=e,i||this.redraw(),this},createTile:function(e,i){var o=document.createElement("img");return D(o,"load",u(this._tileOnLoad,this,i,o)),D(o,"error",u(this._tileOnError,this,i,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(e),o},getTileUrl:function(e){var i={r:O.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=o),i["-y"]=o}return be(this._url,c(i,this.options))},_tileOnLoad:function(e,i){O.ielt9?setTimeout(u(e,this,null,i),0):e(null,i)},_tileOnError:function(e,i,o){var a=this.options.errorTileUrl;a&&i.getAttribute("src")!==a&&(i.src=a),e(o,i)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,i=this.options.maxZoom,o=this.options.zoomReverse,a=this.options.zoomOffset;return o&&(e=i-e),e+a},_getSubdomain:function(e){var i=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var e,i;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(i=this._tiles[e].el,i.onload=_,i.onerror=_,!i.complete)){i.src=ze;var o=this._tiles[e].coords;de(i),delete this._tiles[e],this.fire("tileabort",{tile:i,coords:o})}},_removeTile:function(e){var i=this._tiles[e];if(i)return i.el.setAttribute("src",ze),vi.prototype._removeTile.call(this,e)},_tileReady:function(e,i,o){if(!(!this._map||o&&o.getAttribute("src")===ze))return vi.prototype._tileReady.call(this,e,i,o)}});function Qo(e,i){return new Ht(e,i)}var ea=Ht.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,i){this._url=e;var o=c({},this.defaultWmsParams);for(var a in i)a in this.options||(o[a]=i[a]);i=P(this,i);var l=i.detectRetina&&O.retina?2:1,f=this.getTileSize();o.width=f.x*l,o.height=f.y*l,this.wmsParams=o},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Ht.prototype.onAdd.call(this,e)},getTileUrl:function(e){var i=this._tileCoordsToNwSe(e),o=this._crs,a=X(o.project(i[0]),o.project(i[1])),l=a.min,f=a.max,m=(this._wmsVersion>=1.3&&this._crs===Ho?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),y=Ht.prototype.getTileUrl.call(this,e);return y+Ue(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+m},setParams:function(e,i){return c(this.wmsParams,e),i||this.redraw(),this}});function Qh(e,i){return new ea(e,i)}Ht.WMS=ea,Qo.wms=Qh;var mt=et.extend({options:{padding:.1},initialize:function(e){P(this,e),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),j(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,i){var o=this._map.getZoomScale(i,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,i),f=a.multiplyBy(-o).add(l).subtract(this._map._getNewPixelOrigin(e,i));O.any3d?kt(this._container,f,o):Ce(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-e)).round();this._bounds=new W(o,o.add(i.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ta=mt.extend({options:{tolerance:0},getEvents:function(){var e=mt.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");D(e,"mousemove",this._onMouseMove,this),D(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),D(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){_e(this._redrawRequest),delete this._ctx,de(this._container),se(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var i in this._layers)e=this._layers[i],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mt.prototype._update.call(this);var e=this._bounds,i=this._container,o=e.getSize(),a=O.retina?2:1;Ce(i,e.min),i.width=a*o.x,i.height=a*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",O.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){mt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[p(e)]=e;var i=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var i=e._order,o=i.next,a=i.prev;o?o.prev=a:this._drawLast=a,a?a.next=o:this._drawFirst=o,delete e._order,delete this._layers[p(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var i=e.options.dashArray.split(/[, ]+/),o=[],a,l;for(l=0;l<i.length;l++){if(a=Number(i[l]),isNaN(a))return;o.push(a)}e.options._dashArray=o}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||oe(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var i=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(e._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(e._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var i=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,i=this._redrawBounds;if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)e=a.layer,(!i||e._pxBounds&&e._pxBounds.intersects(i))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,i){if(this._drawing){var o,a,l,f,m=e._parts,y=m.length,b=this._ctx;if(y){for(b.beginPath(),o=0;o<y;o++){for(a=0,l=m[o].length;a<l;a++)f=m[o][a],b[a?"lineTo":"moveTo"](f.x,f.y);i&&b.closePath()}this._fillStroke(b,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var i=e._point,o=this._ctx,a=Math.max(Math.round(e._radius),1),l=(Math.max(Math.round(e._radiusY),1)||a)/a;l!==1&&(o.save(),o.scale(1,l)),o.beginPath(),o.arc(i.x,i.y/l,a,0,Math.PI*2,!1),l!==1&&o.restore(),this._fillStroke(o,e)}},_fillStroke:function(e,i){var o=i.options;o.fill&&(e.globalAlpha=o.fillOpacity,e.fillStyle=o.fillColor||o.color,e.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(e.setLineDash&&e.setLineDash(i.options&&i.options._dashArray||[]),e.globalAlpha=o.opacity,e.lineWidth=o.weight,e.strokeStyle=o.color,e.lineCap=o.lineCap,e.lineJoin=o.lineJoin,e.stroke())},_onClick:function(e){for(var i=this._map.mouseEventToLayerPoint(e),o,a,l=this._drawFirst;l;l=l.next)o=l.layer,o.options.interactive&&o._containsPoint(i)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(o))&&(a=o);this._fireEvent(a?[a]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,i)}},_handleMouseOut:function(e){var i=this._hoveredLayer;i&&(ge(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,i){if(!this._mouseHoverThrottled){for(var o,a,l=this._drawFirst;l;l=l.next)o=l.layer,o.options.interactive&&o._containsPoint(i)&&(a=o);a!==this._hoveredLayer&&(this._handleMouseOut(e),a&&(j(this._container,"leaflet-interactive"),this._fireEvent([a],e,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,i,o){this._map._fireDOMEvent(i,o||i.type,e)},_bringToFront:function(e){var i=e._order;if(i){var o=i.next,a=i.prev;if(o)o.prev=a;else return;a?a.next=o:o&&(this._drawFirst=o),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(e)}},_bringToBack:function(e){var i=e._order;if(i){var o=i.next,a=i.prev;if(a)a.next=o;else return;o?o.prev=a:a&&(this._drawLast=a),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(e)}}});function ia(e){return O.canvas?new ta(e):null}var yi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),eu={_initContainer:function(){this._container=J("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mt.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var i=e._container=yi("shape");j(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",e._path=yi("path"),i.appendChild(e._path),this._updateStyle(e),this._layers[p(e)]=e},_addPath:function(e){var i=e._container;this._container.appendChild(i),e.options.interactive&&e.addInteractiveTarget(i)},_removePath:function(e){var i=e._container;de(i),e.removeInteractiveTarget(i),delete this._layers[p(e)]},_updateStyle:function(e){var i=e._stroke,o=e._fill,a=e.options,l=e._container;l.stroked=!!a.stroke,l.filled=!!a.fill,a.stroke?(i||(i=e._stroke=yi("stroke")),l.appendChild(i),i.weight=a.weight+"px",i.color=a.color,i.opacity=a.opacity,a.dashArray?i.dashStyle=ne(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=a.lineCap.replace("butt","flat"),i.joinstyle=a.lineJoin):i&&(l.removeChild(i),e._stroke=null),a.fill?(o||(o=e._fill=yi("fill")),l.appendChild(o),o.color=a.fillColor||a.color,o.opacity=a.fillOpacity):o&&(l.removeChild(o),e._fill=null)},_updateCircle:function(e){var i=e._point.round(),o=Math.round(e._radius),a=Math.round(e._radiusY||o);this._setPath(e,e._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+a+" 0,"+65535*360)},_setPath:function(e,i){e._path.v=i},_bringToFront:function(e){Zt(e._container)},_bringToBack:function(e){Ft(e._container)}},fn=O.vml?yi:U,bi=mt.extend({_initContainer:function(){this._container=fn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){de(this._container),se(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mt.prototype._update.call(this);var e=this._bounds,i=e.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),Ce(o,e.min),o.setAttribute("viewBox",[e.min.x,e.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(e){var i=e._path=fn("path");e.options.className&&j(i,e.options.className),e.options.interactive&&j(i,"leaflet-interactive"),this._updateStyle(e),this._layers[p(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){de(e._path),e.removeInteractiveTarget(e._path),delete this._layers[p(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var i=e._path,o=e.options;i&&(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(e,i){this._setPath(e,k(e._parts,i))},_updateCircle:function(e){var i=e._point,o=Math.max(Math.round(e._radius),1),a=Math.max(Math.round(e._radiusY),1)||o,l="a"+o+","+a+" 0 1,0 ",f=e._empty()?"M0 0":"M"+(i.x-o)+","+i.y+l+o*2+",0 "+l+-o*2+",0 ";this._setPath(e,f)},_setPath:function(e,i){e._path.setAttribute("d",i)},_bringToFront:function(e){Zt(e._path)},_bringToBack:function(e){Ft(e._path)}});O.vml&&bi.include(eu);function na(e){return O.svg||O.vml?new bi(e):null}G.include({getRenderer:function(e){var i=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var i=this._paneRenderers[e];return i===void 0&&(i=this._createRenderer({pane:e}),this._paneRenderers[e]=i),i},_createRenderer:function(e){return this.options.preferCanvas&&ia(e)||na(e)}});var ra=qt.extend({initialize:function(e,i){qt.prototype.initialize.call(this,this._boundsToLatLngs(e),i)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=Q(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function tu(e,i){return new ra(e,i)}bi.create=fn,bi.pointsToPath=k,pt.geometryToLayer=on,pt.coordsToLatLng=Tr,pt.coordsToLatLngs=an,pt.latLngToCoords=wr,pt.latLngsToCoords=cn,pt.getFeature=Vt,pt.asFeature=ln,G.mergeOptions({boxZoom:!0});var sa=ot.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){D(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){se(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){de(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ui(),or(),this._startPoint=this._map.mouseEventToContainerPoint(e),D(document,{contextmenu:Rt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=J("div","leaflet-zoom-box",this._container),j(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var i=new W(this._point,this._startPoint),o=i.getSize();Ce(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(de(this._box),ge(this._container,"leaflet-crosshair")),di(),ar(),se(document,{contextmenu:Rt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var i=new ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});G.addInitHook("addHandler","boxZoom",sa),G.mergeOptions({doubleClickZoom:!0});var oa=ot.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var i=this._map,o=i.getZoom(),a=i.options.zoomDelta,l=e.originalEvent.shiftKey?o-a:o+a;i.options.doubleClickZoom==="center"?i.setZoom(l):i.setZoomAround(e.containerPoint,l)}});G.addInitHook("addHandler","doubleClickZoom",oa),G.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var aa=ot.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new vt(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}j(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ge(this._map._container,"leaflet-grab"),ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=Q(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),this._prunePositions(i)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,i){return e-(e-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;e.x<i.min.x&&(e.x=this._viscousLimit(e.x,i.min.x)),e.y<i.min.y&&(e.y=this._viscousLimit(e.y,i.min.y)),e.x>i.max.x&&(e.x=this._viscousLimit(e.x,i.max.x)),e.y>i.max.y&&(e.y=this._viscousLimit(e.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,i=Math.round(e/2),o=this._initialWorldOffset,a=this._draggable._newPos.x,l=(a-i+o)%e+i-o,f=(a+i+o)%e-i-o,m=Math.abs(l+o)<Math.abs(f+o)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=m},_onDragEnd:function(e){var i=this._map,o=i.options,a=!o.inertia||e.noInertia||this._times.length<2;if(i.fire("dragend",e),a)i.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,m=o.easeLinearity,y=l.multiplyBy(m/f),b=y.distanceTo([0,0]),C=Math.min(o.inertiaMaxSpeed,b),w=y.multiplyBy(C/b),I=C/(o.inertiaDeceleration*m),q=w.multiplyBy(-I/2).round();!q.x&&!q.y?i.fire("moveend"):(q=i._limitOffset(q,i.options.maxBounds),oe(function(){i.panBy(q,{duration:I,easeLinearity:m,noMoveStart:!0,animate:!0})}))}}});G.addInitHook("addHandler","dragging",aa),G.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ca=ot.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),D(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),se(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,i=document.documentElement,o=e.scrollTop||i.scrollTop,a=e.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(a,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var i=this._panKeys={},o=this.keyCodes,a,l;for(a=0,l=o.left.length;a<l;a++)i[o.left[a]]=[-1*e,0];for(a=0,l=o.right.length;a<l;a++)i[o.right[a]]=[e,0];for(a=0,l=o.down.length;a<l;a++)i[o.down[a]]=[0,e];for(a=0,l=o.up.length;a<l;a++)i[o.up[a]]=[0,-1*e]},_setZoomDelta:function(e){var i=this._zoomKeys={},o=this.keyCodes,a,l;for(a=0,l=o.zoomIn.length;a<l;a++)i[o.zoomIn[a]]=e;for(a=0,l=o.zoomOut.length;a<l;a++)i[o.zoomOut[a]]=-e},_addHooks:function(){D(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){se(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var i=e.keyCode,o=this._map,a;if(i in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(a=this._panKeys[i],e.shiftKey&&(a=S(a).multiplyBy(3)),o.options.maxBounds&&(a=o._limitOffset(S(a),o.options.maxBounds)),o.options.worldCopyJump){var l=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(a)));o.panTo(l)}else o.panBy(a)}else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Rt(e)}}});G.addInitHook("addHandler","keyboard",ca),G.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var la=ot.extend({addHooks:function(){D(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){se(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var i=Mo(e),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var a=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),a),Rt(e)},_performZoom:function(){var e=this._map,i=e.getZoom(),o=this._map.options.zoomSnap||0;e._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,f=o?Math.ceil(l/o)*o:l,m=e._limitZoom(i+(this._delta>0?f:-f))-i;this._delta=0,this._startTime=null,m&&(e.options.scrollWheelZoom==="center"?e.setZoom(i+m):e.setZoomAround(this._lastMousePos,i+m))}});G.addInitHook("addHandler","scrollWheelZoom",la);var iu=600;G.mergeOptions({tapHold:O.touchNative&&O.safari&&O.mobile,tapTolerance:15});var ha=ot.extend({addHooks:function(){D(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){se(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var i=e.touches[0];this._startPos=this._newPos=new T(i.clientX,i.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(D(document,"touchend",Le),D(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),iu),D(document,"touchend touchcancel contextmenu",this._cancel,this),D(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){se(document,"touchend",Le),se(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),se(document,"touchend touchcancel contextmenu",this._cancel,this),se(document,"touchmove",this._onMove,this)},_onMove:function(e){var i=e.touches[0];this._newPos=new T(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,i){var o=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});o._simulated=!0,i.target.dispatchEvent(o)}});G.addInitHook("addHandler","tapHold",ha),G.mergeOptions({touchZoom:O.touch,bounceAtZoomLimits:!0});var ua=ot.extend({addHooks:function(){j(this._map._container,"leaflet-touch-zoom"),D(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),se(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var i=this._map;if(!(!e.touches||e.touches.length!==2||i._animatingZoom||this._zooming)){var o=i.mouseEventToContainerPoint(e.touches[0]),a=i.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(a)._divideBy(2))),this._startDist=o.distanceTo(a),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),D(document,"touchmove",this._onTouchMove,this),D(document,"touchend touchcancel",this._onTouchEnd,this),Le(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var i=this._map,o=i.mouseEventToContainerPoint(e.touches[0]),a=i.mouseEventToContainerPoint(e.touches[1]),l=o.distanceTo(a)/this._startDist;if(this._zoom=i.getScaleZoom(l,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&l<1||this._zoom>i.getMaxZoom()&&l>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=o._add(a)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),_e(this._animRequest);var m=u(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=oe(m,this,!0),Le(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,_e(this._animRequest),se(document,"touchmove",this._onTouchMove,this),se(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});G.addInitHook("addHandler","touchZoom",ua),G.BoxZoom=sa,G.DoubleClickZoom=oa,G.Drag=aa,G.Keyboard=ca,G.ScrollWheelZoom=la,G.TapHold=ha,G.TouchZoom=ua,n.Bounds=W,n.Browser=O,n.CRS=Ve,n.Canvas=ta,n.Circle=Cr,n.CircleMarker=sn,n.Class=Y,n.Control=Qe,n.DivIcon=Xo,n.DivOverlay=at,n.DomEvent=bh,n.DomUtil=vh,n.Draggable=vt,n.Evented=M,n.FeatureGroup=dt,n.GeoJSON=pt,n.GridLayer=vi,n.Handler=ot,n.Icon=jt,n.ImageOverlay=hn,n.LatLng=ee,n.LatLngBounds=ie,n.Layer=et,n.LayerGroup=Ut,n.LineUtil=Mh,n.Map=G,n.Marker=rn,n.Mixin=kh,n.Path=yt,n.Point=T,n.PolyUtil=Lh,n.Polygon=qt,n.Polyline=ft,n.Popup=un,n.PosAnimation=Io,n.Projection=Ih,n.Rectangle=ra,n.Renderer=mt,n.SVG=bi,n.SVGOverlay=Jo,n.TileLayer=Ht,n.Tooltip=dn,n.Transformation=A,n.Util=De,n.VideoOverlay=Yo,n.bind=u,n.bounds=X,n.canvas=ia,n.circle=Uh,n.circleMarker=Fh,n.control=mi,n.divIcon=Jh,n.extend=c,n.featureGroup=Nh,n.geoJSON=Ko,n.geoJson=Vh,n.gridLayer=Xh,n.icon=$h,n.imageOverlay=Hh,n.latLng=V,n.latLngBounds=Q,n.layerGroup=Dh,n.map=xh,n.marker=Zh,n.point=S,n.polygon=qh,n.polyline=jh,n.popup=Kh,n.rectangle=tu,n.setOptions=P,n.stamp=p,n.svg=na,n.svgOverlay=Gh,n.tileLayer=Qo,n.tooltip=Yh,n.transformation=Z,n.version=s,n.videoOverlay=Wh;var nu=window.L;n.noConflict=function(){return window.L=nu,this},window.L=n})}(ei,ei.exports)),ei.exports}_l(),Ct(["click"]);const gl="https://talkizi.com/api";function vl(){return Array.from(document.querySelectorAll("script[src]")).find(r=>r.src.includes("widget.js"))||null}async function yl(r){const t=await fl("config");if(t)return console.log("✅ Config trouvée dans le cache.",t),t;try{const s=await(await fetch(`${gl}/configs/validate/${encodeURIComponent(r)}`,{cache:"force-cache"})).json();return s.valid?(await dl("config",s,3600),s):(console.error("❌ Clé API invalide."),null)}catch(n){return console.error("❌ Erreur API:",n),null}}async function zn(){const r=vl();console.log(r);let t=r==null?void 0:r.getAttribute("data-key"),n=r==null?void 0:r.getAttribute("data-show"),s=n===null?!0:n==="true";t||(console.error("❌ API key manquante."),t="Stuc)vW47b.e5?@FGYbj");const c=await yl(t);if(!c||!c.valid){console.warn("❌ Config invalide ou absente. Rien ne sera affiché.");return}const u=new URLSearchParams(window.location.search).get("talkiziId");u&&(c.talkiziId=u,c.rooms=[{_id:u,name:"Private Room"}]);const d=document.createElement("div");document.body.appendChild(d);{if(console.info("🟣 Mode special actif → rendu uniquement de la modale.",s),!s){Br(()=>[],d);return}Br(()=>fe(Ba,{get children(){return s&&fe(hl,{config:c})}}),d);return}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",zn):zn(),window.TalkiziWidget={...window.TalkiziWidget||{},start:zn,version:"1.0.0-06082025",env:"special"};class bl{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return xl(t).buffer}}function xl(r){let t=0;for(const c of r)t+=c.byteLength;const n=new Uint8Array(t);let s=0;for(const c of r){const h=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n.set(h,s),s+=c.byteLength}return n}function us(r){return new Cl(r).unpack()}function ds(r){const t=new Tl,n=t.pack(r);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class Cl{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let s=0,c="",h,u;for(;s<t;)h=n[s],h<160?(u=h,s++):(h^192)<32?(u=(h&31)<<6|n[s+1]&63,s+=2):(h^224)<16?(u=(h&15)<<12|(n[s+1]&63)<<6|n[s+2]&63,s+=3):(u=(h&7)<<18|(n[s+1]&63)<<12|(n[s+2]&63)<<6|n[s+3]&63,s+=4),c+=String.fromCodePoint(u);return this.index+=t,c}unpack_array(t){const n=new Array(t);for(let s=0;s<t;s++)n[s]=this.unpack();return n}unpack_map(t){const n={};for(let s=0;s<t;s++){const c=this.unpack();n[c]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,s=(t>>23&255)-127,c=t&8388607|8388608;return(n===0?1:-1)*c*2**(s-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),s=t>>31,c=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(c-20)+n*2**(c-52);return(s===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class Tl{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const s=this.pack_array(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const s=t;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const s=this.pack_object(t);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),s=n.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const s=c=>{if(c<n){const h=this.pack(t[c]);return h instanceof Promise?h.then(()=>s(c+1)):s(c+1)}};return s(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const s=Math.floor(Math.log(t)/Math.LN2),c=t/2**s-1,h=Math.floor(c*2**52),u=2**32,d=n<<31|s+1023<<20|h/u&1048575,p=h%u;this._bufferBuilder.append(203),this.pack_int32(d),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),s=n.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const c=h=>{if(h<n.length){const u=n[h];if(t.hasOwnProperty(u)){this.pack(u);const d=this.pack(t[u]);if(d instanceof Promise)return d.then(()=>c(h+1))}return c(h+1)}};return c(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),s=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new bl,this._textEncoder=new TextEncoder}}let fs=!0,ps=!0;function ti(r,t,n){const s=r.match(t);return s&&s.length>=n&&parseFloat(s[n],10)}function Tt(r,t,n){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,c=s.addEventListener;s.addEventListener=function(u,d){if(u!==t)return c.apply(this,arguments);const p=g=>{const v=n(g);v&&(d.handleEvent?d.handleEvent(v):d(v))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(d,p),c.apply(this,[u,p])};const h=s.removeEventListener;s.removeEventListener=function(u,d){if(u!==t||!this._eventMap||!this._eventMap[t])return h.apply(this,arguments);if(!this._eventMap[t].has(d))return h.apply(this,arguments);const p=this._eventMap[t].get(d);return this._eventMap[t].delete(d),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,h.apply(this,[u,p])},Object.defineProperty(s,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function wl(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(fs=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Sl(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(ps=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function ms(){if(typeof window=="object"){if(fs)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bn(r,t){ps&&console.warn(r+" is deprecated, please use "+t+" instead.")}function Pl(r){const t={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=r;if(n.userAgentData&&n.userAgentData.brands){const s=n.userAgentData.brands.find(c=>c.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(ti(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(ti(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(ti(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,t._safariVersion=ti(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function _s(r){return Object.prototype.toString.call(r)==="[object Object]"}function gs(r){return _s(r)?Object.keys(r).reduce(function(t,n){const s=_s(r[n]),c=s?gs(r[n]):r[n],h=s&&!Object.keys(c).length;return c===void 0||h?t:Object.assign(t,{[n]:c})},{}):r}function Dn(r,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(s=>{s.endsWith("Id")?Dn(r,r.get(t[s]),n):s.endsWith("Ids")&&t[s].forEach(c=>{Dn(r,r.get(c),n)})}))}function vs(r,t,n){const s=n?"outbound-rtp":"inbound-rtp",c=new Map;if(t===null)return c;const h=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&h.push(u)}),h.forEach(u=>{r.forEach(d=>{d.type===s&&d.trackId===u.id&&Dn(r,d,c)})}),c}const ys=ms;function bs(r,t){const n=r&&r.navigator;if(!n.mediaDevices)return;const s=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const p={};return Object.keys(d).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const v=typeof d[g]=="object"?d[g]:{ideal:d[g]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const _=function(x,R){return x?x+R.charAt(0).toUpperCase()+R.slice(1):R==="deviceId"?"sourceId":R};if(v.ideal!==void 0){p.optional=p.optional||[];let x={};typeof v.ideal=="number"?(x[_("min",g)]=v.ideal,p.optional.push(x),x={},x[_("max",g)]=v.ideal,p.optional.push(x)):(x[_("",g)]=v.ideal,p.optional.push(x))}v.exact!==void 0&&typeof v.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[_("",g)]=v.exact):["min","max"].forEach(x=>{v[x]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[_(x,g)]=v[x])})}),d.advanced&&(p.optional=(p.optional||[]).concat(d.advanced)),p},c=function(d,p){if(t.version>=61)return p(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const g=function(v,_,x){_ in v&&!(x in v)&&(v[x]=v[_],delete v[_])};d=JSON.parse(JSON.stringify(d)),g(d.audio,"autoGainControl","googAutoGainControl"),g(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=s(d.audio)}if(d&&typeof d.video=="object"){let g=d.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const v=t.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete d.video.facingMode;let _;if(g.exact==="environment"||g.ideal==="environment"?_=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(_=["front"]),_)return n.mediaDevices.enumerateDevices().then(x=>{x=x.filter($=>$.kind==="videoinput");let R=x.find($=>_.some(P=>$.label.toLowerCase().includes(P)));return!R&&x.length&&_.includes("back")&&(R=x[x.length-1]),R&&(d.video.deviceId=g.exact?{exact:R.deviceId}:{ideal:R.deviceId}),d.video=s(d.video),ys("chrome: "+JSON.stringify(d)),p(d)})}d.video=s(d.video)}return ys("chrome: "+JSON.stringify(d)),p(d)},h=function(d){return t.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(d,p,g){c(d,v=>{n.webkitGetUserMedia(v,p,_=>{g&&g(h(_))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return c(p,g=>d(g).then(v=>{if(g.audio&&!v.getAudioTracks().length||g.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(_=>{_.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(h(v))))}}}function xs(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function Cs(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",c=>{let h;r.RTCPeerConnection.prototype.getReceivers?h=this.getReceivers().find(d=>d.track&&d.track.id===c.track.id):h={track:c.track};const u=new Event("track");u.track=c.track,u.receiver=h,u.transceiver={receiver:h},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(c=>{let h;r.RTCPeerConnection.prototype.getReceivers?h=this.getReceivers().find(d=>d.track&&d.track.id===c.id):h={track:c};const u=new Event("track");u.track=c,u.receiver=h,u.transceiver={receiver:h},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Tt(r,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Ts(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const t=function(c,h){return{track:h,get dtmf(){return this._dtmf===void 0&&(h.kind==="audio"?this._dtmf=c.createDTMFSender(h):this._dtmf=null),this._dtmf},_pc:c}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const c=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(d,p){let g=c.apply(this,arguments);return g||(g=t(this,d),this._senders.push(g)),g};const h=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(d){h.apply(this,arguments);const p=this._senders.indexOf(d);p!==-1&&this._senders.splice(p,1)}}const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(h){this._senders=this._senders||[],n.apply(this,[h]),h.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(h){this._senders=this._senders||[],s.apply(this,[h]),h.getTracks().forEach(u=>{const d=this._senders.find(p=>p.track===u);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(c=>c._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ws(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const n=r.RTCPeerConnection.prototype.getSenders;n&&(r.RTCPeerConnection.prototype.getSenders=function(){const h=n.apply(this,[]);return h.forEach(u=>u._pc=this),h});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const h=s.apply(this,arguments);return h._pc=this,h}),r.RTCRtpSender.prototype.getStats=function(){const h=this;return this._pc.getStats().then(u=>vs(u,h.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const n=r.RTCPeerConnection.prototype.getReceivers;n&&(r.RTCPeerConnection.prototype.getReceivers=function(){const c=n.apply(this,[]);return c.forEach(h=>h._pc=this),c}),Tt(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(h=>vs(h,c.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let c,h,u;return this.getSenders().forEach(d=>{d.track===s&&(c?u=!0:c=d)}),this.getReceivers().forEach(d=>(d.track===s&&(h?u=!0:h=d),d.track===s)),u||c&&h?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():h?h.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ss(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,d){if(!d)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(p)===-1&&this._shimmedLocalStreams[d.id].push(p):this._shimmedLocalStreams[d.id]=[d,p],p};const n=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(g=>{if(this.getSenders().find(_=>_.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(g=>d.indexOf(g)===-1);this._shimmedLocalStreams[u.id]=[u].concat(p)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const c=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const p=this._shimmedLocalStreams[d].indexOf(u);p!==-1&&this._shimmedLocalStreams[d].splice(p,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),c.apply(this,arguments)}}function Ps(r,t){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ss(r);const n=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const v=n.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(_=>this._reverseStreams[_.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(_=>{if(this.getSenders().find(R=>R.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const _=new r.MediaStream(v.getTracks());this._streams[v.id]=_,this._reverseStreams[_.id]=v,v=_}s.apply(this,[v])};const c=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},r.RTCPeerConnection.prototype.addTrack=function(v,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(P=>P===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(P=>P.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const $=this._streams[_.id];if($)$.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const P=new r.MediaStream([v]);this._streams[_.id]=P,this._reverseStreams[P.id]=_,this.addStream(P)}return this.getSenders().find(P=>P.track===v)};function h(g,v){let _=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(x=>{const R=g._reverseStreams[x],$=g._streams[R.id];_=_.replace(new RegExp($.id,"g"),R.id)}),new RTCSessionDescription({type:v.type,sdp:_})}function u(g,v){let _=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(x=>{const R=g._reverseStreams[x],$=g._streams[R.id];_=_.replace(new RegExp(R.id,"g"),$.id)}),new RTCSessionDescription({type:v.type,sdp:_})}["createOffer","createAnswer"].forEach(function(g){const v=r.RTCPeerConnection.prototype[g],_={[g](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[$=>{const P=h(this,$);x[0].apply(null,[P])},$=>{x[1]&&x[1].apply(null,$)},arguments[2]]):v.apply(this,arguments).then($=>h(this,$))}};r.RTCPeerConnection.prototype[g]=_[g]});const d=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=u(this,arguments[0]),d.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const g=p.get.apply(this);return g.type===""?g:h(this,g)}}),r.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(R=>{this._streams[R].getTracks().find(P=>v.track===P)&&(x=this._streams[R])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Nn(r,t){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],c={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=c[n]})}function ks(r,t){Tt(r,"negotiationneeded",n=>{const s=n.target;if(!((t.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return n})}const Ls=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ks,shimAddTrackRemoveTrack:Ps,shimAddTrackRemoveTrackWithNative:Ss,shimGetSendersWithDtmf:Ts,shimGetUserMedia:bs,shimMediaStream:xs,shimOnTrack:Cs,shimPeerConnection:Nn,shimSenderReceiverGetStats:ws},Symbol.toStringTag,{value:"Module"}));function Es(r,t){const n=r&&r.navigator,s=r&&r.MediaStreamTrack;if(n.getUserMedia=function(c,h,u){Bn("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(h,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const c=function(u,d,p){d in u&&!(p in u)&&(u[p]=u[d],delete u[d])},h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),c(u.audio,"autoGainControl","mozAutoGainControl"),c(u.audio,"noiseSuppression","mozNoiseSuppression")),h(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const d=u.apply(this,arguments);return c(d,"mozAutoGainControl","autoGainControl"),c(d,"mozNoiseSuppression","noiseSuppression"),d}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),c(d,"autoGainControl","mozAutoGainControl"),c(d,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[d])}}}}function kl(r,t){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,Promise.reject(c)}return s.video===!0?s.video={mediaSource:t}:s.video.mediaSource=t,r.navigator.mediaDevices.getUserMedia(s)})}function Rs(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $n(r,t){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(c){const h=r.RTCPeerConnection.prototype[c],u={[c](){return arguments[0]=new(c==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),h.apply(this,arguments)}};r.RTCPeerConnection.prototype[c]=u[c]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[h,u,d]=arguments;return s.apply(this,[h||null]).then(p=>{if(t.version<53&&!u)try{p.forEach(g=>{g.type=n[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;p.forEach((v,_)=>{p.set(_,Object.assign({},v,{type:n[v.type]||v.type}))})}return p}).then(u,d)}}function As(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=t.apply(this,[]);return c.forEach(h=>h._pc=this),c});const n=r.RTCPeerConnection.prototype.addTrack;n&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=n.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Os(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(c=>c._pc=this),s}),Tt(r,"track",n=>(n.receiver._pc=n.srcElement,n)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Ms(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){Bn("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&n.getTracks().includes(s.track)&&this.removeTrack(s)})})}function Is(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function zs(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.addTransceiver;t&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const c=s.length>0;c&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const h=t.apply(this,arguments);if(c){const{sender:u}=h,d=u.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(d).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return h})}function Bs(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const t=r.RTCRtpSender.prototype.getParameters;t&&(r.RTCRtpSender.prototype.getParameters=function(){const s=t.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function Ds(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Ns(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const t=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const $s=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:zs,shimCreateAnswer:Ns,shimCreateOffer:Ds,shimGetDisplayMedia:kl,shimGetParameters:Bs,shimGetUserMedia:Es,shimOnTrack:Rs,shimPeerConnection:$n,shimRTCDataChannel:Is,shimReceiverGetStats:Os,shimRemoveStream:Ms,shimSenderGetStats:As},Symbol.toStringTag,{value:"Module"}));function Zs(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const t=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(c=>t.call(this,c,s)),s.getVideoTracks().forEach(c=>t.call(this,c,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...c){return c&&c.forEach(h=>{this._localStreams?this._localStreams.includes(h)||this._localStreams.push(h):this._localStreams=[h]}),t.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(n);if(s===-1)return;this._localStreams.splice(s,1);const c=n.getTracks();this.getSenders().forEach(h=>{c.includes(h.track)&&this.removeTrack(h)})})}}function Fs(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(c=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(c))return;this._remoteStreams.push(c);const h=new Event("addstream");h.stream=c,this.dispatchEvent(h)})})}});const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(h=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(h)>=0)return;s._remoteStreams.push(h);const u=new Event("addstream");u.stream=h,s.dispatchEvent(u)})}),t.apply(s,arguments)}}}function Us(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.createOffer,s=t.createAnswer,c=t.setLocalDescription,h=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(g,v){const _=arguments.length>=2?arguments[2]:arguments[0],x=n.apply(this,[_]);return v?(x.then(g,v),Promise.resolve()):x},t.createAnswer=function(g,v){const _=arguments.length>=2?arguments[2]:arguments[0],x=s.apply(this,[_]);return v?(x.then(g,v),Promise.resolve()):x};let d=function(p,g,v){const _=c.apply(this,[p]);return v?(_.then(g,v),Promise.resolve()):_};t.setLocalDescription=d,d=function(p,g,v){const _=h.apply(this,[p]);return v?(_.then(g,v),Promise.resolve()):_},t.setRemoteDescription=d,d=function(p,g,v){const _=u.apply(this,[p]);return v?(_.then(g,v),Promise.resolve()):_},t.addIceCandidate=d}function js(r){const t=r&&r.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,s=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=c=>s(qs(c))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(s,c,h){t.mediaDevices.getUserMedia(s).then(c,h)}).bind(t))}function qs(r){return r&&r.video!==void 0?Object.assign({},r,{video:gs(r.video)}):r}function Vs(r){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection;r.RTCPeerConnection=function(s,c){if(s&&s.iceServers){const h=[];for(let u=0;u<s.iceServers.length;u++){let d=s.iceServers[u];d.urls===void 0&&d.url?(Bn("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,h.push(d)):h.push(s.iceServers[u])}s.iceServers=h}return new t(s,c)},r.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Hs(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ws(r){const t=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const c=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):s.offerToReceiveAudio===!0&&!c&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const h=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&h?h.direction==="sendrecv"?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":h.direction==="recvonly"&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):s.offerToReceiveVideo===!0&&!h&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Gs(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Ks=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Gs,shimCallbacksAPI:Us,shimConstraints:qs,shimCreateOfferLegacy:Ws,shimGetUserMedia:js,shimLocalStreamsAPI:Zs,shimRTCIceServerUrls:Vs,shimRemoteStreamsAPI:Fs,shimTrackEventTransceiver:Hs},Symbol.toStringTag,{value:"Module"}));var Zn={exports:{}},Ys;function Ll(){return Ys||(Ys=1,function(r){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(s=>s.trim())},t.splitSections=function(n){return n.split(`
m=`).map((c,h)=>(h>0?"m="+c:c).trim()+`\r
`)},t.getDescription=function(n){const s=t.splitSections(n);return s&&s[0]},t.getMediaSections=function(n){const s=t.splitSections(n);return s.shift(),s},t.matchPrefix=function(n,s){return t.splitLines(n).filter(c=>c.indexOf(s)===0)},t.parseCandidate=function(n){let s;n.indexOf("a=candidate:")===0?s=n.substring(12).split(" "):s=n.substring(10).split(" ");const c={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let h=8;h<s.length;h+=2)switch(s[h]){case"raddr":c.relatedAddress=s[h+1];break;case"rport":c.relatedPort=parseInt(s[h+1],10);break;case"tcptype":c.tcpType=s[h+1];break;case"ufrag":c.ufrag=s[h+1],c.usernameFragment=s[h+1];break;default:c[s[h]]===void 0&&(c[s[h]]=s[h+1]);break}return c},t.writeCandidate=function(n){const s=[];s.push(n.foundation);const c=n.component;c==="rtp"?s.push(1):c==="rtcp"?s.push(2):s.push(c),s.push(n.protocol.toUpperCase()),s.push(n.priority),s.push(n.address||n.ip),s.push(n.port);const h=n.type;return s.push("typ"),s.push(h),h!=="host"&&n.relatedAddress&&n.relatedPort&&(s.push("raddr"),s.push(n.relatedAddress),s.push("rport"),s.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(s.push("ufrag"),s.push(n.usernameFragment||n.ufrag)),"candidate:"+s.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let s=n.substring(9).split(" ");const c={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),c.name=s[0],c.clockRate=parseInt(s[1],10),c.channels=s.length===3?parseInt(s[2],10):1,c.numChannels=c.channels,c},t.writeRtpMap=function(n){let s=n.payloadType;n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType);const c=n.channels||n.numChannels||1;return"a=rtpmap:"+s+" "+n.name+"/"+n.clockRate+(c!==1?"/"+c:"")+`\r
`},t.parseExtmap=function(n){const s=n.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const s={};let c;const h=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<h.length;u++)c=h[u].trim().split("="),s[c[0].trim()]=c[1];return s},t.writeFmtp=function(n){let s="",c=n.payloadType;if(n.preferredPayloadType!==void 0&&(c=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const h=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?h.push(u+"="+n.parameters[u]):h.push(u)}),s+="a=fmtp:"+c+" "+h.join(";")+`\r
`}return s},t.parseRtcpFb=function(n){const s=n.substring(n.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},t.writeRtcpFb=function(n){let s="",c=n.payloadType;return n.preferredPayloadType!==void 0&&(c=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(h=>{s+="a=rtcp-fb:"+c+" "+h.type+(h.parameter&&h.parameter.length?" "+h.parameter:"")+`\r
`}),s},t.parseSsrcMedia=function(n){const s=n.indexOf(" "),c={ssrc:parseInt(n.substring(7,s),10)},h=n.indexOf(":",s);return h>-1?(c.attribute=n.substring(s+1,h),c.value=n.substring(h+1)):c.attribute=n.substring(s+1),c},t.parseSsrcGroup=function(n){const s=n.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(c=>parseInt(c,10))}},t.getMid=function(n){const s=t.matchPrefix(n,"a=mid:")[0];if(s)return s.substring(6)},t.parseFingerprint=function(n){const s=n.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},t.getDtlsParameters=function(n,s){return{role:"auto",fingerprints:t.matchPrefix(n+s,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,s){let c="a=setup:"+s+`\r
`;return n.fingerprints.forEach(h=>{c+="a=fingerprint:"+h.algorithm+" "+h.value+`\r
`}),c},t.parseCryptoLine=function(n){const s=n.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const s=n.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,s){return t.matchPrefix(n+s,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,s){const c=t.matchPrefix(n+s,"a=ice-ufrag:")[0],h=t.matchPrefix(n+s,"a=ice-pwd:")[0];return c&&h?{usernameFragment:c.substring(12),password:h.substring(10)}:null},t.writeIceParameters=function(n){let s="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(s+=`a=ice-lite\r
`),s},t.parseRtpParameters=function(n){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},h=t.splitLines(n)[0].split(" ");s.profile=h[2];for(let d=3;d<h.length;d++){const p=h[d],g=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(g){const v=t.parseRtpMap(g),_=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(v.parameters=_.length?t.parseFmtp(_[0]):{},v.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),s.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(v.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(d=>{s.headerExtensions.push(t.parseExtmap(d))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return s.codecs.forEach(d=>{u.forEach(p=>{d.rtcpFeedback.find(v=>v.type===p.type&&v.parameter===p.parameter)||d.rtcpFeedback.push(p)})}),s},t.writeRtpDescription=function(n,s){let c="";c+="m="+n+" ",c+=s.codecs.length>0?"9":"0",c+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",c+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,c+=`c=IN IP4 0.0.0.0\r
`,c+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{c+=t.writeRtpMap(u),c+=t.writeFmtp(u),c+=t.writeRtcpFb(u)});let h=0;return s.codecs.forEach(u=>{u.maxptime>h&&(h=u.maxptime)}),h>0&&(c+="a=maxptime:"+h+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{c+=t.writeExtmap(u)}),c},t.parseRtpEncodingParameters=function(n){const s=[],c=t.parseRtpParameters(n),h=c.fecMechanisms.indexOf("RED")!==-1,u=c.fecMechanisms.indexOf("ULPFEC")!==-1,d=t.matchPrefix(n,"a=ssrc:").map(x=>t.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),p=d.length>0&&d[0].ssrc;let g;const v=t.matchPrefix(n,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map($=>parseInt($,10)));v.length>0&&v[0].length>1&&v[0][0]===p&&(g=v[0][1]),c.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let R={ssrc:p,codecPayloadType:parseInt(x.parameters.apt,10)};p&&g&&(R.rtx={ssrc:g}),s.push(R),h&&(R=JSON.parse(JSON.stringify(R)),R.fec={ssrc:p,mechanism:u?"red+ulpfec":"red"},s.push(R))}}),s.length===0&&p&&s.push({ssrc:p});let _=t.matchPrefix(n,"b=");return _.length&&(_[0].indexOf("b=TIAS:")===0?_=parseInt(_[0].substring(7),10):_[0].indexOf("b=AS:")===0?_=parseInt(_[0].substring(5),10)*1e3*.95-50*40*8:_=void 0,s.forEach(x=>{x.maxBitrate=_})),s},t.parseRtcpParameters=function(n){const s={},c=t.matchPrefix(n,"a=ssrc:").map(d=>t.parseSsrcMedia(d)).filter(d=>d.attribute==="cname")[0];c&&(s.cname=c.value,s.ssrc=c.ssrc);const h=t.matchPrefix(n,"a=rtcp-rsize");s.reducedSize=h.length>0,s.compound=h.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return s.mux=u.length>0,s},t.writeRtcpParameters=function(n){let s="";return n.reducedSize&&(s+=`a=rtcp-rsize\r
`),n.mux&&(s+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(s+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),s},t.parseMsid=function(n){let s;const c=t.matchPrefix(n,"a=msid:");if(c.length===1)return s=c[0].substring(7).split(" "),{stream:s[0],track:s[1]};const h=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(h.length>0)return s=h[0].value.split(" "),{stream:s[0],track:s[1]}},t.parseSctpDescription=function(n){const s=t.parseMLine(n),c=t.matchPrefix(n,"a=max-message-size:");let h;c.length>0&&(h=parseInt(c[0].substring(19),10)),isNaN(h)&&(h=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:h};const d=t.matchPrefix(n,"a=sctpmap:");if(d.length>0){const p=d[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:h}}},t.writeSctpDescription=function(n,s){let c=[];return n.protocol!=="DTLS/SCTP"?c=["m="+n.kind+" 9 "+n.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:c=["m="+n.kind+" 9 "+n.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&c.push("a=max-message-size:"+s.maxMessageSize+`\r
`),c.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,s,c){let h;const u=s!==void 0?s:2;return n?h=n:h=t.generateSessionId(),`v=0\r
o=`+(c||"thisisadapterortc")+" "+h+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,s){const c=t.splitLines(n);for(let h=0;h<c.length;h++)switch(c[h]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return c[h].substring(2)}return s?t.getDirection(s):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const c=t.splitLines(n)[0].substring(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},t.parseOLine=function(n){const c=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const s=t.splitLines(n);for(let c=0;c<s.length;c++)if(s[c].length<2||s[c].charAt(1)!=="=")return!1;return!0},r.exports=t}(Zn)),Zn.exports}var Js=Ll();const Dt=pl(Js),El=bt({__proto__:null,default:Dt},[Js]);function $i(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const t=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const c=new t(s),h=Dt.parseCandidate(s.candidate);for(const u in h)u in c||Object.defineProperty(c,u,{value:h[u]});return c.toJSON=function(){return{candidate:c.candidate,sdpMid:c.sdpMid,sdpMLineIndex:c.sdpMLineIndex,usernameFragment:c.usernameFragment}},c}return new t(s)},r.RTCIceCandidate.prototype=t.prototype,Tt(r,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new r.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Fn(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||Tt(r,"icecandidate",t=>{if(t.candidate){const n=Dt.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Zi(r,t){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(d){if(!d||!d.sdp)return!1;const p=Dt.splitSections(d.sdp);return p.shift(),p.some(g=>{const v=Dt.parseMLine(g);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},s=function(d){const p=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const g=parseInt(p[1],10);return g!==g?-1:g},c=function(d){let p=65536;return t.browser==="firefox"&&(t.version<57?d===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},h=function(d,p){let g=65536;t.browser==="firefox"&&t.version===57&&(g=65535);const v=Dt.matchPrefix(d.sdp,"a=max-message-size:");return v.length>0?g=parseInt(v[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(g=2147483637),g},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=s(arguments[0]),g=c(p),v=h(arguments[0],p);let _;g===0&&v===0?_=Number.POSITIVE_INFINITY:g===0||v===0?_=Math.max(g,v):_=Math.min(g,v);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return _}}),this._sctp=x}return u.apply(this,arguments)}}function Fi(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function t(s,c){const h=s.send;s.send=function(){const d=arguments[0],p=d.length||d.size||d.byteLength;if(s.readyState==="open"&&c.sctp&&p>c.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+c.sctp.maxMessageSize+" bytes)");return h.apply(s,arguments)}}const n=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const c=n.apply(this,arguments);return t(c,this),c},Tt(r,"datachannel",s=>(t(s.channel,s.target),s))}function Un(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const t=r.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const s=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=c=>{const h=c.target;if(h._lastConnectionState!==h.connectionState){h._lastConnectionState=h.connectionState;const u=new Event("connectionstatechange",c);h.dispatchEvent(u)}return c},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function jn(r,t){if(!r.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&c.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const h=c.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&c instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:c.type,sdp:h}):c.sdp=h}return n.apply(this,arguments)}}function Ui(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ji(r,t){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const n=r.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let c=arguments[0]||{};if(typeof c!="object"||c.type&&c.sdp)return n.apply(this,arguments);if(c={type:c.type,sdp:c.sdp},!c.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":c.type="offer";break;default:c.type="answer";break}return c.sdp||c.type!=="offer"&&c.type!=="answer"?n.apply(this,[c]):(c.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const Rl=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:jn,shimAddIceCandidateNullOrEmpty:Ui,shimConnectionState:Un,shimMaxMessageSize:Zi,shimParameterlessSetLocalDescription:ji,shimRTCIceCandidate:$i,shimRTCIceCandidateRelayProtocol:Fn,shimSendThrowTypeError:Fi},Symbol.toStringTag,{value:"Module"}));function Al({window:r}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=ms,s=Pl(r),c={browserDetails:s,commonShim:Rl,extractVersion:ti,disableLog:wl,disableWarnings:Sl,sdp:El};switch(s.browser){case"chrome":if(!Ls||!Nn||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),c;if(s.version===null)return n("Chrome shim can not determine version, not shimming."),c;n("adapter.js shimming chrome."),c.browserShim=Ls,Ui(r,s),ji(r),bs(r,s),xs(r),Nn(r,s),Cs(r),Ps(r,s),Ts(r),ws(r),ks(r,s),$i(r),Fn(r),Un(r),Zi(r,s),Fi(r),jn(r,s);break;case"firefox":if(!$s||!$n||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),c;n("adapter.js shimming firefox."),c.browserShim=$s,Ui(r,s),ji(r),Es(r,s),$n(r,s),Rs(r),Ms(r),As(r),Os(r),Is(r),zs(r),Bs(r),Ds(r),Ns(r),$i(r),Un(r),Zi(r,s),Fi(r);break;case"safari":if(!Ks||!t.shimSafari)return n("Safari shim is not included in this adapter release."),c;n("adapter.js shimming safari."),c.browserShim=Ks,Ui(r,s),ji(r),Vs(r),Ws(r),Us(r),Zs(r),Fs(r),Hs(r),js(r),Gs(r),$i(r),Fn(r),Zi(r,s),Fi(r),jn(r,s);break;default:n("Unsupported browser!");break}return c}const Xs=Al({window:typeof window>"u"?void 0:window});function wt(r,t,n,s){Object.defineProperty(r,t,{get:n,set:s,enumerable:!0,configurable:!0})}class Qs{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],s=t.byteLength,c=Math.ceil(s/this.chunkedMTU);let h=0,u=0;for(;u<s;){const d=Math.min(s,u+this.chunkedMTU),p=t.slice(u,d),g={__peerData:this._dataCount,n:h,data:p,total:c};n.push(g),u=d,h++}return this._dataCount++,n}}}function Ol(r){let t=0;for(const c of r)t+=c.byteLength;const n=new Uint8Array(t);let s=0;for(const c of r)n.set(c,s),s+=c.byteLength;return n}const qn=Xs.default||Xs,ii=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return qn.browserDetails.browser}getVersion(){return qn.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),t=qn.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,s=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),s=!0}catch{}finally{n&&n.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Ml=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),eo=()=>Math.random().toString(36).slice(2),to={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Il extends Qs{noop(){}blobToArrayBuffer(t,n){const s=new FileReader;return s.onload=function(c){c.target&&n(c.target.result)},s.readAsArrayBuffer(t),s}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=to,this.browser=ii.getBrowser(),this.browserVersion=ii.getVersion(),this.pack=ds,this.unpack=us,this.supports=function(){const n={browser:ii.isBrowserSupported(),webRTC:ii.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let s;try{s=new RTCPeerConnection(to),n.audioVideo=!0;let c;try{c=s.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!c.ordered;try{c.binaryType="blob",n.binaryBlob=!ii.isIOS}catch{}}catch{}finally{c&&c.close()}}catch{}finally{s&&s.close()}return n}(),this.validateId=Ml,this.randomToken=eo}}const Me=new Il,zl="PeerJS: ";class Bl{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const s=[zl,...n];for(const c in s)s[c]instanceof Error&&(s[c]="("+s[c].name+") "+s[c].message);t>=3?console.log(...s):t>=2?console.warn("WARNING",...s):t>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var E=new Bl,Vn={},Dl=Object.prototype.hasOwnProperty,Ie="~";function ni(){}Object.create&&(ni.prototype=Object.create(null),new ni().__proto__||(Ie=!1));function Nl(r,t,n){this.fn=r,this.context=t,this.once=n||!1}function io(r,t,n,s,c){if(typeof n!="function")throw new TypeError("The listener must be a function");var h=new Nl(n,s||r,c),u=Ie?Ie+t:t;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],h]:r._events[u].push(h):(r._events[u]=h,r._eventsCount++),r}function qi(r,t){--r._eventsCount===0?r._events=new ni:delete r._events[t]}function Re(){this._events=new ni,this._eventsCount=0}Re.prototype.eventNames=function(){var t=[],n,s;if(this._eventsCount===0)return t;for(s in n=this._events)Dl.call(n,s)&&t.push(Ie?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t},Re.prototype.listeners=function(t){var n=Ie?Ie+t:t,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var c=0,h=s.length,u=new Array(h);c<h;c++)u[c]=s[c].fn;return u},Re.prototype.listenerCount=function(t){var n=Ie?Ie+t:t,s=this._events[n];return s?s.fn?1:s.length:0},Re.prototype.emit=function(t,n,s,c,h,u){var d=Ie?Ie+t:t;if(!this._events[d])return!1;var p=this._events[d],g=arguments.length,v,_;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,s),!0;case 4:return p.fn.call(p.context,n,s,c),!0;case 5:return p.fn.call(p.context,n,s,c,h),!0;case 6:return p.fn.call(p.context,n,s,c,h,u),!0}for(_=1,v=new Array(g-1);_<g;_++)v[_-1]=arguments[_];p.fn.apply(p.context,v)}else{var x=p.length,R;for(_=0;_<x;_++)switch(p[_].once&&this.removeListener(t,p[_].fn,void 0,!0),g){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,n);break;case 3:p[_].fn.call(p[_].context,n,s);break;case 4:p[_].fn.call(p[_].context,n,s,c);break;default:if(!v)for(R=1,v=new Array(g-1);R<g;R++)v[R-1]=arguments[R];p[_].fn.apply(p[_].context,v)}}return!0},Re.prototype.on=function(t,n,s){return io(this,t,n,s,!1)},Re.prototype.once=function(t,n,s){return io(this,t,n,s,!0)},Re.prototype.removeListener=function(t,n,s,c){var h=Ie?Ie+t:t;if(!this._events[h])return this;if(!n)return qi(this,h),this;var u=this._events[h];if(u.fn)u.fn===n&&(!c||u.once)&&(!s||u.context===s)&&qi(this,h);else{for(var d=0,p=[],g=u.length;d<g;d++)(u[d].fn!==n||c&&!u[d].once||s&&u[d].context!==s)&&p.push(u[d]);p.length?this._events[h]=p.length===1?p[0]:p:qi(this,h)}return this},Re.prototype.removeAllListeners=function(t){var n;return t?(n=Ie?Ie+t:t,this._events[n]&&qi(this,n)):(this._events=new ni,this._eventsCount=0),this},Re.prototype.off=Re.prototype.removeListener,Re.prototype.addListener=Re.prototype.on,Re.prefixed=Ie,Re.EventEmitter=Re,Vn=Re;var St={};wt(St,"ConnectionType",()=>lt),wt(St,"PeerErrorType",()=>me),wt(St,"BaseConnectionErrorType",()=>Vi),wt(St,"DataConnectionErrorType",()=>Hi),wt(St,"SerializationType",()=>ri),wt(St,"SocketEventType",()=>ht),wt(St,"ServerMessageType",()=>ke);var lt=function(r){return r.Data="data",r.Media="media",r}({}),me=function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r}({}),Vi=function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r}({}),Hi=function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r}({}),ri=function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r}({}),ht=function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r}({}),ke=function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r}({});const no="1.5.5";class $l extends Vn.EventEmitter{constructor(t,n,s,c,h,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const d=t?"wss://":"ws://";this._baseUrl=d+n+":"+s+c+"peerjs?key="+h}start(t,n){this._id=t;const s=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+no),this._disconnected=!1,this._socket.onmessage=c=>{let h;try{h=JSON.parse(c.data),E.log("Server message received:",h)}catch{E.log("Invalid server message",c.data);return}this.emit(ht.Message,h)},this._socket.onclose=c=>{this._disconnected||(E.log("Socket closed.",c),this._cleanup(),this._disconnected=!0,this.emit(ht.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),E.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){E.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:ke.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(ht.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class ro{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===lt.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const s=this.connection,c={ordered:!!t.reliable},h=n.createDataChannel(s.label,c);s._initializeDataChannel(h),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){E.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,s=this.connection.connectionId,c=this.connection.type,h=this.connection.provider;E.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(E.log(`Received ICE candidates for ${n}:`,u.candidate),h.socket.send({type:ke.Candidate,payload:{candidate:u.candidate,type:c,connectionId:s},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":E.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Vi.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":E.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Vi.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":E.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},E.log("Listening for data channel"),t.ondatachannel=u=>{E.log("Received data channel");const d=u.channel;h.getConnection(n,s)._initializeDataChannel(d)},E.log("Listening for remote stream"),t.ontrack=u=>{E.log("Received remote stream");const d=u.streams[0],p=h.getConnection(n,s);if(p.type===lt.Media){const g=p;this._addStreamToMediaConnection(d,g)}}}cleanup(){E.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let s=!1;const c=this.connection.dataChannel;c&&(s=!!c.readyState&&c.readyState!=="closed"),(n||s)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createOffer(this.connection.options.constraints);E.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),E.log("Set localDescription:",s,`for:${this.connection.peer}`);let c={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===lt.Data){const h=this.connection;c={...c,label:h.label,reliable:h.reliable,serialization:h.serialization}}n.socket.send({type:ke.Offer,payload:c,dst:this.connection.peer})}catch(c){c!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(me.WebRTC,c),E.log("Failed to setLocalDescription, ",c))}}catch(s){n.emitError(me.WebRTC,s),E.log("Failed to createOffer, ",s)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const s=await t.createAnswer();E.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await t.setLocalDescription(s),E.log("Set localDescription:",s,`for:${this.connection.peer}`),n.socket.send({type:ke.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(c){n.emitError(me.WebRTC,c),E.log("Failed to setLocalDescription, ",c)}}catch(s){n.emitError(me.WebRTC,s),E.log("Failed to create answer, ",s)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const s=this.connection.peerConnection,c=this.connection.provider;E.log("Setting remote description",n);const h=this;try{await s.setRemoteDescription(n),E.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await h._makeAnswer()}catch(u){c.emitError(me.WebRTC,u),E.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){E.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),E.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(me.WebRTC,n),E.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(E.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return E.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(s=>{n.addTrack(s,t)})}_addStreamToMediaConnection(t,n){E.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class so extends Vn.EventEmitter{emitError(t,n){E.error("Error:",n),this.emit("error",new oo(`${t}`,n))}}class oo extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class ao extends so{get open(){return this._open}constructor(t,n,s){super(),this.peer=t,this.provider=n,this.options=s,this._open=!1,this.metadata=s.metadata}}const si=class si extends ao{get type(){return lt.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,s){super(t,n,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||si.ID_PREFIX+Me.randomToken(),this._negotiator=new ro(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{E.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{E.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){E.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,s=t.payload;switch(t.type){case ke.Answer:this._negotiator.handleSDP(n,s.sdp),this._open=!0;break;case ke.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:E.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){E.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const s=this.provider._getMessages(this.connectionId);for(const c of s)this.handleMessage(c);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Gn=new WeakMap,xi(si,Gn,si.ID_PREFIX="mc_");let Wi=si;class Zl{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:s,port:c,path:h,key:u}=this._options,d=new URL(`${n}://${s}:${c}${h}${u}/${t}`);return d.searchParams.set("ts",`${Date.now()}${Math.random()}`),d.searchParams.set("version",no),fetch(d.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){E.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Me.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Me.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw E.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}const Pt=class Pt extends ao{get type(){return lt.Data}constructor(t,n,s){super(t,n,s),this.connectionId=this.options.connectionId||Pt.ID_PREFIX+eo(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new ro(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{E.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{E.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{E.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t!=null&&t.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Hi.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case ke.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case ke.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:E.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}};Kn=new WeakMap,Yn=new WeakMap,xi(Pt,Kn,Pt.ID_PREFIX="dc_"),xi(Pt,Yn,Pt.MAX_BUFFERED_AMOUNT=8388608);let Gi=Pt;class Ki extends Gi{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Gi.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return E.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t!=null&&t.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Hn extends Ki{close(t){super.close(t),this._chunkedData={}}constructor(t,n,s){super(t,n,s),this.chunker=new Qs,this.serialization=ri.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=us(t),s=n.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,s=this._chunkedData[n]||{data:[],count:0,total:t.total};if(s.data[t.n]=new Uint8Array(t.data),s.count++,this._chunkedData[n]=s,s.total===s.count){delete this._chunkedData[n];const c=Ol(s.data);this._handleDataMessage({data:c})}}_send(t,n){const s=ds(t);if(s instanceof Promise)return this._send_blob(s);if(!n&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);E.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const s of n)this.send(s,!0)}}class Fl extends Ki{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=ri.None}}class Ul extends Ki{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),s=n.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const s=this.encoder.encode(this.stringify(t));if(s.byteLength>=Me.chunkedMTU){this.emitError(Hi.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...t){super(...t),this.serialization=ri.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}const oi=class oi extends so{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,s]of this._connections)t[n]=s;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:Fl,json:Ul,binary:Hn,"binary-utf8":Hn,default:Hn},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(t&&t.constructor==Object?n=t:t&&(s=t.toString()),n={debug:0,host:Me.CLOUD_HOST,port:Me.CLOUD_PORT,path:"/",key:oi.DEFAULT_KEY,token:Me.randomToken(),config:Me.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Me.CLOUD_HOST?this._options.secure=Me.isSecure():this._options.host==Me.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&E.setLogFunction(this._options.logFunction),E.logLevel=this._options.debug||0,this._api=new Zl(n),this._socket=this._createServerConnection(),!Me.supports.audioVideo&&!Me.supports.data){this._delayedAbort(me.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!Me.validateId(s)){this._delayedAbort(me.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(c=>this._initialize(c)).catch(c=>this._abort(me.ServerError,c))}_createServerConnection(){const t=new $l(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(ht.Message,n=>{this._handleMessage(n)}),t.on(ht.Error,n=>{this._abort(me.SocketError,n)}),t.on(ht.Disconnected,()=>{this.disconnected||(this.emitError(me.Network,"Lost connection to server."),this.disconnect())}),t.on(ht.Close,()=>{this.disconnected||this._abort(me.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,s=t.payload,c=t.src;switch(n){case ke.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ke.Error:this._abort(me.ServerError,s.msg);break;case ke.IdTaken:this._abort(me.UnavailableID,`ID "${this.id}" is taken`);break;case ke.InvalidKey:this._abort(me.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ke.Leave:E.log(`Received leave message from ${c}`),this._cleanupPeer(c),this._connections.delete(c);break;case ke.Expire:this.emitError(me.PeerUnavailable,`Could not connect to peer ${c}`);break;case ke.Offer:{const h=s.connectionId;let u=this.getConnection(c,h);if(u&&(u.close(),E.warn(`Offer received for existing Connection ID:${h}`)),s.type===lt.Media){const p=new Wi(c,this,{connectionId:h,_payload:s,metadata:s.metadata});u=p,this._addConnection(c,u),this.emit("call",p)}else if(s.type===lt.Data){const p=new this._serializers[s.serialization](c,this,{connectionId:h,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=p,this._addConnection(c,u),this.emit("connection",p)}else{E.warn(`Received malformed connection type:${s.type}`);return}const d=this._getMessages(h);for(const p of d)u.handleMessage(p);break}default:{if(!s){E.warn(`You received a malformed message from ${c} of type ${n}`);return}const h=s.connectionId,u=this.getConnection(c,h);u&&u.peerConnection?u.handleMessage(t):h?this._storeMessage(h,t):E.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){E.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,s),s}call(t,n,s={}){if(this.disconnected){E.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){E.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const c=new Wi(t,this,{...s,_stream:n});return this._addConnection(t,c),c}_addConnection(t,n){E.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const s=this._connections.get(t);if(!s)return null;for(const c of s)if(c.connectionId===n)return c;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){E.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(E.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const s of n)s.close()}disconnect(){if(this.disconnected)return;const t=this.id;E.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)E.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)E.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(me.ServerError,n))}};Jn=new WeakMap,xi(oi,Jn,oi.DEFAULT_KEY="peerjs");let Wn=oi;const jl=Object.freeze(Object.defineProperty({__proto__:null,BaseConnectionErrorType:Vi,BufferedConnection:Ki,ConnectionType:lt,DataConnectionErrorType:Hi,Peer:Wn,PeerError:oo,PeerErrorType:me,SerializationType:ri,ServerMessageType:ke,SocketEventType:ht,util:Me},Symbol.toStringTag,{value:"Module"}))})();
