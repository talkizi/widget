(function(){"use strict";try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode('/*! tailwindcss v4.1.10 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:oklch(93.6% .032 17.717);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-900:oklch(39.6% .141 25.723);--color-yellow-500:oklch(79.5% .184 86.047);--color-yellow-600:oklch(68.1% .162 75.834);--color-yellow-700:oklch(55.4% .135 66.442);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-50:oklch(96.2% .018 272.314);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-md:28rem;--container-xl:36rem;--container-2xl:42rem;--container-3xl:48rem;--container-4xl:56rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-extrabold:800;--tracking-tight:-.025em;--leading-tight:1.25;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--blur-sm:8px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.top-2{top:calc(var(--spacing)*2)}.right-0{right:calc(var(--spacing)*0)}.right-2{right:calc(var(--spacing)*2)}.right-6{right:calc(var(--spacing)*6)}.right-20{right:calc(var(--spacing)*20)}.bottom-3{bottom:calc(var(--spacing)*3)}.bottom-6{bottom:calc(var(--spacing)*6)}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.m-4{margin:calc(var(--spacing)*4)}.mx-auto{margin-inline:auto}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-8{margin-top:calc(var(--spacing)*8)}.mr-2{margin-right:calc(var(--spacing)*2)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.mb-10{margin-bottom:calc(var(--spacing)*10)}.mb-12{margin-bottom:calc(var(--spacing)*12)}.mb-16{margin-bottom:calc(var(--spacing)*16)}.ml-1{margin-left:calc(var(--spacing)*1)}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.size-6{width:calc(var(--spacing)*6);height:calc(var(--spacing)*6)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.h-16{height:calc(var(--spacing)*16)}.h-\\[10rem\\]{height:10rem}.h-\\[84vh\\]{height:84vh}.h-auto{height:auto}.h-full{height:100%}.h-screen{height:100vh}.max-h-\\[300px\\]{max-height:300px}.max-h-full{max-height:100%}.min-h-\\[60px\\]{min-height:60px}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-14{width:calc(var(--spacing)*14)}.w-24{width:calc(var(--spacing)*24)}.w-\\[10rem\\]{width:10rem}.w-\\[48\\%\\]{width:48%}.w-\\[92vw\\]{width:92vw}.w-\\[260px\\]{width:260px}.w-auto{width:auto}.w-full{width:100%}.w-screen{width:100vw}.max-w-1{max-width:calc(var(--spacing)*1)}.max-w-1\\/4{max-width:25%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-3xl{max-width:var(--container-3xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-\\[780px\\]{max-width:780px}.max-w-full{max-width:100%}.max-w-md{max-width:var(--container-md)}.max-w-xl{max-width:var(--container-xl)}.flex-1{flex:1}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-6{--tw-translate-x:calc(var(--spacing)*6);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-95{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-zoom-in{cursor:zoom-in}.cursor-zoom-out{cursor:zoom-out}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-row{flex-direction:row}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.gap-1{gap:calc(var(--spacing)*1)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-8>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*8)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t-2xl{border-top-left-radius:var(--radius-2xl);border-top-right-radius:var(--radius-2xl)}.rounded-l-xl{border-top-left-radius:var(--radius-xl);border-bottom-left-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-blue-700{border-color:var(--color-blue-700)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-indigo-500{border-color:var(--color-indigo-500)}.border-indigo-600{border-color:var(--color-indigo-600)}.border-red-500{border-color:var(--color-red-500)}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.border-white\\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-black\\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\\/60{background-color:#0009}@supports (color:color-mix(in lab,red,red)){.bg-black\\/60{background-color:color-mix(in oklab,var(--color-black)60%,transparent)}}.bg-black\\/90{background-color:#000000e6}@supports (color:color-mix(in lab,red,red)){.bg-black\\/90{background-color:color-mix(in oklab,var(--color-black)90%,transparent)}}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-50{background-color:var(--color-indigo-50)}.bg-indigo-100{background-color:var(--color-indigo-100)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-white{background-color:var(--color-white)}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-yellow-600{background-color:var(--color-yellow-600)}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-indigo-600{--tw-gradient-from:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-700{--tw-gradient-from:var(--color-indigo-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-700{--tw-gradient-to:var(--color-purple-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.object-cover{object-fit:cover}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-10{padding:calc(var(--spacing)*10)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-10{padding-block:calc(var(--spacing)*10)}.py-16{padding-block:calc(var(--spacing)*16)}.py-24{padding-block:calc(var(--spacing)*24)}.pr-32{padding-right:calc(var(--spacing)*32)}.pl-6{padding-left:calc(var(--spacing)*6)}.text-center{text-align:center}.text-left{text-align:left}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-extrabold{--tw-font-weight:var(--font-weight-extrabold);font-weight:var(--font-weight-extrabold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.text-blue-600{color:var(--color-blue-600)}.text-gray-200{color:var(--color-gray-200)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-indigo-600{color:var(--color-indigo-600)}.text-indigo-700{color:var(--color-indigo-700)}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-white{color:var(--color-white)}.text-yellow-700{color:var(--color-yellow-700)}.underline{text-decoration-line:underline}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-indigo-400{--tw-ring-color:var(--color-indigo-400)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-\\[1500ms\\]{--tw-duration:1.5s;transition-duration:1.5s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.group-hover\\:text-inherit:is(:where(.group):hover *){color:inherit}.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-300:hover{background-color:var(--color-gray-300)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:bg-indigo-100:hover{background-color:var(--color-indigo-100)}.hover\\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\\:bg-red-100:hover{background-color:var(--color-red-100)}.hover\\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\\:bg-yellow-600:hover{background-color:var(--color-yellow-600)}.hover\\:bg-yellow-700:hover{background-color:var(--color-yellow-700)}.hover\\:text-indigo-500:hover{color:var(--color-indigo-500)}.hover\\:text-indigo-600:hover{color:var(--color-indigo-600)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\:border-indigo-500:focus{border-color:var(--color-indigo-500)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-indigo-500:focus{--tw-ring-color:var(--color-indigo-500)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:opacity-60:disabled{opacity:.6}@media (min-width:40rem){.sm\\:mb-0{margin-bottom:calc(var(--spacing)*0)}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-auto{width:auto}.sm\\:flex-row{flex-direction:row}.sm\\:flex-nowrap{flex-wrap:nowrap}.sm\\:justify-end{justify-content:flex-end}.sm\\:gap-3{gap:calc(var(--spacing)*3)}.sm\\:gap-4{gap:calc(var(--spacing)*4)}.sm\\:px-8{padding-inline:calc(var(--spacing)*8)}.sm\\:text-left{text-align:left}}@media (min-width:48rem){.md\\:block{display:block}.md\\:hidden{display:none}.md\\:w-64{width:calc(var(--spacing)*64)}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:p-0{padding:calc(var(--spacing)*0)}.md\\:p-8{padding:calc(var(--spacing)*8)}.md\\:text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.md\\:text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}}@media (min-width:64rem){.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (prefers-color-scheme:dark){.dark\\:border-gray-600{border-color:var(--color-gray-600)}.dark\\:border-gray-700{border-color:var(--color-gray-700)}.dark\\:bg-gray-700{background-color:var(--color-gray-700)}.dark\\:bg-gray-800{background-color:var(--color-gray-800)}.dark\\:bg-gray-900{background-color:var(--color-gray-900)}.dark\\:text-gray-200{color:var(--color-gray-200)}.dark\\:text-gray-300{color:var(--color-gray-300)}.dark\\:text-gray-400{color:var(--color-gray-400)}.dark\\:text-white{color:var(--color-white)}@media (hover:hover){.dark\\:hover\\:bg-gray-700:hover{background-color:var(--color-gray-700)}.dark\\:hover\\:bg-red-900:hover{background-color:var(--color-red-900)}}}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}')),document.head.appendChild(r)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
var ko=Se=>{throw TypeError(Se)};var Ye=(Se,Pe,Rt)=>Pe.has(Se)?ko("Cannot add the same private member more than once"):Pe instanceof WeakSet?Pe.add(Se):Pe.set(Se,Rt);/*! Talkizi Widget v6.3.5 – 2025-08-27T19:02:45.505Z */(function(){"use strict";var on,an,cn,ln;function Se(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}const Pe=!1,Rt=(n,e)=>n===e,Yr=Symbol("solid-track"),Qe={equals:Rt};let un=pn;const _e=1,Xe=2,dn={owned:null,cleanups:null,context:null,owner:null};var A=null;let Et=null,Qr=null,j=null,H=null,pe=null,Ze=0;function et(n,e){const t=j,r=A,i=n.length===0,s=e===void 0?r:e,o=i?dn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?n:()=>n(()=>ce(()=>je(o)));A=o,j=null;try{return Ne(a,!0)}finally{j=t,A=r}}function L(n,e){e=e?Object.assign({},Qe,e):Qe;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},r=i=>(typeof i=="function"&&(i=i(t.value)),hn(t,i));return[fn.bind(t),r]}function ne(n,e,t){const r=Pt(n,e,!1,_e);Be(r)}function tt(n,e,t){un=ii;const r=Pt(n,e,!1,_e);r.user=!0,pe?pe.push(r):Be(r)}function ke(n,e,t){t=t?Object.assign({},Qe,t):Qe;const r=Pt(n,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,Be(r),fn.bind(r)}function ce(n){if(j===null)return n();const e=j;j=null;try{return n()}finally{j=e}}function Xr(n){tt(()=>ce(n))}function wt(n){return A===null||(A.cleanups===null?A.cleanups=[n]:A.cleanups.push(n)),n}function Zr(n,e){const t=Symbol("context");return{id:t,Provider:oi(t),defaultValue:n}}function ei(n){let e;return A&&A.context&&(e=A.context[n.id])!==void 0?e:n.defaultValue}function ti(n){const e=ke(n),t=ke(()=>At(e()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function fn(){if(this.sources&&this.state)if(this.state===_e)Be(this);else{const n=H;H=null,Ne(()=>rt(this),!1),H=n}if(j){const n=this.observers?this.observers.length:0;j.sources?(j.sources.push(this),j.sourceSlots.push(n)):(j.sources=[this],j.sourceSlots=[n]),this.observers?(this.observers.push(j),this.observerSlots.push(j.sources.length-1)):(this.observers=[j],this.observerSlots=[j.sources.length-1])}return this.value}function hn(n,e,t){let r=n.value;return(!n.comparator||!n.comparator(r,e))&&(n.value=e,n.observers&&n.observers.length&&Ne(()=>{for(let i=0;i<n.observers.length;i+=1){const s=n.observers[i],o=Et&&Et.running;o&&Et.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?H.push(s):pe.push(s),s.observers&&mn(s)),o||(s.state=_e)}if(H.length>1e6)throw H=[],new Error},!1)),e}function Be(n){if(!n.fn)return;je(n);const e=Ze;ni(n,n.value,e)}function ni(n,e,t){let r;const i=A,s=j;j=A=n;try{r=n.fn(e)}catch(o){return n.pure&&(n.state=_e,n.owned&&n.owned.forEach(je),n.owned=null),n.updatedAt=t+1,gn(o)}finally{j=s,A=i}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?hn(n,r):n.value=r,n.updatedAt=t)}function Pt(n,e,t,r=_e,i){const s={fn:n,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:A,context:A?A.context:null,pure:t};return A===null||A!==dn&&(A.owned?A.owned.push(s):A.owned=[s]),s}function nt(n){if(n.state===0)return;if(n.state===Xe)return rt(n);if(n.suspense&&ce(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Ze);)n.state&&e.push(n);for(let t=e.length-1;t>=0;t--)if(n=e[t],n.state===_e)Be(n);else if(n.state===Xe){const r=H;H=null,Ne(()=>rt(n,e[0]),!1),H=r}}function Ne(n,e){if(H)return n();let t=!1;e||(H=[]),pe?t=!0:pe=[],Ze++;try{const r=n();return ri(t),r}catch(r){t||(pe=null),H=null,gn(r)}}function ri(n){if(H&&(pn(H),H=null),n)return;const e=pe;pe=null,e.length&&Ne(()=>un(e),!1)}function pn(n){for(let e=0;e<n.length;e++)nt(n[e])}function ii(n){let e,t=0;for(e=0;e<n.length;e++){const r=n[e];r.user?n[t++]=r:nt(r)}for(e=0;e<t;e++)nt(n[e])}function rt(n,e){n.state=0;for(let t=0;t<n.sources.length;t+=1){const r=n.sources[t];if(r.sources){const i=r.state;i===_e?r!==e&&(!r.updatedAt||r.updatedAt<Ze)&&nt(r):i===Xe&&rt(r,e)}}}function mn(n){for(let e=0;e<n.observers.length;e+=1){const t=n.observers[e];t.state||(t.state=Xe,t.pure?H.push(t):pe.push(t),t.observers&&mn(t))}}function je(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),r=n.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();r<i.length&&(s.sourceSlots[o]=r,i[r]=s,t.observerSlots[r]=o)}}if(n.tOwned){for(e=n.tOwned.length-1;e>=0;e--)je(n.tOwned[e]);delete n.tOwned}if(n.owned){for(e=n.owned.length-1;e>=0;e--)je(n.owned[e]);n.owned=null}if(n.cleanups){for(e=n.cleanups.length-1;e>=0;e--)n.cleanups[e]();n.cleanups=null}n.state=0}function si(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function gn(n,e=A){throw si(n)}function At(n){if(typeof n=="function"&&!n.length)return At(n());if(Array.isArray(n)){const e=[];for(let t=0;t<n.length;t++){const r=At(n[t]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return n}function oi(n,e){return function(r){let i;return ne(()=>i=ce(()=>(A.context={...A.context,[n]:r.value},ti(()=>r.children))),void 0),i}}const ai=Symbol("fallback");function yn(n){for(let e=0;e<n.length;e++)n[e]()}function ci(n,e,t={}){let r=[],i=[],s=[],o=0,a=e.length>1?[]:null;return wt(()=>yn(s)),()=>{let c=n()||[],l=c.length,u,d;return c[Yr],ce(()=>{let p,T,E,de,ye,G,ee,y,q;if(l===0)o!==0&&(yn(s),s=[],r=[],i=[],o=0,a&&(a=[])),t.fallback&&(r=[ai],i[0]=et(F=>(s[0]=F,t.fallback())),o=1);else if(o===0){for(i=new Array(l),d=0;d<l;d++)r[d]=c[d],i[d]=et(f);o=l}else{for(E=new Array(l),de=new Array(l),a&&(ye=new Array(l)),G=0,ee=Math.min(o,l);G<ee&&r[G]===c[G];G++);for(ee=o-1,y=l-1;ee>=G&&y>=G&&r[ee]===c[y];ee--,y--)E[y]=i[ee],de[y]=s[ee],a&&(ye[y]=a[ee]);for(p=new Map,T=new Array(y+1),d=y;d>=G;d--)q=c[d],u=p.get(q),T[d]=u===void 0?-1:u,p.set(q,d);for(u=G;u<=ee;u++)q=r[u],d=p.get(q),d!==void 0&&d!==-1?(E[d]=i[u],de[d]=s[u],a&&(ye[d]=a[u]),d=T[d],p.set(q,d)):s[u]();for(d=G;d<l;d++)d in E?(i[d]=E[d],s[d]=de[d],a&&(a[d]=ye[d],a[d](d))):i[d]=et(f);i=i.slice(0,o=l),r=c.slice(0)}return i});function f(p){if(s[d]=p,a){const[T,E]=L(d);return a[d]=E,e(c[d],T)}return e(c[d])}}}function D(n,e){return ce(()=>n(e||{}))}const li=n=>`Stale read from <${n}>.`;function it(n){const e="fallback"in n&&{fallback:()=>n.fallback};return ke(ci(()=>n.each,n.children,e||void 0))}function Ae(n){const e=n.keyed,t=ke(()=>n.when,void 0,void 0),r=e?t:ke(t,void 0,{equals:(i,s)=>!i==!s});return ke(()=>{const i=r();if(i){const s=n.children;return typeof s=="function"&&s.length>0?ce(()=>s(e?i:()=>{if(!ce(r))throw li("Show");return t()})):s}return n.fallback},void 0,void 0)}const J=n=>ke(()=>n());function ui(n,e,t){let r=t.length,i=e.length,s=r,o=0,a=0,c=e[i-1].nextSibling,l=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const u=s<r?a?t[a-1].nextSibling:t[s-a]:c;for(;a<s;)n.insertBefore(t[a++],u)}else if(s===a)for(;o<i;)(!l||!l.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const u=e[--i].nextSibling;n.insertBefore(t[a++],e[o++].nextSibling),n.insertBefore(t[--s],u),e[i]=t[s]}else{if(!l){l=new Map;let d=a;for(;d<s;)l.set(t[d],d++)}const u=l.get(e[o]);if(u!=null)if(a<u&&u<s){let d=o,f=1,p;for(;++d<i&&d<s&&!((p=l.get(e[d]))==null||p!==u+f);)f++;if(f>u-a){const T=e[o];for(;a<u;)n.insertBefore(t[a++],T)}else n.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const vn="_$DX_DELEGATE";function _n(n,e,t,r={}){let i;return et(s=>{i=s,e===document?n():b(e,n(),e.firstChild?null:void 0,t)},r.owner),()=>{i(),e.textContent=""}}function R(n,e,t,r){let i;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=n,t?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},o=e?()=>ce(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return o.cloneNode=o,o}function Oe(n,e=window.document){const t=e[vn]||(e[vn]=new Set);for(let r=0,i=n.length;r<i;r++){const s=n[r];t.has(s)||(t.add(s),e.addEventListener(s,fi))}}function di(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function Z(n,e){e==null?n.removeAttribute("class"):n.className=e}function oe(n,e,t,r){Array.isArray(t)?(n[`$$${e}`]=t[0],n[`$$${e}Data`]=t[1]):n[`$$${e}`]=t}function ze(n,e,t){return ce(()=>n(e,t))}function b(n,e,t,r){if(t!==void 0&&!r&&(r=[]),typeof e!="function")return st(n,e,r,t);ne(i=>st(n,e(),i,t),r)}function fi(n){let e=n.target;const t=`$$${n.type}`,r=n.target,i=n.currentTarget,s=c=>Object.defineProperty(n,"target",{configurable:!0,value:c}),o=()=>{const c=e[t];if(c&&!e.disabled){const l=e[`${t}Data`];if(l!==void 0?c.call(e,l,n):c.call(e,n),n.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(n.target)&&s(e.host),!0},a=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),n.composedPath){const c=n.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(e=c[l],!!o());l++){if(e._$host){e=e._$host,a();break}if(e.parentNode===i)break}}else a();s(r)}function st(n,e,t,r,i){for(;typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=r!==void 0;if(n=o&&t[0]&&t[0].parentNode||n,s==="string"||s==="number"){if(s==="number"&&(e=e.toString(),e===t))return t;if(o){let a=t[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),t=Le(n,t,r,a)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||s==="boolean")t=Le(n,t,r);else{if(s==="function")return ne(()=>{let a=e();for(;typeof a=="function";)a=a();t=st(n,a,t,r)}),()=>t;if(Array.isArray(e)){const a=[],c=t&&Array.isArray(t);if(Ot(a,e,t,i))return ne(()=>t=st(n,a,t,r,!0)),()=>t;if(a.length===0){if(t=Le(n,t,r),o)return t}else c?t.length===0?bn(n,a,r):ui(n,t,a):(t&&Le(n),bn(n,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=Le(n,t,r,e);Le(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function Ot(n,e,t,r){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],c=t&&t[n.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)n.push(a);else if(Array.isArray(a))i=Ot(n,a,c)||i;else if(l==="function")if(r){for(;typeof a=="function";)a=a();i=Ot(n,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else n.push(a),i=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?n.push(c):n.push(document.createTextNode(u))}}return i}function bn(n,e,t=null){for(let r=0,i=e.length;r<i;r++)n.insertBefore(e[r],t)}function Le(n,e,t,r){if(t===void 0)return n.textContent="";const i=r||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const c=a.parentNode===n;!s&&!o?c?n.replaceChild(i,a):n.insertBefore(i,t):c&&a.remove()}else s=!0}}else n.insertBefore(i,t);return[i]}var Ie=(n=>(n.FREE="free",n.STARTER="starter",n.PRO="pro",n.BUSINESS="business",n.ENTERPRISE="enterprise",n))(Ie||{});const hi={[Ie.FREE]:{label:"Gratuit",price:"0 €",desc:"1 salon vocal, audio uniquement, jusqu’à 4 participants.",maxRooms:1,video:!1,screenShare:!1,participants:4,stats:!1,webhooks:!1,privateAccess:!1,customBranding:!1,dedicatedHosting:!1,prioritySupport:!1},[Ie.STARTER]:{label:"Starter",price:"5 €",desc:"1 salon vocal, audio + vidéo + écran, jusqu’à 10 participants.",maxRooms:1,video:!0,screenShare:!0,participants:10,stats:!1,webhooks:!1,privateAccess:!1,customBranding:!1,dedicatedHosting:!1,prioritySupport:!1},[Ie.PRO]:{label:"Pro",price:"19 €",desc:"3 salons, audio + vidéo + écran, jusqu’à 10 participants, statistiques simples.",maxRooms:3,video:!0,screenShare:!0,participants:10,stats:!0,webhooks:!1,privateAccess:!1,customBranding:!1,dedicatedHosting:!1,prioritySupport:!1},[Ie.BUSINESS]:{label:"Business",price:"49 €",desc:"10 salons privés, accès par token, 20 participants, stats avancées, webhooks, personnalisation.",maxRooms:10,video:!0,screenShare:!0,participants:20,stats:!0,webhooks:!0,privateAccess:!0,customBranding:!0,dedicatedHosting:!1,prioritySupport:!1},[Ie.ENTERPRISE]:{label:"Entreprise",price:"Sur devis",desc:"Salons illimités, intégration avancée, hébergement dédié, support prioritaire.",maxRooms:1/0,video:!0,screenShare:!0,participants:1/0,stats:!0,webhooks:!0,privateAccess:!0,customBranding:!0,dedicatedHosting:!0,prioritySupport:!0}};var pi=R('<span class="text-xs text-red-500 mt-1 font-medium">Salle pleine (<!> max)'),mi=R('<button><div class="flex flex-col"><span class="text-sm font-semibold"></span><span class="text-xs text-gray-500 dark:text-gray-400 group-hover:text-inherit"></span></div><div class="flex items-center gap-1 text-xs"><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"></path></svg><span>/');function gi(n){const e=hi[n.plan].participants,t=n.count>=e,r=n.joinedRoomId===n.room._id;return(()=>{var i=mi(),s=i.firstChild,o=s.firstChild,a=o.nextSibling,c=s.nextSibling,l=c.firstChild,u=l.nextSibling,d=u.firstChild;return oe(i,"click",t?void 0:n.onJoin),i.disabled=t,b(o,()=>n.room.name),b(a,()=>n.room.description),b(s,D(Ae,{when:t,get children(){var f=pi(),p=f.firstChild,T=p.nextSibling;return T.nextSibling,b(f,e,T),f}}),null),b(u,()=>n.count,d),b(u,e,null),ne(()=>Z(i,`${n.fullScreen?"w-[10rem] h-[10rem]":"w-full"} text-left p-4 rounded-xl border transition-shadow shadow-sm flex items-center justify-between group ${r?"bg-blue-600 text-white border-blue-700 shadow-md":t?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-300 border-gray-300 dark:border-gray-600 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 border-gray-200 dark:border-gray-600"}`)),i})()}Oe(["click"]);const Cn=Zr();function yi(n){const e=["fr","en"],t=localStorage.getItem("lang"),r=()=>{const a=navigator.language.slice(0,2);return e.includes(a)?a:"en"},[i,s]=L(t||r()),o=a=>{s(a),localStorage.setItem("lang",a)};return D(Cn.Provider,{value:{lang:i,setLang:o},get children(){return n.children}})}function Sn(){const n=ei(Cn);if(!n)throw new Error("useLang must be used within a LangProvider");return n}const kn={fr:{heroTitle:"Ajoutez un salon vocal interactif en un script.",heroSubtitle:"Talkizi transforme instantanément votre site en espace vocal vivant, sans effort.",cta:"Essayez Talkizi gratuitement",why:"Pourquoi Talkizi ?",whyPoints:[{title:"Ultra-léger",desc:"Seulement 10kb, rapide et sans impact.",icon:"⚡️"},{title:"Installation instantanée",desc:"Copiez, collez, parlez.",icon:"🚀"},{title:"Personnalisable",desc:"Adaptez-le à votre marque.",icon:"🎨"},{title:"Boostez l’engagement",desc:"Créez des communautés actives.",icon:"💬"}],love:"Ce qu'ils vont adorer",snippetTitle:"Ajoutez Talkizi en 1 ligne",pricingTitle:"Tarifs",plans:[{title:"Gratuit",price:"0 € /mois",desc:"1 salon vocal, audio uniquement, jusqu’à 4 participants."},{title:"Starter",price:"5 € /mois HT",desc:"1 salon vocal, audio + vidéo + écran, jusqu’à 10 participants."},{title:"Pro",price:"19 € /mois HT",desc:"3 salons, audio + vidéo + écran, jusqu’à 10 participants, statistiques simples."},{title:"Business",price:"49 € /mois HT",desc:"10 salons privés, accès par token, 20 participants, stats avancées, webhooks, personnalisation."},{title:"Entreprise",price:"Sur devis",desc:"Salons illimités, intégration avancée, hébergement dédié, support prioritaire."}],faqTitle:"FAQ",faq:[{q:"Talkizi impacte-t-il les performances ?",a:"Non, il est ultra-léger et optimisé pour un chargement rapide."},{q:"Puis-je personnaliser le widget ?",a:"Oui, la personnalisation est disponible dès le plan Pro."},{q:"Ai-je besoin d’un compte ?",a:"Non, vous pouvez l’intégrer et l’essayer immédiatement, sans création de compte."}],finalCta:"Prêt à parler ? Essayez gratuitement !",legal:{title:"Mentions légales",editor:"Éditeur du site",editorDetails:"Le site Talkizi est édité par :",talkiziInfo:"Talkizi",siret:"SIRET : 83747616700031",email:"Email : contact@talkizi.com",hosting:"Hébergement",hostDetails:"Le site est hébergé par :",hetznerAddress:"Industriestr. 25 91710 Gunzenhausen, Germany",ovhAddress:"2 rue Kellermann – 59100 Roubaix – France",ip:"Propriété intellectuelle",ipText:"Tous les éléments du site Talkizi, y compris les textes, images, graphismes, logo, icônes, sons, logiciels, sont protégés par les lois en vigueur sur la propriété intellectuelle...",liability:"Responsabilité",liabilityText:"Talkizi s’efforce de fournir sur le site des informations aussi précises que possible...",contact:"Contact",contactText:"Pour toute question ou signalement, vous pouvez nous contacter à :"},terms:{title:"Conditions Générales d'Utilisation",sections:[{title:"1. Objet",content:"Les présentes Conditions Générales d'Utilisation (CGU) ont pour objet de définir les modalités et conditions dans lesquelles Talkizi met à disposition son service de salons vocaux et vidéo via un widget embarqué sur des sites tiers."},{title:"2. Acceptation",content:"En intégrant ou en utilisant le widget Talkizi, vous acceptez sans réserve les présentes CGU. Celles-ci peuvent être modifiées à tout moment par Talkizi ; il vous appartient de les consulter régulièrement."},{title:"3. Description du service",content:"Talkizi permet d’ajouter un salon vocal ou vidéo à un site web via un simple script. Les utilisateurs peuvent rejoindre un salon, échanger en temps réel par la voix, la vidéo ou le partage d’écran selon le plan choisi.",important:"Important : les flux audio, vidéo et écran transitent exclusivement en peer-to-peer via WebRTC et ne passent pas par les serveurs de Talkizi. Aucun enregistrement ni traitement des flux n’est effectué."},{title:"4. Engagements de l'utilisateur",content:"L'utilisateur s’engage à ne pas utiliser le service à des fins illicites, diffamatoires, ou portant atteinte aux droits d’autrui. Il est seul responsable des contenus échangés."},{title:"5. Responsabilité",content:"Talkizi fournit un service technique d’intermédiation de communication, sans surveillance ni contrôle du contenu échangé. Talkizi décline toute responsabilité en cas de litige entre utilisateurs ou en cas d’usage frauduleux."},{title:"6. Propriété",content:"Le code du widget, les interfaces et l’infrastructure sont la propriété exclusive de Talkizi. Toute reproduction, modification ou réutilisation sans autorisation est interdite."},{title:"7. Données personnelles",content:"Talkizi ne collecte aucune donnée personnelle via les salons vocaux/vidéo. Seules des données techniques nécessaires au fonctionnement du service (comme l’adresse IP pour établir une connexion WebRTC) sont temporairement utilisées sans stockage persistant."},{title:"8. Droit applicable",content:"Les présentes CGU sont soumises au droit français. Tout litige relatif à leur interprétation ou exécution sera de la compétence exclusive des tribunaux français."},{title:"9. Contact",content:"Pour toute question relative aux CGU, vous pouvez contacter :",email:"contact@talkizi.com"}]},privacy:{title:"Politique de confidentialité",sections:[{title:"1. Introduction",content:"Talkizi s'engage à protéger votre vie privée. Cette politique de confidentialité décrit la manière dont nous collectons, utilisons et protégeons vos informations personnelles lorsque vous utilisez notre site et notre widget vocal."},{title:"2. Données collectées",content:"Nous collectons uniquement les données strictement nécessaires au bon fonctionnement du service. Aucune donnée personnelle n’est requise pour accéder ou utiliser le widget Talkizi."},{title:"3. Utilisation des données",content:"Les éventuelles données collectées (logs techniques, adresse IP, préférences de langue) sont utilisées exclusivement pour :",list:["Assurer la sécurité et la stabilité du service","Améliorer l’expérience utilisateur","Analyser l’utilisation du site de façon anonyme"]},{title:"4. Partage des données",content:"Aucune donnée n’est vendue ou partagée à des tiers à des fins commerciales. Les données peuvent être transmises uniquement en cas d’obligation légale ou judiciaire."},{title:"5. Cookies",content:"Le site Talkizi utilise uniquement des cookies fonctionnels nécessaires au bon fonctionnement du service. Aucun cookie publicitaire ou de tracking tiers n’est utilisé."},{title:"6. Flux vocaux et vidéo",content:"Tous les flux vocaux et vidéo utilisés par Talkizi sont chiffrés et transmis en peer-to-peer via WebRTC. Ils ne transitent à aucun moment par les serveurs de Talkizi, garantissant une confidentialité maximale des échanges."},{title:"7. Vos droits",content:"Conformément au RGPD, vous disposez d’un droit d’accès, de rectification, de suppression et de portabilité de vos données. Pour toute demande, contactez-nous à :",email:"contact@talkizi.com"},{title:"8. Contact",content:"Pour toute question concernant cette politique de confidentialité, vous pouvez nous contacter à l'adresse suivante :",email:"contact@talkizi.com"}]},footer:{rights:"Tous droits réservés.",legal:"Mentions légales",terms:"Conditions",privacy:"Confidentialité"},header:{join:"Rejoindre",dashboard:"Mon espace"},config:{apiKey:"Clé API",show:"Afficher",hide:"Masquer",copy:"Copier",copied:"Copié !",rooms:"Rooms",roomName:"Nom de la room",description:"Description",addRoom:"+ Ajouter une room",remove:"Supprimer",urlsAllowed:"URLs autorisées",urlInvalid:"URL invalide",addUrl:"+ Ajouter une URL",plan:"Plan",free:"Gratuit",pro:"Pro",enterprise:"Entreprise",saveConfig:"💾 Sauvegarder",savedSuccess:"Configuration sauvegardée avec succès !",savedError:"Erreur lors de la sauvegarde",saveDisabledNoChange:"Aucune modification à sauvegarder",invalidUrls:"Une ou plusieurs URLs sont invalides",roomTrad:{options:{video:"Vidéo",screenShare:"Partage d'écran"}}},login:{subtitle:"Connexion sécurisée pour accéder à Talkizi.",google:"Se connecter avec Google",redirecting:"Redirection...",footer:"© 2025 Talkizi. Tous droits réservés."},docs:{title:"Documentation du widget Talkizi",intro:"Intégrez Talkizi en quelques secondes dans votre site HTML, React, Vue ou SolidJS.",advancedTitle:"Options avancées",advancedText:"Vous pouvez personnaliser le comportement du widget avec des attributs HTML.",keyDesc:"Clé publique de votre projet (obtenue sur le dashboard Talkizi).",showDesc:"Aficher ou masquer le widget par défaut.",apiTitle:"API JavaScript",apiIntro:"Le widget expose une API JS globale pour interagir avec lui :",faqTitle:"FAQ",faq:[{q:"Est-ce que le widget fonctionne sur mobile ?",a:"Oui, il est responsive et optimisé mobile."},{q:"Puis-je changer la langue du widget ?",a:"Oui, via une option dans le dashboard ou `setOptions()`."}],supportTitle:"Besoin d'aide ?",supportText:"Notre équipe vous répond dans les 24h ouvrées."},errors:{cardMissing:"Carte non trouvée ou pas accessible.",NO_PLAN_SPECIFIED:"Aucun plan spécifié.",UNKNOWN_PLAN:"Plan inconnu.",TOO_MANY_ROOMS:"Nombre de salons dépassé pour ce plan.",VIDEO_NOT_ALLOWED:"La vidéo n’est pas autorisée dans ce plan.",SCREENSHARE_NOT_ALLOWED:"Le partage d’écran n’est pas autorisé dans ce plan.",WEBHOOKS_NOT_ALLOWED:"Les webhooks ne sont pas disponibles dans ce plan.",PRIVATE_ACCESS_NOT_ALLOWED:"L’accès privé par token n’est pas autorisé dans ce plan.",CUSTOM_BRANDING_NOT_ALLOWED:"La personnalisation visuelle n’est pas disponible dans ce plan.",DEDICATED_HOSTING_NOT_ALLOWED:"L’hébergement dédié n’est pas inclus dans ce plan.",PRIORITY_SUPPORT_NOT_ALLOWED:"Le support prioritaire n’est pas inclus dans ce plan.",STATS_NOT_ALLOWED:"Ce plan ne permet pas l’option de statistiques sélectionnée."},planChange:{title:"💳 Vous avez changé de plan.",newPlan:"Nouveau plan",price:"Prix",chargeNotice:"💰 Le renouvellement sera facturé à l’issue de votre abonnement en cours.",priceExclVAT:"{{price}} /mois HT",priceInclVAT:"{{price}} /mois",priceOnRequest:"Sur devis"},payment:{title:"Paiement",cardAlreadyAdded:"Une carte est déjà enregistrée.",cardLabel:"Carte",expirationLabel:"Expiration",statusLabel:"Statut",addedOnLabel:"Ajoutée le",updateCardButton:"Mettre à jour ma carte",explanation1:"Pour activer ton compte (même pour la version gratuite), tu dois ajouter une carte bancaire. Aucune somme ne sera débitée pour l'offre gratuite. Cela permet uniquement de vérifier ton identité et d'éviter les abus.",explanation2:"L'ajout de ta carte prend moins d'une minute via notre partenaire sécurisé Stripe. Tu pourras ensuite gérer tes abonnements ou passer à une offre payante quand tu le souhaites.",addCardButton:"Ajouter ma carte maintenant",errorCreatingSession:"Une erreur est survenue, merci de réessayer."},dashboard:{loading:"Chargement en cours...",menu:"Menu",closeMenu:"Fermer le menu",sidebarTitle:"Mon espace",config:"Config",documentation:"Documentation",payment:"Paiement",account:"Mon compte",nameLabel:"Nom",emailLabel:"Email",idLabel:"ID",logout:"Se déconnecter",referralTitle:"Parrainage",referralLinkLabel:"Ton lien de parrainage",referralCountLabel:"Nombre de filleuls",earningsLabel:"Gains cumulés",copy:"Copier",copied:"Copié !",withdraw:"Demander un retrait",withdrawing:"Retrait en cours...",withdrawSuccess:"Ta demande de retrait a été envoyée !",withdrawError:"Une erreur est survenue pendant le retrait.",referralInfo:"Pour chaque filleul qui prend un abonnement, vous recevez 10% du montant HT chaque mois. Exemple : si votre filleul paie 19€ HT/mois pendant 2 ans → vous touchez environ 45,60€. Le retrait est possible à partir de 50€ cumulés."},modal:{openButton:"Salons vocaux",title:"Salons",currentRoom:"Salon actuel :",noRoom:"Aucun",selectRoom:"Sélectionne un salon.",connected:"Connecté ✅",notConnected:"Non connecté",leave:"Quitter",join:"Rejoindre vocal",defaultRoom:"Salon"},roomActions:{micOn:"Micro on",micOff:"Micro off",camOn:"Caméra on",camOff:"Caméra off",screenOn:"Écran on",screenOff:"Écran off",leave:"Quitter"}},en:{heroTitle:"Add an interactive voice room with one script.",heroSubtitle:"Talkizi instantly turns your site into a vibrant voice space — effortlessly.",cta:"Try Talkizi for free",why:"Why Talkizi?",whyPoints:[{title:"Ultra-lightweight",desc:"Only 10kb, fast and seamless.",icon:"⚡️"},{title:"Instant setup",desc:"Copy, paste, talk.",icon:"🚀"},{title:"Customizable",desc:"Match your brand.",icon:"🎨"},{title:"Boost engagement",desc:"Build active communities.",icon:"💬"}],love:"What they’ll love",snippetTitle:"Add Talkizi in 1 line",pricingTitle:"Pricing",plans:[{title:"Free",price:"€0 /month",desc:"1 voice room, audio only, up to 4 participants."},{title:"Starter",price:"€5 /monthn excl. VAT",desc:"1 room, audio + video + screen, up to 10 participants."},{title:"Pro",price:"€19 /month excl. VAT",desc:"3 rooms, audio + video + screen, up to 10 participants, basic stats."},{title:"Business",price:"€49 /month excl. VAT",desc:"10 private rooms, token access, 20 participants, advanced stats, webhooks, branding."},{title:"Enterprise",price:"Custom pricing",desc:"Unlimited rooms, advanced integration, dedicated hosting, priority support."}],faqTitle:"FAQ",faq:[{q:"Does Talkizi impact performance?",a:"No, it’s ultra-light and optimized for fast loading."},{q:"Can I customize the widget?",a:"Yes, customization is available starting from the Pro plan."},{q:"Do I need an account?",a:"No, you can integrate and try it instantly without creating an account."}],finalCta:"Ready to talk? Try it free!",legal:{title:"Legal notice",editor:"Site publisher",editorDetails:"The Talkizi website is published by:",talkiziInfo:"Talkizi",siret:"SIRET: 83747616700031",email:"Email: contact@talkizi.com",hosting:"Hosting",hostDetails:"The website is hosted by:",hetznerAddress:"Industriestr. 25 91710 Gunzenhausen, Germany",ovhAddress:"2 rue Kellermann – 59100 Roubaix – France",ip:"Intellectual property",ipText:"All elements of the Talkizi website, including texts, images, graphics, logos, icons, sounds, and software, are protected by applicable intellectual property laws...",liability:"Liability",liabilityText:"Talkizi strives to provide the most accurate information possible on its website...",contact:"Contact",contactText:"For any questions or reports, you can contact us at:"},terms:{title:"Terms of Use",sections:[{title:"1. Purpose",content:"These Terms of Use define the terms and conditions under which Talkizi provides its voice and video room service via an embedded widget on third-party websites."},{title:"2. Acceptance",content:"By embedding or using the Talkizi widget, you unreservedly accept these Terms of Use. They may be changed at any time by Talkizi; it is your responsibility to consult them regularly."},{title:"3. Service Description",content:"Talkizi allows you to add a voice or video room to a website using a simple script. Users can join a room and communicate in real time via voice, video, or screen sharing depending on the plan.",important:"Important: Audio, video, and screen streams are transmitted exclusively peer-to-peer via WebRTC and never pass through Talkizi’s servers. No recording or processing is done."},{title:"4. User Obligations",content:"The user agrees not to use the service for illegal, defamatory purposes or in violation of others' rights. They are solely responsible for the content exchanged."},{title:"5. Liability",content:"Talkizi provides a technical communication service with no monitoring or control over the content exchanged. Talkizi accepts no responsibility in the event of disputes or fraudulent use."},{title:"6. Ownership",content:"The widget code, interfaces, and infrastructure are the exclusive property of Talkizi. Any reproduction, modification, or reuse without permission is prohibited."},{title:"7. Personal Data",content:"Talkizi does not collect any personal data via its voice/video rooms. Only technical data necessary for the service (e.g. IP addresses to establish WebRTC connections) is temporarily used without persistent storage."},{title:"8. Governing Law",content:"These Terms are governed by French law. Any disputes relating to their interpretation or execution fall under the exclusive jurisdiction of French courts."},{title:"9. Contact",content:"For any questions related to these Terms of Use, contact:",email:"contact@talkizi.com"}]},privacy:{title:"Privacy Policy",sections:[{title:"1. Introduction",content:"Talkizi is committed to protecting your privacy. This privacy policy describes how we collect, use, and protect your personal information when using our website and voice widget."},{title:"2. Data Collected",content:"We only collect data strictly necessary for the proper operation of the service. No personal data is required to access or use the Talkizi widget."},{title:"3. Use of Data",content:"Collected data (technical logs, IP address, language preferences) is used exclusively for:",list:["Ensuring service security and stability","Improving user experience","Analyzing site usage anonymously"]},{title:"4. Data Sharing",content:"No data is sold or shared with third parties for commercial purposes. Data may only be transmitted when legally or judicially required."},{title:"5. Cookies",content:"The Talkizi website only uses functional cookies necessary for proper service operation. No advertising or third-party tracking cookies are used."},{title:"6. Voice and Video Streams",content:"All voice and video streams used by Talkizi are encrypted and transmitted peer-to-peer via WebRTC. They never pass through Talkizi servers, ensuring maximum confidentiality."},{title:"7. Your Rights",content:"In accordance with GDPR, you have the right to access, rectify, delete, and transfer your data. For any request, contact us at:",email:"contact@talkizi.com"},{title:"8. Contact",content:"For any questions regarding this privacy policy, you can contact us at:",email:"contact@talkizi.com"}]},footer:{rights:"All rights reserved.",legal:"Legal notice",terms:"Terms",privacy:"Privacy"},header:{join:"Join",dashboard:"My dashboard"},config:{apiKey:"API Key",show:"Show",hide:"Hide",copy:"Copy",copied:"Copied!",rooms:"Rooms",roomName:"Room name",description:"Description",addRoom:"+ Add a room",remove:"Remove",urlsAllowed:"Allowed URLs",urlInvalid:"Invalid URL",addUrl:"+ Add a URL",plan:"Plan",free:"Free",pro:"Pro",enterprise:"Enterprise",saveConfig:"💾 Save",savedSuccess:"Configuration saved successfully!",savedError:"Failed to save configuration.",saveDisabledNoChange:"No changes to save",invalidUrls:"One or more URLs are invalid",roomTrad:{options:{video:"Video",screenShare:"Screen Share"}}},login:{subtitle:"Secure login to access Talkizi.",google:"Sign in with Google",redirecting:"Redirecting...",footer:"© 2025 Talkizi. All rights reserved."},docs:{title:"Talkizi Widget Documentation",intro:"Integrate Talkizi in seconds into your HTML, React, Vue or SolidJS website.",advancedTitle:"Advanced Options",advancedText:"You can customize the widget's behavior using HTML attributes.",keyDesc:"Your project’s public key (available in the Talkizi dashboard).",showDesc:"Whether to show the widget by default (true/false).",apiTitle:"JavaScript API",apiIntro:"The widget exposes a global JavaScript API you can interact with:",faqTitle:"FAQ",faq:[{q:"Does the widget work on mobile?",a:"Yes, it is fully responsive and mobile-optimized."},{q:"Can I change the widget's language?",a:"Yes, via an option in the dashboard or using `setOptions()`."}],supportTitle:"Need help?",supportText:"Our team will get back to you within 24 business hours."},errors:{cardMissing:"Card not found or invalid",NO_PLAN_SPECIFIED:"No plan specified.",UNKNOWN_PLAN:"Unknown plan.",TOO_MANY_ROOMS:"Too many rooms for this plan.",VIDEO_NOT_ALLOWED:"Video is not allowed with this plan.",SCREENSHARE_NOT_ALLOWED:"Screen sharing is not allowed with this plan.",WEBHOOKS_NOT_ALLOWED:"Webhooks are not allowed with this plan.",PRIVATE_ACCESS_NOT_ALLOWED:"Private token access is not allowed with this plan.",CUSTOM_BRANDING_NOT_ALLOWED:"Custom branding is not allowed with this plan.",DEDICATED_HOSTING_NOT_ALLOWED:"Dedicated hosting is not available with this plan.",PRIORITY_SUPPORT_NOT_ALLOWED:"Priority support is not included in this plan.",STATS_NOT_ALLOWED:"This plan does not allow the selected statistics option."},planChange:{title:"💳 You changed your plan.",newPlan:"New plan",price:"Price",chargeNotice:"💰 You won’t be charged until your current subscription ends.",priceExclVAT:"{{price}} /month (excluding VAT)",priceInclVAT:"{{price}} /month",priceOnRequest:"On request"},payment:{title:"Payment",cardAlreadyAdded:"A card is already on file.",cardLabel:"Card",expirationLabel:"Expiration",statusLabel:"Status",addedOnLabel:"Added on",updateCardButton:"Update my card",explanation1:"To activate your account (even for the free plan), you must add a credit card. No charges will be made for the free offer. This is solely to verify your identity and prevent abuse.",explanation2:"Adding your card takes less than a minute via our secure partner Stripe. You'll then be able to manage your subscriptions or upgrade at any time.",addCardButton:"Add my card now",errorCreatingSession:"An error occurred, please try again."},dashboard:{loading:"Loading...",menu:"Menu",closeMenu:"Close menu",sidebarTitle:"My dashboard",config:"Settings",documentation:"Documentation",payment:"Payment",account:"My account",nameLabel:"Name",emailLabel:"Email",idLabel:"ID",logout:"Log out",referralTitle:"Referral Program",referralLinkLabel:"Your referral link",referralCountLabel:"Number of referrals",earningsLabel:"Total earnings",copy:"Copy",copied:"Copied!",withdraw:"Request Withdrawal",withdrawing:"Withdrawing...",withdrawSuccess:"Your withdrawal request has been sent!",withdrawError:"An error occurred during withdrawal.",referralInfo:"For each person you refer who subscribes, you receive 10% of the pre-tax amount every month. Example: if your referral pays €19 excl. tax/month for 2 years → you earn around €45.60. Withdrawals available once you reach €50."},modal:{openButton:"Voice rooms",title:"Rooms",currentRoom:"Current room:",noRoom:"None",selectRoom:"Select a room.",connected:"Connected ✅",notConnected:"Not connected",leave:"Leave",join:"Join voice",defaultRoom:"Room"},roomActions:{micOn:"Mic on",micOff:"Mic off",camOn:"Camera on",camOff:"Camera off",screenOn:"Screen on",screenOff:"Screen off",leave:"Leave"}}};var vi=R('<button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor></svg><span>'),Tn=R("<button><span>"),_i=R('<button><svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 16l4-4m0 0l-4-4m4 4H7"></path></svg><span>'),bi=R('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5v14l12-7L9 5z"></svg>',!1,!0,!1),Ci=R('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 5l14 14M15 10v4m0 0H9m6 0V6m0 0h6"></svg>',!1,!0,!1),Si=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 0 1-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 0 0-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409">'),ki=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z">'),Ti=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M3 3v18h18V3H3zm9 4v10M7 12h10">'),xi=R('<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M3 3v18h18V3H3z">');function Ri(n){const{lang:e}=Sn(),t=()=>kn[e()];return[(()=>{var r=vi(),i=r.firstChild,s=i.nextSibling;return oe(r,"click",n.onToggleMute),b(i,(()=>{var o=J(()=>!!n.isMuted);return()=>o()?bi():Ci()})()),b(s,(()=>{var o=J(()=>!!n.isMuted);return()=>o()?t().roomActions.micOff:t().roomActions.micOn})()),ne(()=>Z(r,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})(),(()=>{var r=Tn(),i=r.firstChild;return oe(r,"click",n.onToggleVideoEnabled),b(r,(()=>{var s=J(()=>!!n.isVideoEnabled);return()=>s()?Si():ki()})(),i),b(i,(()=>{var s=J(()=>!!n.isVideoEnabled);return()=>s()?t().roomActions.camOff:t().roomActions.camOn})()),ne(()=>Z(r,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})(),(()=>{var r=Tn(),i=r.firstChild;return oe(r,"click",n.onToggleScreenShare),b(r,(()=>{var s=J(()=>!!n.isScreenSharing);return()=>s()?Ti():xi()})(),i),b(i,(()=>{var s=J(()=>!!n.isScreenSharing);return()=>s()?t().roomActions.screenOff:t().roomActions.screenOn})()),ne(()=>Z(r,`inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})(),(()=>{var r=_i(),i=r.firstChild,s=i.nextSibling;return oe(r,"click",n.onLeave),b(s,()=>t().roomActions.leave),ne(()=>Z(r,`inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-medium px-4 py-2 rounded-lg shadow transition ${n.fullScreen?"w-auto":"w-[48%]"}`)),r})()]}Oe(["click"]);const le=Object.create(null);le.open="0",le.close="1",le.ping="2",le.pong="3",le.message="4",le.upgrade="5",le.noop="6";const ot=Object.create(null);Object.keys(le).forEach(n=>{ot[le[n]]=n});const Lt={type:"error",data:"parser error"},xn=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rn=typeof ArrayBuffer=="function",En=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,It=({type:n,data:e},t,r)=>xn&&e instanceof Blob?t?r(e):wn(e,r):Rn&&(e instanceof ArrayBuffer||En(e))?t?r(e):wn(new Blob([e]),r):r(le[n]+(e||"")),wn=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function Pn(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Dt;function Ei(n,e){if(xn&&n.data instanceof Blob)return n.data.arrayBuffer().then(Pn).then(e);if(Rn&&(n.data instanceof ArrayBuffer||En(n.data)))return e(Pn(n.data));It(n,!1,t=>{Dt||(Dt=new TextEncoder),e(Dt.encode(t))})}const An="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<An.length;n++)Ue[An.charCodeAt(n)]=n;const wi=n=>{let e=n.length*.75,t=n.length,r,i=0,s,o,a,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<t;r+=4)s=Ue[n.charCodeAt(r)],o=Ue[n.charCodeAt(r+1)],a=Ue[n.charCodeAt(r+2)],c=Ue[n.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},Pi=typeof ArrayBuffer=="function",$t=(n,e)=>{if(typeof n!="string")return{type:"message",data:On(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Ai(n.substring(1),e)}:ot[t]?n.length>1?{type:ot[t],data:n.substring(1)}:{type:ot[t]}:Lt},Ai=(n,e)=>{if(Pi){const t=wi(n);return On(t,e)}else return{base64:!0,data:n}},On=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},Ln="",Oi=(n,e)=>{const t=n.length,r=new Array(t);let i=0;n.forEach((s,o)=>{It(s,!1,a=>{r[o]=a,++i===t&&e(r.join(Ln))})})},Li=(n,e)=>{const t=n.split(Ln),r=[];for(let i=0;i<t.length;i++){const s=$t(t[i],e);if(r.push(s),s.type==="error")break}return r};function Ii(){return new TransformStream({transform(n,e){Ei(n,t=>{const r=t.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Mt;function at(n){return n.reduce((e,t)=>e+t.length,0)}function ct(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)t[i]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function Di(n,e){Mt||(Mt=new TextDecoder);const t=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(r===0){if(at(t)<1)break;const c=ct(t,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(at(t)<2)break;const c=ct(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(at(t)<8)break;const c=ct(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Lt);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(at(t)<i)break;const c=ct(t,i);a.enqueue($t(s?c:Mt.decode(c),e)),r=0}if(i===0||i>n){a.enqueue(Lt);break}}}})}const In=4;function z(n){if(n)return $i(n)}function $i(n){for(var e in z.prototype)n[e]=z.prototype[e];return n}z.prototype.on=z.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this},z.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this},z.prototype.off=z.prototype.removeListener=z.prototype.removeAllListeners=z.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,i=0;i<t.length;i++)if(r=t[i],r===e||r.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this},z.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,i=t.length;r<i;++r)t[r].apply(this,e)}return this},z.prototype.emitReserved=z.prototype.emit,z.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},z.prototype.hasListeners=function(n){return!!this.listeners(n).length};const lt=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),re=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Mi="arraybuffer";function Ro(){}function Dn(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const Bi=re.setTimeout,Ni=re.clearTimeout;function ut(n,e){e.useNativeTimers?(n.setTimeoutFn=Bi.bind(re),n.clearTimeoutFn=Ni.bind(re)):(n.setTimeoutFn=re.setTimeout.bind(re),n.clearTimeoutFn=re.clearTimeout.bind(re))}const ji=1.33;function zi(n){return typeof n=="string"?Ui(n):Math.ceil((n.byteLength||n.size)*ji)}function Ui(n){let e=0,t=0;for(let r=0,i=n.length;r<i;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function $n(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Fi(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function qi(n){let e={},t=n.split("&");for(let r=0,i=t.length;r<i;r++){let s=t[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Vi extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Bt extends z{constructor(e){super(),this.writable=!1,ut(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new Vi(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=$t(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Fi(e);return t.length?"?"+t:""}}class Hi extends Bt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Li(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Oi(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=$n()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Mn=!1;try{Mn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wi=Mn;function Gi(){}class Ki extends Hi{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class ue extends z{constructor(e,t,r){super(),this.createRequest=e,ut(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=Dn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ue.requestsCount++,ue.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Gi,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ue.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(ue.requestsCount=0,ue.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Bn);else if(typeof addEventListener=="function"){const n="onpagehide"in re?"pagehide":"unload";addEventListener(n,Bn,!1)}}function Bn(){for(let n in ue.requests)ue.requests.hasOwnProperty(n)&&ue.requests[n].abort()}const Ji=function(){const n=Nn({xdomain:!1});return n&&n.responseType!==null}();class Yi extends Ki{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Ji&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ue(Nn,this.uri(),e)}}function Nn(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wi))return new XMLHttpRequest}catch{}if(!e)try{return new re[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const jn=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qi extends Bt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=jn?{}:Dn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;It(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&lt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=$n()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Nt=re.WebSocket||re.MozWebSocket;class Xi extends Qi{createSocket(e,t,r){return jn?new Nt(e,t,r):t?new Nt(e,t):new Nt(e)}doWrite(e,t){this.ws.send(t)}}class Zi extends Bt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Di(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=Ii();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&lt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const es={websocket:Xi,webtransport:Zi,polling:Yi},ts=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ns=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jt(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let i=ts.exec(n||""),s={},o=14;for(;o--;)s[ns[o]]=i[o]||"";return t!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=rs(s,s.path),s.queryKey=is(s,s.query),s}function rs(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function is(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(t[i]=s)}),t}const zt=typeof addEventListener=="function"&&typeof removeEventListener=="function",dt=[];zt&&addEventListener("offline",()=>{dt.forEach(n=>n())},!1);class be extends z{constructor(e,t){if(super(),this.binaryType=Mi,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=jt(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=jt(t.host).host);ut(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qi(this.opts.query)),zt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},dt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=In,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&be.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",be.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(t+=zi(i)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,lt(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if(typeof t=="function"&&(i=t,t=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(be.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=dt.indexOf(this._offlineEventListener);r!==-1&&dt.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}be.protocol=In;class ss extends be{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;be.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;be.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=t.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),t.close(),t=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=t.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){t&&d.name!==t.name&&s()}const u=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let os=class extends ss{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>es[i]).filter(i=>!!i)),super(e,r)}};function as(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=jt(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}const cs=typeof ArrayBuffer=="function",ls=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,zn=Object.prototype.toString,us=typeof Blob=="function"||typeof Blob<"u"&&zn.call(Blob)==="[object BlobConstructor]",ds=typeof File=="function"||typeof File<"u"&&zn.call(File)==="[object FileConstructor]";function Ut(n){return cs&&(n instanceof ArrayBuffer||ls(n))||us&&n instanceof Blob||ds&&n instanceof File}function ft(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(ft(n[t]))return!0;return!1}if(Ut(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return ft(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&ft(n[t]))return!0;return!1}function fs(n){const e=[],t=n.data,r=n;return r.data=Ft(t,e),r.attachments=e.length,{packet:r,buffers:e}}function Ft(n,e){if(!n)return n;if(Ut(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=Ft(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=Ft(n[r],e));return t}return n}function hs(n,e){return n.data=qt(n.data,e),delete n.attachments,n}function qt(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=qt(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=qt(n[t],e));return n}const ps=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ms=5;var k;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(k||(k={}));class gs{constructor(e){this.replacer=e}encode(e){return(e.type===k.EVENT||e.type===k.ACK)&&ft(e)?this.encodeAsBinary({type:e.type===k.EVENT?k.BINARY_EVENT:k.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===k.BINARY_EVENT||e.type===k.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=fs(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function Un(n){return Object.prototype.toString.call(n)==="[object Object]"}class Vt extends z{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===k.BINARY_EVENT;r||t.type===k.BINARY_ACK?(t.type=r?k.EVENT:k.ACK,this.reconstructor=new ys(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Ut(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(k[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===k.BINARY_EVENT||r.type===k.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(s,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(s,t)}else r.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const s=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(Vt.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case k.CONNECT:return Un(t);case k.DISCONNECT:return t===void 0;case k.CONNECT_ERROR:return typeof t=="string"||Un(t);case k.EVENT:case k.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&ps.indexOf(t[0])===-1);case k.ACK:case k.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ys{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=hs(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const vs=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Vt,Encoder:gs,get PacketType(){return k},protocol:ms},Symbol.toStringTag,{value:"Module"}));function ae(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const _s=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Fn extends z{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ae(e,"open",this.onopen.bind(this)),ae(e,"packet",this.onpacket.bind(this)),ae(e,"error",this.onerror.bind(this)),ae(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,s;if(_s.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:k.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,d=t.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:k.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case k.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case k.EVENT:case k.BINARY_EVENT:this.onevent(e);break;case k.ACK:case k.BINARY_ACK:this.onack(e);break;case k.DISCONNECT:this.ondisconnect();break;case k.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:k.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:k.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function De(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}De.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0},De.prototype.reset=function(){this.attempts=0},De.prototype.setMin=function(n){this.ms=n},De.prototype.setMax=function(n){this.max=n},De.prototype.setJitter=function(n){this.jitter=n};class Ht extends z{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ut(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new De({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||vs;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new os(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=ae(t,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=ae(t,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),t.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ae(e,"ping",this.onping.bind(this)),ae(e,"data",this.ondata.bind(this)),ae(e,"error",this.onerror.bind(this)),ae(e,"close",this.onclose.bind(this)),ae(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){lt(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Fn(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fe={};function ht(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=as(n,e.path||"/socket.io"),r=t.source,i=t.id,s=t.path,o=Fe[i]&&s in Fe[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new Ht(r,e):(Fe[i]||(Fe[i]=new Ht(r,e)),c=Fe[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(ht,{Manager:Ht,Socket:Fn,io:ht,connect:ht});function bs(n){var Wr,Gr,Kr,Jr;const[e,t]=L(!1),[r,i]=L(!1),[s,o]=L(null),[a,c]=L(null),[l,u]=L(null),[d,f]=L(null),[p,T]=L(new Map),[E,de]=L(!1),[ye,G]=L(!1),[ee,y]=L(new Map),[q,F]=L(new Map),[Me,we]=L(new Map),[ve,te]=L(new Map),[ie,M]=L(!1),[X,Ce]=L(null),v="talkizi.com",O=((Wr=window.location.hostname)!=null&&Wr.includes("local")||(Gr=window.location.hostname)!=null&&Gr.includes("192.168"))&&!(v!=null&&v.includes("talk"))?parseInt(void 0):443,I=((Kr=window.location.hostname)!=null&&Kr.includes("local")||(Jr=window.location.hostname)!=null&&Jr.includes("192.168"))&&!(v!=null&&v.includes("talk"))?parseInt(void 0):443,w=ht(`https://${v}:${O}`);function fe(){var S;if(!d())return;const g=(S=d())==null?void 0:S.getAudioTracks()[0];if(!g)return;const x=!r();g.enabled=!x,i(x)}function B(){if(!s()||E())return;de(!0);const g=l(),x=s(),S=n.rooms.map(m=>m._id),K=S.join(",");if(document.querySelectorAll("audio").forEach(m=>{try{m.pause(),m.srcObject=null,m.remove()}catch{}}),w.emit("leave-room",{roomId:x,clientId:(g==null?void 0:g.id)??"unknown",groupRooms:S,groupId:K}),w.emit("get-all-counts",{rooms:n.rooms.map(m=>m._id),groupRooms:n.rooms.map(m=>m._id)}),ve().forEach(m=>{try{m.close()}catch{}}),te(new Map),xt(),g)try{g.disconnect(),g.destroy()}catch{}u(null);const C=d();C&&C.getTracks().forEach(m=>m.stop()),f(null),y(new Map),Ce(null),F(new Map),G(!1),o(null),c(null),de(!1)}async function se(g){B(),c(`Connexion à ${g.name}...`);const{Peer:x}=await Promise.resolve().then(()=>Co),S=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});f(S);const K=`${g._id}-${crypto.randomUUID()}`,C=new x(K,{host:v,secure:!0,port:I,path:"/voice"});u(C),o(g._id),C.on("open",m=>{c(`Connecté à ${g.name} ✅`),w.emit("join-room",{roomId:g._id,clientId:m,groupRooms:n.rooms.map(_=>_._id),groupId:n.rooms.map(_=>_._id).join(",")}),w.emit("ask-video-states",{roomId:g._id,requesterId:m}),w.emit("get-all-counts",{rooms:n.rooms.map(_=>_._id),groupRooms:n.rooms.map(_=>_._id)}),w.emit("please-call-me",{requesterId:m})}),C.on("call",m=>{var P;const _=((P=m.metadata)==null?void 0:P.type)??"camera";_==="screen"?m.answer():m.answer(d()),te(N=>new Map(N.set(m.peer,m))),m.on("stream",N=>{_==="screen"?F(Je=>new Map(Je.set(m.peer,N))):y(Je=>new Map(Je.set(m.peer,N)));const U=new Audio;U.srcObject=N,U.autoplay=!0,U.play().catch(Je=>console.warn("Impossible de jouer le son",Je))}),m.on("close",()=>{_==="screen"?F(N=>{const U=new Map(N);return U.delete(m.peer),U}):y(N=>{const U=new Map(N);return U.delete(m.peer),U})})}),C.on("disconnected",()=>{E()||(c("Déconnecté"),B())})}async function he(){const g=l();if(g)if(ie())xt();else try{const x=await navigator.mediaDevices.getDisplayMedia({video:!0});Ce(x),M(!0);const S=x.getVideoTracks()[0];w.emit("screen-on",{roomId:s(),peerId:g.id}),g.listAllPeers(K=>{K.filter(C=>C!==g.id&&C.startsWith(`${s()}-`)).forEach(C=>{const m=g.call(C,x,{metadata:{type:"screen"}});te(_=>new Map(_.set(m.peer,m))),m.on("stream",_=>{F(P=>new Map(P.set(m.peer,_)))}),m.on("close",()=>{F(_=>{const P=new Map(_);return P.delete(m.peer),P})})})}),S.onended=()=>{xt()}}catch(x){console.error("Erreur lors du partage d’écran :",x)}}function xt(){const g=X();if(!g)return;const x=g.getVideoTracks()[0];x&&x.stop(),M(!1),Ce(null);const S=l();S&&(w.emit("screen-off",{roomId:s(),peerId:S.id}),ve().forEach((K,C)=>{var P;const m=(P=K._localStream)==null?void 0:P.getVideoTracks();(m==null?void 0:m.some(N=>N.label.toLowerCase().includes("screen")))&&(K.close(),F(N=>{const U=new Map(N);return U.delete(C),U}),te(N=>{const U=new Map(N);return U.delete(C),U}))}))}async function So(){const g=d();if(!g)return;let x=g.getVideoTracks()[0];const S=l();if(x)x.enabled=!x.enabled,G(x.enabled),w.emit(x.enabled?"video-on":"video-off",{roomId:s(),peerId:S==null?void 0:S.id}),x.enabled&&S&&S.listAllPeers(K=>{K.filter(C=>C!==S.id&&C.startsWith(`${s()}-`)).forEach(C=>{const m=S.call(C,g);te(_=>new Map(_.set(m.peer,m))),m.on("stream",_=>{y(P=>new Map(P.set(m.peer,_)))}),m.on("close",()=>{y(_=>{const P=new Map(_);return P.delete(m.peer),P})})})});else try{const C=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];C&&(g.addTrack(C),G(!0),w.emit("video-on",{roomId:s(),peerId:S==null?void 0:S.id}),S&&S.listAllPeers(m=>{m.filter(_=>_!==S.id&&_.startsWith(`${s()}-`)).forEach(_=>{const P=S.call(_,g,{metadata:{type:"camera"}});te(N=>new Map(N.set(P.peer,P))),P.on("stream",N=>{y(U=>new Map(U.set(P.peer,N)))}),P.on("close",()=>{y(N=>{const U=new Map(N);return U.delete(P.peer),U})})})}))}catch(K){console.error("Erreur caméra",K)}}w.on("all-participant-counts",g=>{T(new Map(Object.entries(g)))}),w.on("remote-video-off",({peerId:g})=>{we(x=>new Map(x.set(g,!1))),y(x=>{const S=new Map(x);return S.delete(g),S})}),w.on("remote-video-on",({peerId:g})=>{console.log(`Video activée pour ${g}`),we(x=>new Map(x.set(g,!0)))}),w.on("request-video-state",({requesterId:g})=>{var S;const x=(S=l())==null?void 0:S.id;x&&w.emit(ye()?"video-on":"video-off",{roomId:s(),peerId:x})});function Vr(){c("Plus de réseau ❌"),B()}function Hr(){c("Connexion rétablie ✅"),w.emit("get-all-counts",{rooms:n.rooms.map(g=>g._id),groupRooms:n.rooms.map(g=>g._id)})}return window.addEventListener("offline",Vr),window.addEventListener("online",Hr),wt(()=>{window.removeEventListener("offline",Vr),window.removeEventListener("online",Hr)}),w.emit("subscribe-group",{groupId:n.rooms.map(g=>g._id).join(",")}),w.on("please-call-me",({requesterId:g})=>{const x=l();if(!x)return;const S=d(),K=X();if(S){const C=x.call(g,S,{metadata:{type:"camera"}});te(m=>new Map(m.set(C.peer,C))),C.on("stream",m=>{y(P=>new Map(P.set(C.peer,m)));const _=new Audio;_.srcObject=m,_.autoplay=!0,_.play().catch(P=>console.warn("Impossible de jouer le son",P))}),C.on("close",()=>{y(m=>{const _=new Map(m);return _.delete(C.peer),_})})}if(K){const C=x.call(g,K,{metadata:{type:"screen"}});te(m=>new Map(m.set(C.peer,C))),C.on("stream",m=>{F(_=>new Map(_.set(C.peer,m)))}),C.on("close",()=>{F(m=>{const _=new Map(m);return _.delete(C.peer),_})})}}),w.emit("get-all-counts",{rooms:n.rooms.map(g=>g._id),groupRooms:n.rooms.map(g=>g._id)}),{visible:e,isMuted:r,joinedRoom:s,status:a,roomParticipantCounts:p,open:()=>t(!0),close:B,leaveAndClose:()=>{B(),t(!1)},joinRoom:se,leaveRoom:B,toggleMute:fe,localStream:d,isVideoEnabled:ye,toggleVideo:So,remoteStreams:ee,remoteVideoStates:Me,toggleScreenShare:he,remoteScreenStreams:q,stopScreenShare:xt,screenStream:X,isScreenSharing:ie}}var Cs=R('<div class="flex items-center gap-2"><button title="Plein écran"class="flex items-center gap-1 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full px-2 py-1 transition"><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 3H5a2 2 0 0 0-2 2v3m0 8v3a2 2 0 0 0 2 2h3m8-16h3a2 2 0 0 1 2 2v3m0 8v3a2 2 0 0 1-2 2h-3"></path></svg></button><button class="flex items-center gap-1 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full px-2 py-1 transition"></button><button class="flex items-center gap-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900 rounded-full px-2 py-1 transition"title=Fermer><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Ss=R('<svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4h7M4 4v7M20 20h-7M20 20v-7">'),ks=R('<svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4h7M4 4v7M20 20h-7M20 20v-7"></path> ');function qn(n){return(()=>{var e=Cs(),t=e.firstChild,r=t.nextSibling,i=r.nextSibling;return oe(t,"click",n.onToogleFullScreen),oe(r,"click",n.onToggleExpand),b(r,(()=>{var s=J(()=>!!n.isExpanded);return()=>s()?Ss():ks()})()),oe(i,"click",n.onClose),ne(()=>di(r,"title",n.isExpanded?"Réduire":"Agrandir")),e})()}Oe(["click"]);var Ts=R('<div class="relative cursor-zoom-in w-full max-w-1/4 max-h-[300px] rounded-md overflow-hidden"><video muted class="w-full h-auto rounded object-cover"autoplay playsinline>'),xs=R('<div class="z-10 mt-6 flex gap-2 overflow-x-auto px-4 py-2 bg-black/60 rounded-lg">'),Rs=R('<div class="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center"><div class="absolute inset-0"></div><video muted class="max-w-full max-h-full z-10 rounded-lg shadow-2xl"autoplay playsinline>'),Es=R('<video muted class="w-24 h-16 rounded object-cover border border-white/20"autoplay playsinline>'),ws=R('<div class="w-full max-w-1/4 max-h-[300px] rounded-md bg-black flex items-center justify-center text-white">📷 Caméra désactivée');function Ps(n){let e,t;const[r,i]=L(!1);tt(()=>{if(e&&n.stream&&n.isVideoEnabled){const o=n.stream.getVideoTracks().some(a=>a.readyState==="live");e.srcObject=o?n.stream:null,e.onloadedmetadata=()=>e==null?void 0:e.play().catch(console.warn)}}),tt(()=>{r()&&t&&n.stream&&(t.srcObject=n.stream,t.onloadedmetadata=()=>t==null?void 0:t.play().catch(console.warn))});const s=o=>{o.key==="Escape"&&i(!1)};return tt(()=>{r()?window.addEventListener("keydown",s):window.removeEventListener("keydown",s),wt(()=>window.removeEventListener("keydown",s))}),n.isVideoEnabled?[(()=>{var o=Ts(),a=o.firstChild;return o.$$click=()=>i(!0),ze(c=>e=c,a),o})(),D(Ae,{get when(){return r()},get children(){var o=Rs(),a=o.firstChild,c=a.nextSibling;return a.$$click=()=>i(!1),ze(l=>t=l,c),b(o,D(Ae,{get when(){return n.peers&&n.peers.length>0},get children(){var l=xs();return b(l,D(it,{get each(){return n.peers},children:u=>(()=>{var d=Es();return ze(f=>{f.srcObject=u.stream,f.onloadedmetadata=()=>f.play().catch(console.warn)},d),d})()})),l}}),null),o}})]:ws()}Oe(["click"]);var As=R('<a href=https://talkizi.com target=_blank rel="noopener noreferrer"><span>Powered by</span><span class="font-semibold text-indigo-600">Talkizi');function Vn(n){return(()=>{var e=As();return ne(()=>Z(e,`flex items-center justify-center gap-1 text-xs text-gray-400 hover:text-indigo-500 transition-colors ${n.class??""}`)),e})()}var Os=R('<div class="z-10 mt-6 flex gap-2 overflow-x-auto px-4 py-2 bg-black/60 rounded-lg max-w-full">'),Ls=R('<div class="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center"><div class="absolute inset-0 cursor-zoom-out"></div><video muted autoplay playsinline class="z-10 max-w-full max-h-full rounded-xl shadow-2xl">'),Is=R("<video muted autoplay playsinline>");function Ds(n){return(()=>{var e=Ls(),t=e.firstChild,r=t.nextSibling;return oe(t,"click",n.onClose),ze(i=>{i.srcObject=n.current.stream,i.onloadedmetadata=()=>i.play().catch(console.warn)},r),b(e,D(Ae,{get when(){return n.all.length>1},get children(){var i=Os();return b(i,D(it,{get each(){return n.all},children:s=>(()=>{var o=Is();return o.$$click=a=>{a.stopPropagation(),n.onSelect(s.id)},ze(a=>{a.srcObject=s.stream,a.onloadedmetadata=()=>a.play().catch(console.warn)},o),ne(()=>Z(o,`w-24 h-16 rounded cursor-pointer border ${s.id===n.current.id?"border-white":"border-transparent"}`)),o})()})),i}}),null),e})()}Oe(["click"]);var $s=R('<button class="fixed bottom-6 right-6 z-50 bg-gradient-to-br from-indigo-600 to-purple-500 text-white px-5 py-3 rounded-full shadow-2xl hover:scale-105 transition-all duration-200 flex items-center gap-3"><span>'),Ms=R('<div><div><div><h2></h2></div><div class="flex-1 overflow-y-auto"><div></div><div></div></div><div class="border-t p-4 border-gray-200 dark:border-gray-700"><h3></h3><p class="text-base font-bold text-gray-900 dark:text-white"></p><p class="text-xs text-gray-500 mt-1">'),Bs=R('<div class="flex gap-2">'),Ns=R('<div class="mt-4 flex gap-2 flex-wrap justify-center">'),js=R('<div class="fixed bottom-6 right-6 z-50"><div class="w-[260px] bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 flex flex-col transition-all"><div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"><h2 class="text-sm font-semibold text-gray-800 dark:text-white"></h2></div><div class="p-3 flex flex-col gap-2"><p class="text-xs text-gray-500"></p><div class="flex gap-2 flex-wrap">'),zs=R('<button class="bg-yellow-600 hover:bg-yellow-700 text-white px-2 py-1 rounded text-xs">'),Us=R('<button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs">'),Fs=R('<button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs">');function qs(n){const[e,t]=L(null),[r,i]=L("expanded"),[s,o]=L(null),[a,c]=L(!1),l=()=>r()==="fullscreen",u=()=>r()==="expanded",d=()=>r()==="minimized",{lang:f}=Sn(),p=()=>kn[f()];Xr(()=>{var y;if((y=n.config)!=null&&y.talkiziId){const q=new URLSearchParams(window.location.search);c(q.get("support")==="true"),T()}});const T=()=>{if(e())e().open();else{const y=bs(n.config);t(y),y.open()}},E=()=>{i(d()?"expanded":"minimized")},de=()=>{i(y=>y==="fullscreen"?"expanded":"fullscreen")},ye=()=>a()?"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50":"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-end z-50",G=()=>a()?"w-[92vw] max-w-[780px] h-[84vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl flex flex-col transition-all":`h-full bg-white dark:bg-gray-900 rounded-l-xl shadow-lg flex flex-col transition-all ${l()?"w-full":"sm:w-[400px]"}`,ee=()=>a()?"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center rounded-t-2xl":"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center";return[D(Ae,{get when(){var y;return!((y=e())!=null&&y.visible())},get children(){var y=$s(),q=y.firstChild;return y.$$click=T,b(q,()=>p().modal.openButton),b(y,D(Vn,{}),null),y}}),J(()=>J(()=>{var y;return!!((y=e())!=null&&y.visible()&&!d())})()&&(()=>{var y=Ms(),q=y.firstChild,F=q.firstChild,Me=F.firstChild,we=F.nextSibling,ve=we.firstChild,te=ve.nextSibling,ie=we.nextSibling,M=ie.firstChild,X=M.nextSibling,Ce=X.nextSibling;return y.$$click=v=>{var O;v.target===v.currentTarget&&((O=e())==null||O.leaveAndClose())},b(Me,(()=>{var v=J(()=>!!a());return()=>v()?"Support":p().modal.title})()),b(F,D(qn,{onToogleFullScreen:de,get isFullScreen(){return l()},get isExpanded(){return u()},onExpand:()=>i("expanded"),onToggleExpand:E,get onClose(){return e().leaveAndClose}}),null),b(ve,D(it,{get each(){return n.config.rooms},children:v=>(()=>{var O=Bs();return b(O,D(gi,{get plan(){return n.config.plan},get fullScreen(){return l()},room:v,get joinedRoomId(){return e().joinedRoom()},get count(){var I;return((I=e())==null?void 0:I.roomParticipantCounts().get(v._id))??0},onJoin:()=>{var I;return(I=e())==null?void 0:I.joinRoom(v)}})),O})()})),b(te,D(it,{get each(){var v,O,I,w,fe;return[...(v=e())!=null&&v.localStream()&&((O=e())!=null&&O.isVideoEnabled())?[{id:"local",stream:(I=e())==null?void 0:I.localStream(),isVideoEnabled:!0}]:[],...(w=e())!=null&&w.screenStream()?[{id:"local-screen",stream:(fe=e())==null?void 0:fe.screenStream(),isVideoEnabled:!0}]:[],...Array.from(e().remoteStreams().entries()).map(([B,se])=>{var he;return{id:B,stream:se,isVideoEnabled:((he=e())==null?void 0:he.remoteVideoStates().get(B))??!0}}),...Array.from(e().remoteScreenStreams().entries()).map(([B,se])=>({id:`${B}-screen`,stream:se,isVideoEnabled:!0}))]},children:v=>D(Ps,{get stream(){return v.stream},get isVideoEnabled(){return v.isVideoEnabled},peers:[]})}),null),b(te,D(Ae,{get when(){return s()},get children(){return D(Ds,{get current(){var v,O,I,w,fe;return[...(v=e())!=null&&v.localStream()&&((O=e())!=null&&O.isVideoEnabled())?[{id:"local",stream:(I=e())==null?void 0:I.localStream(),isVideoEnabled:!0}]:[],...(w=e())!=null&&w.screenStream()?[{id:"local-screen",stream:(fe=e())==null?void 0:fe.screenStream(),isVideoEnabled:!0}]:[],...Array.from(e().remoteStreams().entries()).map(([B,se])=>{var he;return{id:B,stream:se,isVideoEnabled:((he=e())==null?void 0:he.remoteVideoStates().get(B))??!0}}),...Array.from(e().remoteScreenStreams().entries()).map(([B,se])=>({id:`${B}-screen`,stream:se,isVideoEnabled:!0}))].find(B=>B.id===s())},all:[],onSelect:o,onClose:()=>o(null)})}}),null),b(M,()=>p().modal.currentRoom),b(X,()=>{var v;return((v=n.config.rooms.find(O=>{var I;return O._id===((I=e())==null?void 0:I.joinedRoom())}))==null?void 0:v.name)??p().modal.noRoom}),b(Ce,()=>{var v;return((v=e())==null?void 0:v.status())??p().modal.selectRoom}),b(ie,(()=>{var v=J(()=>{var O;return!!((O=e())!=null&&O.joinedRoom())});return()=>v()&&(()=>{var O=Ns();return b(O,D(Ri,{get fullScreen(){return l()},get isMuted(){return e().isMuted()},get onToggleMute(){return e().toggleMute},get onLeave(){return e().leaveRoom},get onToggleVideoEnabled(){return e().toggleVideo},get isVideoEnabled(){return e().isVideoEnabled()},get onToggleScreenShare(){return e().toggleScreenShare},get isScreenSharing(){var I;return(I=e())==null?void 0:I.isScreenSharing()}})),O})()})(),null),b(q,D(Vn,{}),null),ne(v=>{var O=ye(),I=G(),w=ee(),fe=a()?"text-lg font-semibold":"text-lg font-semibold text-gray-800 dark:text-white",B=`flex ${l()?"flex-row gap-4":"flex-col gap-4 "} p-4`,se=`flex flex-row flex-wrap gap-4 w-full justify-start p-4 ${a()?"bg-white dark:bg-gray-900":""}`,he=(a(),"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-1");return O!==v.e&&Z(y,v.e=O),I!==v.t&&Z(q,v.t=I),w!==v.a&&Z(F,v.a=w),fe!==v.o&&Z(Me,v.o=fe),B!==v.i&&Z(ve,v.i=B),se!==v.n&&Z(te,v.n=se),he!==v.s&&Z(M,v.s=he),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),y})()),J(()=>J(()=>{var y;return!!((y=e())!=null&&y.visible()&&d())})()&&(()=>{var y=js(),q=y.firstChild,F=q.firstChild,Me=F.firstChild,we=F.nextSibling,ve=we.firstChild,te=ve.nextSibling;return b(Me,()=>{var ie;return((ie=n.config.rooms[0])==null?void 0:ie.name)??p().modal.defaultRoom}),b(F,D(qn,{get isFullScreen(){return l()},onToogleFullScreen:de,get isExpanded(){return u()},onExpand:()=>i("expanded"),onToggleExpand:E,get onClose(){return e().leaveAndClose}}),null),b(ve,(()=>{var ie=J(()=>!!e().joinedRoom());return()=>{var M;return ie()?((M=e())==null?void 0:M.status())??p().modal.connected:p().modal.notConnected}})()),b(te,(()=>{var ie=J(()=>!!e().joinedRoom());return()=>ie()?[(()=>{var X;var M=zs();return oe(M,"click",(X=e())==null?void 0:X.toggleMute),b(M,()=>{var Ce;return(Ce=e())!=null&&Ce.isMuted()?"🔇":"🎙️"}),M})(),(()=>{var X;var M=Us();return oe(M,"click",(X=e())==null?void 0:X.leaveRoom),b(M,()=>p().modal.leave),M})()]:(()=>{var M=Fs();return M.$$click=()=>{var X;return(X=e())==null?void 0:X.joinRoom(n.config.rooms[0])},b(M,()=>p().modal.join),M})()})()),y})())]}Oe(["click"]);const Vs="aconsole.log('Hello, world!');";async function Hn(){const n=new TextEncoder,e=await window.crypto.subtle.importKey("raw",n.encode(Vs),{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n.encode("consoole.alert.?33312oooo#?"),iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function Wn(){return window.location.hostname==="192.168.1.151"}async function Hs(n,e,t){const r={data:e,expiresAt:Date.now()+t*1e3},i=JSON.stringify(r);if(Wn()){localStorage.setItem(n,btoa(i));return}const s=new TextEncoder,o=window.crypto.getRandomValues(new Uint8Array(12)),a=await Hn(),c=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,s.encode(i)),l=`${btoa(String.fromCharCode(...o))}.${btoa(String.fromCharCode(...new Uint8Array(c)))}`;localStorage.setItem(n,l)}async function Ws(n){const e=localStorage.getItem(n);if(!e)return null;try{if(Wn()){const d=atob(e),f=JSON.parse(d);return Date.now()>f.expiresAt?(localStorage.removeItem(n),null):f.data}const[t,r]=e.split(".");if(!t||!r)return null;const i=Uint8Array.from(atob(t),d=>d.charCodeAt(0)),s=Uint8Array.from(atob(r),d=>d.charCodeAt(0)),o=await Hn(),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},o,s),l=new TextDecoder().decode(a),u=JSON.parse(l);return Date.now()>u.expiresAt?(localStorage.removeItem(n),null):u.data}catch(t){return console.error("Erreur lors du déchiffrement :",t),null}}const Gs="https://talkizi.com/api";function Ks(){return Array.from(document.querySelectorAll("script[src]")).find(n=>n.src.includes("widget.js"))||null}async function Js(n){const e=await Ws("config");if(e)return console.log("✅ Config trouvée dans le cache.",e),e;try{const r=await(await fetch(`${Gs}/configs/validate/${encodeURIComponent(n)}`,{cache:"force-cache"})).json();return r.valid?(await Hs("config",r,3600),r):(console.error("❌ Clé API invalide."),null)}catch(t){return console.error("❌ Erreur API:",t),null}}async function Wt(){const n=Ks();console.log(n);let e=n==null?void 0:n.getAttribute("data-key"),t=n==null?void 0:n.getAttribute("data-show"),r=t===null?!0:t==="true";e||(console.error("❌ API key manquante."),e="Stuc)vW47b.e5?@FGYbj");const i=await Js(e);if(!i||!i.valid){console.warn("❌ Config invalide ou absente. Rien ne sera affiché.");return}const o=new URLSearchParams(window.location.search).get("talkiziId");o&&(i.talkiziId=o,i.rooms=[{_id:o,name:"Private Room"}]);const a=document.createElement("div");document.body.appendChild(a);{if(console.info("🟣 Mode special actif → rendu uniquement de la modale.",r),!r){_n(()=>[],a);return}_n(()=>D(yi,{get children(){return r&&D(qs,{config:i})}}),a);return}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Wt):Wt(),window.TalkiziWidget={...window.TalkiziWidget||{},start:Wt,version:"1.0.0-06082025",env:"special"};class Ys{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return Qs(e).buffer}}function Qs(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);t.set(s,r),r+=i.byteLength}return t}function Gn(n){return new Xs(n).unpack()}function Kn(n){const e=new Zs,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class Xs{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let r=0,i="",s,o;for(;r<e;)s=t[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|t[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,r+=3):(o=(s&7)<<18|(t[r+1]&63)<<12|(t[r+2]&63)<<6|t[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++){const i=this.unpack();t[i]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(t===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+t*2**(i-52);return(r===0?1:-1)*o}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class Zs{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const r=i=>{if(i<t){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=t<<31|r+1023<<20|s/o&1048575,c=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<t.length){const o=t[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Ys,this._textEncoder=new TextEncoder}}let Jn=!0,Yn=!0;function qe(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseFloat(r[t],10)}function Te(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=l=>{const u=t(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function eo(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Jn=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function to(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Yn=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function Qn(){if(typeof window=="object"){if(Jn)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Gt(n,e){Yn&&console.warn(n+" is deprecated, please use "+e+" instead.")}function no(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(qe(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(qe(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(qe(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype,e._safariVersion=qe(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Xn(n){return Object.prototype.toString.call(n)==="[object Object]"}function Zn(n){return Xn(n)?Object.keys(n).reduce(function(e,t){const r=Xn(n[t]),i=r?Zn(n[t]):n[t],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[t]:i})},{}):n}function Kt(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Kt(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(i=>{Kt(n,n.get(i),t)})}))}function er(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return n.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{n.forEach(a=>{a.type===r&&a.trackId===o.id&&Kt(n,a,i)})}),i}const tr=Qn;function nr(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,p){return f?f+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return t.mediaDevices.enumerateDevices().then(f=>{f=f.filter(T=>T.kind==="videoinput");let p=f.find(T=>d.some(E=>T.label.toLowerCase().includes(E)));return!p&&f.length&&d.includes("back")&&(p=f[f.length-1]),p&&(a.video.deviceId=l.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=r(a.video),tr("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return tr("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{t.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function rr(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function ir(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Te(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function sr(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function or(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>er(o,s.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Te(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>er(s,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function ar(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function cr(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return ar(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const u=t.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new n.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},n.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(E=>E===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(E=>E.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const T=this._streams[d.id];if(T)T.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const E=new n.MediaStream([u]);this._streams[d.id]=E,this._reverseStreams[E.id]=d,this.addStream(E)}return this.getSenders().find(E=>E.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const p=l._reverseStreams[f],T=l._streams[p.id];d=d.replace(new RegExp(T.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const p=l._reverseStreams[f],T=l._streams[p.id];d=d.replace(new RegExp(p.id,"g"),T.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=n.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[T=>{const E=s(this,T);f[0].apply(null,[E])},T=>{f[1]&&f[1].apply(null,T)},arguments[2]]):u.apply(this,arguments).then(T=>s(this,T))}};n.RTCPeerConnection.prototype[l]=d[l]});const a=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),n.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(E=>u.track===E)&&(f=this._streams[p])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Jt(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=i[t]})}function lr(n,e){Te(n,"negotiationneeded",t=>{const r=t.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return t})}const ur=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:lr,shimAddTrackRemoveTrack:cr,shimAddTrackRemoveTrackWithNative:ar,shimGetSendersWithDtmf:sr,shimGetUserMedia:nr,shimMediaStream:rr,shimOnTrack:ir,shimPeerConnection:Jt,shimSenderReceiverGetStats:or},Symbol.toStringTag,{value:"Module"}));function dr(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(i,s,o){Gt("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function ro(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function fr(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Yt(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=t[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:t[u.type]||u.type}))})}return c}).then(o,a)}}function hr(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function pr(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Te(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function mr(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){Gt("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function gr(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function yr(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function vr(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function _r(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function br(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Cr=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:yr,shimCreateAnswer:br,shimCreateOffer:_r,shimGetDisplayMedia:ro,shimGetParameters:vr,shimGetUserMedia:dr,shimOnTrack:fr,shimPeerConnection:Yt,shimRTCDataChannel:gr,shimReceiverGetStats:pr,shimRemoveStream:mr,shimSenderGetStats:hr},Symbol.toStringTag,{value:"Module"}));function Sr(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);const i=t.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function kr(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function Tr(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=t.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function xr(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=i=>r(Rr(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function Rr(n){return n&&n.video!==void 0?Object.assign({},n,{video:Zn(n.video)}):n}function Er(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Gt("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function wr(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pr(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Ar(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const Or=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ar,shimCallbacksAPI:Tr,shimConstraints:Rr,shimCreateOfferLegacy:Pr,shimGetUserMedia:xr,shimLocalStreamsAPI:Sr,shimRTCIceServerUrls:Er,shimRemoteStreamsAPI:kr,shimTrackEventTransceiver:wr},Symbol.toStringTag,{value:"Module"}));function io(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qt={exports:{}},Lr;function so(){return Lr||(Lr=1,function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(t){let r;t.indexOf("a=candidate:")===0?r=t.substring(12).split(" "):r=t.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const i=t.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const s=t.type;return r.push("typ"),r.push(s),s!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let r=t.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const i=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(t){const r=t.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const r={};let i;const s=t.substring(t.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(t){let r="",i=t.payloadType;if(t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const s=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?s.push(o+"="+t.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substring(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",i=t.payloadType;return t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),i={ssrc:parseInt(t.substring(7,r),10)},s=t.indexOf(":",r);return s>-1?(i.attribute=t.substring(r+1,s),i.value=t.substring(s+1)):i.attribute=t.substring(r+1),i},e.parseSsrcGroup=function(t){const r=t.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(t){const r=t.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let i="a=setup:"+r+`\r
`;return t.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(t){const r=t.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const i=e.matchPrefix(t+r,"a=ice-ufrag:")[0],s=e.matchPrefix(t+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(t)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=e.matchPrefix(t,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(t,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(t,r){let i="";i+="m="+t+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(t){const r=[],i=e.parseRtpParameters(t),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(t,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(t,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(T=>parseInt(T,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(p.rtx={ssrc:l}),r.push(p),s&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(t,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(t){const r={},i=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const i=e.matchPrefix(t,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(t){const r=e.parseMLine(t),i=e.matchPrefix(t,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(t,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(t,r){let i=[];return t.protocol!=="DTLS/SCTP"?i=["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,r,i){let s;const o=r!==void 0?r:2;return t?s=t:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const i=e.splitLines(t);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const i=e.splitLines(t)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(t){const i=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},n.exports=e}(Qt)),Qt.exports}var Ir=so();const $e=io(Ir),oo=Se({__proto__:null,default:$e},[Ir]);function pt(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=$e.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,Te(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Xt(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Te(n,"icecandidate",e=>{if(e.candidate){const t=$e.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function mt(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(a){if(!a||!a.sdp)return!1;const c=$e.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=$e.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=$e.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function gt(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},Te(n,"datachannel",r=>(e(r.channel,r.target),r))}function Zt(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function en(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return t.apply(this,arguments)}}function yt(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function vt(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?t.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const ao=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:en,shimAddIceCandidateNullOrEmpty:yt,shimConnectionState:Zt,shimMaxMessageSize:mt,shimParameterlessSetLocalDescription:vt,shimRTCIceCandidate:pt,shimRTCIceCandidateRelayProtocol:Xt,shimSendThrowTypeError:gt},Symbol.toStringTag,{value:"Module"}));function co({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=Qn,r=no(n),i={browserDetails:r,commonShim:ao,extractVersion:qe,disableLog:eo,disableWarnings:to,sdp:oo};switch(r.browser){case"chrome":if(!ur||!Jt||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=ur,yt(n,r),vt(n),nr(n,r),rr(n),Jt(n,r),ir(n),cr(n,r),sr(n),or(n),lr(n,r),pt(n),Xt(n),Zt(n),mt(n,r),gt(n),en(n,r);break;case"firefox":if(!Cr||!Yt||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=Cr,yt(n,r),vt(n),dr(n,r),Yt(n,r),fr(n),mr(n),hr(n),pr(n),gr(n),yr(n),vr(n),_r(n),br(n),pt(n),Zt(n),mt(n,r),gt(n);break;case"safari":if(!Or||!e.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=Or,yt(n,r),vt(n),Er(n),Pr(n),Tr(n),Sr(n),kr(n),wr(n),xr(n),Ar(n),pt(n),Xt(n),mt(n,r),gt(n),en(n,r);break;default:t("Unsupported browser!");break}return i}const Dr=co({window:typeof window>"u"?void 0:window});function xe(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}class $r{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),c=e.slice(o,a),l={__peerData:this._dataCount,n:s,data:c,total:i};t.push(l),o=a,s++}return this._dataCount++,t}}}function lo(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.byteLength;return t}const tn=Dr.default||Dr,Ve=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return tn.browserDetails.browser}getVersion(){return tn.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=tn.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},uo=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),Mr=()=>Math.random().toString(36).slice(2),Br={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class fo extends $r{noop(){}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(i){i.target&&t(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Br,this.browser=Ve.getBrowser(),this.browserVersion=Ve.getVersion(),this.pack=Kn,this.unpack=Gn,this.supports=function(){const t={browser:Ve.isBrowserSupported(),webRTC:Ve.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let r;try{r=new RTCPeerConnection(Br),t.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!i.ordered;try{i.binaryType="blob",t.binaryBlob=!Ve.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return t}(),this.validateId=uo,this.randomToken=Mr}}const Y=new fo,ho="PeerJS: ";class po{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const r=[ho,...t];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var h=new po,nn={},mo=Object.prototype.hasOwnProperty,Q="~";function He(){}Object.create&&(He.prototype=Object.create(null),new He().__proto__||(Q=!1));function go(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function Nr(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new go(t,r||n,i),o=Q?Q+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function _t(n,e){--n._eventsCount===0?n._events=new He:delete n._events[e]}function W(){this._events=new He,this._eventsCount=0}W.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)mo.call(t,r)&&e.push(Q?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},W.prototype.listeners=function(e){var t=Q?Q+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},W.prototype.listenerCount=function(e){var t=Q?Q+e:e,r=this._events[t];return r?r.fn?1:r.length:0},W.prototype.emit=function(e,t,r,i,s,o){var a=Q?Q+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,s),!0;case 6:return c.fn.call(c.context,t,r,i,s,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,r);break;case 4:c[d].fn.call(c[d].context,t,r,i);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},W.prototype.on=function(e,t,r){return Nr(this,e,t,r,!1)},W.prototype.once=function(e,t,r){return Nr(this,e,t,r,!0)},W.prototype.removeListener=function(e,t,r,i){var s=Q?Q+e:e;if(!this._events[s])return this;if(!t)return _t(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&_t(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:_t(this,s)}return this},W.prototype.removeAllListeners=function(e){var t;return e?(t=Q?Q+e:e,this._events[t]&&_t(this,t)):(this._events=new He,this._eventsCount=0),this},W.prototype.off=W.prototype.removeListener,W.prototype.addListener=W.prototype.on,W.prefixed=Q,W.EventEmitter=W,nn=W;var Re={};xe(Re,"ConnectionType",()=>me),xe(Re,"PeerErrorType",()=>$),xe(Re,"BaseConnectionErrorType",()=>bt),xe(Re,"DataConnectionErrorType",()=>Ct),xe(Re,"SerializationType",()=>We),xe(Re,"SocketEventType",()=>ge),xe(Re,"ServerMessageType",()=>V);var me=function(n){return n.Data="data",n.Media="media",n}({}),$=function(n){return n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc",n}({}),bt=function(n){return n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed",n}({}),Ct=function(n){return n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big",n}({}),We=function(n){return n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw",n}({}),ge=function(n){return n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close",n}({}),V=function(n){return n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE",n}({});const jr="1.5.5";class yo extends nn.EventEmitter{constructor(e,t,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+t+":"+r+i+"peerjs?key="+s}start(e,t){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+jr),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),h.log("Server message received:",s)}catch{h.log("Invalid server message",i.data);return}this.emit(ge.Message,s)},this._socket.onclose=i=>{this._disconnected||(h.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(ge.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),h.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){h.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:V.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ge.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class zr{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===me.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=t.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){h.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;h.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(h.log(`Received ICE candidates for ${t}:`,o.candidate),s.socket.send({type:V.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":h.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(bt.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":h.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(bt.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":h.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},h.log("Listening for data channel"),e.ondatachannel=o=>{h.log("Received data channel");const a=o.channel;s.getConnection(t,r)._initializeDataChannel(a)},h.log("Listening for remote stream"),e.ontrack=o=>{h.log("Received remote stream");const a=o.streams[0],c=s.getConnection(t,r);if(c.type===me.Media){const l=c;this._addStreamToMediaConnection(a,l)}}}cleanup(){h.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(t||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);h.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),h.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===me.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}t.socket.send({type:V.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError($.WebRTC,i),h.log("Failed to setLocalDescription, ",i))}}catch(r){t.emitError($.WebRTC,r),h.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();h.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),h.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:V.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){t.emitError($.WebRTC,i),h.log("Failed to setLocalDescription, ",i)}}catch(r){t.emitError($.WebRTC,r),h.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const r=this.connection.peerConnection,i=this.connection.provider;h.log("Setting remote description",t);const s=this;try{await r.setRemoteDescription(t),h.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError($.WebRTC,o),h.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){h.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),h.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError($.WebRTC,t),h.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(h.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return h.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){h.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class Ur extends nn.EventEmitter{emitError(e,t){h.error("Error:",t),this.emit("error",new Fr(`${e}`,t))}}class Fr extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class qr extends Ur{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}const Ge=class Ge extends qr{get type(){return me.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Ge.ID_PREFIX+Y.randomToken(),this._negotiator=new zr(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{h.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{h.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){h.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case V.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case V.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:h.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){h.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};on=new WeakMap,Ye(Ge,on,Ge.ID_PREFIX="mc_");let St=Ge;class vo{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${t}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",jr),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){h.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Y.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===Y.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw h.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}const Ee=class Ee extends qr{get type(){return me.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||Ee.ID_PREFIX+Mr(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new zr(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{h.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{h.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{h.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(Ct.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case V.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case V.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:h.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};an=new WeakMap,cn=new WeakMap,Ye(Ee,an,Ee.ID_PREFIX="dc_"),Ye(Ee,cn,Ee.MAX_BUFFERED_AMOUNT=8388608);let kt=Ee;class Tt extends kt{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>kt.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return h.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class rn extends Tt{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new $r,this.serialization=We.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=Gn(e),r=t.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const i=lo(r.data);this._handleDataMessage({data:i})}}_send(e,t){const r=Kn(e);if(r instanceof Promise)return this._send_blob(r);if(!t&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);h.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class _o extends Tt{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=We.None}}class bo extends Tt{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Y.chunkedMTU){this.emitError(Ct.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=We.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}const Ke=class Ke extends Ur{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:_o,json:bo,binary:rn,"binary-utf8":rn,default:rn},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:Y.CLOUD_HOST,port:Y.CLOUD_PORT,path:"/",key:Ke.DEFAULT_KEY,token:Y.randomToken(),config:Y.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Y.CLOUD_HOST?this._options.secure=Y.isSecure():this._options.host==Y.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&h.setLogFunction(this._options.logFunction),h.logLevel=this._options.debug||0,this._api=new vo(t),this._socket=this._createServerConnection(),!Y.supports.audioVideo&&!Y.supports.data){this._delayedAbort($.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Y.validateId(r)){this._delayedAbort($.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort($.ServerError,i))}_createServerConnection(){const e=new yo(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ge.Message,t=>{this._handleMessage(t)}),e.on(ge.Error,t=>{this._abort($.SocketError,t)}),e.on(ge.Disconnected,()=>{this.disconnected||(this.emitError($.Network,"Lost connection to server."),this.disconnect())}),e.on(ge.Close,()=>{this.disconnected||this._abort($.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,i=e.src;switch(t){case V.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case V.Error:this._abort($.ServerError,r.msg);break;case V.IdTaken:this._abort($.UnavailableID,`ID "${this.id}" is taken`);break;case V.InvalidKey:this._abort($.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case V.Leave:h.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case V.Expire:this.emitError($.PeerUnavailable,`Could not connect to peer ${i}`);break;case V.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),h.warn(`Offer received for existing Connection ID:${s}`)),r.type===me.Media){const c=new St(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=c,this._addConnection(i,o),this.emit("call",c)}else if(r.type===me.Data){const c=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=c,this._addConnection(i,o),this.emit("connection",c)}else{h.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const c of a)o.handleMessage(c);break}default:{if(!r){h.warn(`You received a malformed message from ${i} of type ${t}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):h.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){h.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected){h.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){h.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new St(e,this,{...r,_stream:t});return this._addConnection(e,i),i}_addConnection(e,t){h.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===t)return i;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){h.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(h.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;h.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)h.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)h.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort($.ServerError,t))}};ln=new WeakMap,Ye(Ke,ln,Ke.DEFAULT_KEY="peerjs");let sn=Ke;const Co=Object.freeze(Object.defineProperty({__proto__:null,BaseConnectionErrorType:bt,BufferedConnection:Tt,ConnectionType:me,DataConnectionErrorType:Ct,Peer:sn,PeerError:Fr,PeerErrorType:$,SerializationType:We,ServerMessageType:V,SocketEventType:ge,util:Y},Symbol.toStringTag,{value:"Module"}))})();
